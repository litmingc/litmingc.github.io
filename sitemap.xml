<search>
    
     <entry>
        <title>[Tips]Rime Settings</title>
        <url>https://litmingc.github.io/post/tips/rime-settings/</url>
        <categories>
          <category>Tips</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> rimeè¾“å…¥æ³•çš„è®¾ç½®çš„å¤‡å¿˜å½•ã€‚
æ–‡æ¡£å¤‡å¿˜ï¼š
è‡´ç¬¬ä¸€æ¬¡å®‰è£…RIMEçš„ä½ 
  å…¨å±€é…ç½®ï¼š
åœ¨ç”¨æˆ·ç›®å½•ä¿®æ”¹æ–‡ä»¶default.custom.yamlï¼Œæ·»åŠ é…ç½®é¡¹ï¼š
patch:&amp;quot;ascii_composer/switch_key/Shift_L&amp;quot;: commit_code   è‡ªå®šä¹‰ç¬¦å·ï¼š
ä½¿ç”¨æœ™æœˆæ‹¼éŸ³.ç®€åŒ–å­—çš„æƒ…å†µä¸‹ï¼Œåœ¨ç”¨æˆ·ç›®å½•æ–°å»ºæ–‡ä»¶luna_pinyin_simp.custom.yamlï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14  patch:&amp;#34;menu/page_size&amp;#34;: 5# è‡ªå®šä¹‰ç¬¦å·æ˜ å°„punctuator/full_shape:&amp;#34;\\&amp;#34;:&amp;#34;\\&amp;#34;punctuator/half_shape:&amp;#34;\\&amp;#34;:&amp;#34;\\&amp;#34;punctuator/half_shape:&amp;#34;`&amp;#34;:&amp;#34;`&amp;#34;# é…ç½®ç¬¦å·è¡¨ã€åŒ¹é…çš„è¡¨è¾¾å¼punctuator/import_preset:mysymbolsrecognizer/patterns/punct:&amp;#34;^i([0-9]0?|[A-Za-z]&#43;)$&amp;#34;  æ³¨æ„ï¼Œè¦ä½¿ç”¨ç‰¹æ®Šç¬¦å·è¿˜éœ€è¦mysymbols.yamlæ–‡ä»¶ã€‚ åœ¨ç”¨æˆ·ç›®å½•æ–°å»ºæ–‡ä»¶mysymbols.yamlï¼š mysymbols.yamlæ–‡ä»¶çš„å†…å®¹  å¤åˆ¶äº†ç¨‹åºç›®å½•ä¸‹çš„symbols.yamlçš„å†…å®¹ï¼Œå°†symbolséƒ¨åˆ†çš„\æ”¹æˆiï¼ˆiå–å†³äºrecognizer/patterns/punct:çš„è®¾ç½®ï¼Œå¯ä»¥è‡ªè¡Œé€‰æ‹©å…¶å®ƒå­—ç¬¦ï¼‰ã€‚
ç¤ºä¾‹ï¼š
199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216  patch:punctuator/import_preset:symbolsrecognizer/patterns/punct:&amp;#39;^!([0-9]0?|[A-Za-z]&#43;)$&amp;#39;punctuator:full_shape:&amp;#39; &amp;#39; :{commit:&amp;#39;ã€€&amp;#39;}half_shape:&amp;#39;,&amp;#39; :{commit:ï¼Œ }symbols:&amp;#34;i0&amp;#34;: [&amp;#34;ã€‡&amp;#34;,&amp;#34;é›¶&amp;#34;,&amp;#34;â‚€&amp;#34;,&amp;#34;â°&amp;#34;,&amp;#34;â“ª&amp;#34;,&amp;#34;â“¿&amp;#34;,&amp;#34;ï¼&amp;#34;]&amp;#34;i1&amp;#34;: [&amp;#34;ä¸€&amp;#34;,&amp;#34;å£¹&amp;#34;,&amp;#34;â‚&amp;#34;,&amp;#34;Â¹&amp;#34;,&amp;#34;â… &amp;#34;,&amp;#34;â…°&amp;#34;,&amp;#34;â‘ &amp;#34;,&amp;#34;â€&amp;#34;,&amp;#34;â¶&amp;#34;,&amp;#34;âŠ&amp;#34;,&amp;#34;â“µ&amp;#34;,&amp;#34;â‘´&amp;#34;,&amp;#34;â’ˆ&amp;#34;,&amp;#34;ï¼‘&amp;#34;,&amp;#34;ãŠ€&amp;#34;,&amp;#34;ãˆ &amp;#34;,&amp;#34;å¼Œ&amp;#34;,&amp;#34;å£±&amp;#34;,&amp;#34;å¹º&amp;#34;,&amp;#34;ã†’&amp;#34;]&amp;#34;i10&amp;#34;: [&amp;#34;å&amp;#34;,&amp;#34;æ‹¾&amp;#34;,&amp;#34;â‚â‚€&amp;#34;,&amp;#34;Â¹â°&amp;#34;,&amp;#34;â…©&amp;#34;,&amp;#34;â…¹&amp;#34;,&amp;#34;â‘©&amp;#34;,&amp;#34;â‰&amp;#34;,&amp;#34;â¿&amp;#34;,&amp;#34;â“&amp;#34;,&amp;#34;â“¾&amp;#34;,&amp;#34;â‘½&amp;#34;,&amp;#34;â’‘&amp;#34;,&amp;#34;ï¼‘ï¼&amp;#34;,&amp;#34;ãŠ‰&amp;#34;,&amp;#34;ãˆ©&amp;#34;,&amp;#34;ä»€&amp;#34;]&amp;#34;i2&amp;#34;: [&amp;#34;äºŒ&amp;#34;,&amp;#34;è²³&amp;#34;,&amp;#34;â‚‚&amp;#34;,&amp;#34;Â²&amp;#34;,&amp;#34;â…¡&amp;#34;,&amp;#34;â…±&amp;#34;,&amp;#34;â‘¡&amp;#34;,&amp;#34;â&amp;#34;,&amp;#34;â·&amp;#34;,&amp;#34;â‹&amp;#34;,&amp;#34;â“¶&amp;#34;,&amp;#34;â‘µ&amp;#34;,&amp;#34;â’‰&amp;#34;,&amp;#34;ï¼’&amp;#34;,&amp;#34;ãŠ&amp;#34;,&amp;#34;ãˆ¡&amp;#34;,&amp;#34;å¼&amp;#34;,&amp;#34;å¼&amp;#34;,&amp;#34;è²®&amp;#34;,&amp;#34;ã’ƒ&amp;#34;,&amp;#34;ã’³&amp;#34;,&amp;#34;å…©&amp;#34;,&amp;#34;å€†&amp;#34;,&amp;#34;ã†“&amp;#34;]&amp;#34;izmq&amp;#34;: [&amp;#34;â“&amp;#34;,&amp;#34;â’¶&amp;#34;,&amp;#34;â“‘&amp;#34;,&amp;#34;â’·&amp;#34;,&amp;#34;â“’&amp;#34;,&amp;#34;â’¸&amp;#34;,&amp;#34;â““&amp;#34;,&amp;#34;â’¹&amp;#34;,&amp;#34;â“”&amp;#34;,&amp;#34;â’º&amp;#34;,&amp;#34;â“•&amp;#34;,&amp;#34;â’»&amp;#34;,&amp;#34;â“–&amp;#34;,&amp;#34;â’¼&amp;#34;,&amp;#34;â“—&amp;#34;,&amp;#34;â’½&amp;#34;,&amp;#34;â“˜&amp;#34;,&amp;#34;â’¾&amp;#34;,&amp;#34;â“™&amp;#34;,&amp;#34;â’¿&amp;#34;,&amp;#34;â“š&amp;#34;,&amp;#34;â“€&amp;#34;,&amp;#34;â“›&amp;#34;,&amp;#34;â“&amp;#34;,&amp;#34;â“œ&amp;#34;,&amp;#34;â“‚&amp;#34;,&amp;#34;â“&amp;#34;,&amp;#34;â“ƒ&amp;#34;,&amp;#34;â“&amp;#34;,&amp;#34;â“„&amp;#34;,&amp;#34;â“Ÿ&amp;#34;,&amp;#34;â“…&amp;#34;,&amp;#34;â“ &amp;#34;,&amp;#34;â“†&amp;#34;,&amp;#34;â“¡&amp;#34;,&amp;#34;â“‡&amp;#34;,&amp;#34;â“¢&amp;#34;,&amp;#34;â“ˆ&amp;#34;,&amp;#34;â“£&amp;#34;,&amp;#34;â“‰&amp;#34;,&amp;#34;â“¤&amp;#34;,&amp;#34;â“Š&amp;#34;,&amp;#34;â“¥&amp;#34;,&amp;#34;â“‹&amp;#34;,&amp;#34;â“¦&amp;#34;,&amp;#34;â“Œ&amp;#34;,&amp;#34;â“§&amp;#34;,&amp;#34;â“&amp;#34;,&amp;#34;â“¨&amp;#34;,&amp;#34;â“&amp;#34;,&amp;#34;â“©&amp;#34;,&amp;#34;â“&amp;#34;]&amp;#34;izy&amp;#34;: [&amp;#34;ã„…&amp;#34;,&amp;#34;ã„†&amp;#34;,&amp;#34;ã„‡&amp;#34;,&amp;#34;ã„ˆ&amp;#34;,&amp;#34;ã„‰&amp;#34;,&amp;#34;ã„Š&amp;#34;,&amp;#34;ã„‹&amp;#34;,&amp;#34;ã„Œ&amp;#34;,&amp;#34;ã„&amp;#34;,&amp;#34;ã„&amp;#34;,&amp;#34;ã„&amp;#34;,&amp;#34;ã„&amp;#34;,&amp;#34;ã„‘&amp;#34;,&amp;#34;ã„’&amp;#34;,&amp;#34;ã„“&amp;#34;,&amp;#34;ã„”&amp;#34;,&amp;#34;ã„•&amp;#34;,&amp;#34;ã„–&amp;#34;,&amp;#34;ã„—&amp;#34;,&amp;#34;ã„˜&amp;#34;,&amp;#34;ã„™&amp;#34;,&amp;#34;ã„§&amp;#34;,&amp;#34;ã„¨&amp;#34;,&amp;#34;ã„©&amp;#34;,&amp;#34;ã„š&amp;#34;,&amp;#34;ã„›&amp;#34;,&amp;#34;ã„œ&amp;#34;,&amp;#34;ã„&amp;#34;,&amp;#34;ã„&amp;#34;,&amp;#34;ã„Ÿ&amp;#34;,&amp;#34;ã„ &amp;#34;,&amp;#34;ã„¡&amp;#34;,&amp;#34;ã„¢&amp;#34;,&amp;#34;ã„£&amp;#34;,&amp;#34;ã„¤&amp;#34;,&amp;#34;ã„¥&amp;#34;,&amp;#34;ã„¦&amp;#34;,&amp;#34;ã„ª&amp;#34;,&amp;#34;ã„«&amp;#34;,&amp;#34;ã„¬&amp;#34;,&amp;#34;ã„­&amp;#34;,&amp;#34;ã† &amp;#34;,&amp;#34;ã†¡&amp;#34;,&amp;#34;ã†¢&amp;#34;,&amp;#34;ã†£&amp;#34;,&amp;#34;ã†¤&amp;#34;,&amp;#34;ã†¥&amp;#34;,&amp;#34;ã†¦&amp;#34;,&amp;#34;ã†§&amp;#34;,&amp;#34;ã†¨&amp;#34;,&amp;#34;ã†©&amp;#34;,&amp;#34;ã†ª&amp;#34;,&amp;#34;ã†«&amp;#34;,&amp;#34;ã†¬&amp;#34;,&amp;#34;ã†­&amp;#34;,&amp;#34;ã†®&amp;#34;,&amp;#34;ã†¯&amp;#34;,&amp;#34;ã†°&amp;#34;,&amp;#34;ã†±&amp;#34;,&amp;#34;ã†²&amp;#34;,&amp;#34;ã†³&amp;#34;,&amp;#34;ã†´&amp;#34;,&amp;#34;ã†µ&amp;#34;,&amp;#34;ã†¶&amp;#34;,&amp;#34;ã†·&amp;#34;]   
  è¾“å…¥æ³•æ ·å¼çš„é…ç½® åœ¨ç”¨æˆ·ç›®å½•ä¿®æ”¹æ–‡ä»¶weasel.custom.yamlï¼Œæ·»åŠ é…ç½®é¡¹ï¼š
patch:&amp;quot;style/font_point&amp;quot;: 12&amp;quot;style/horizontal&amp;quot;: true # æ°´å¹³æ˜¾ç¤ºå€™é€‰å­—  æ‹“å±•è¯åº“ï¼š
è®¿é—®rime-aca/dictionariesï¼Œå‚çœ‹readme.mdæ–‡ä»¶ï¼Œå°†*.dict.yamlæ–‡ä»¶æ”¾åˆ°ç”¨æˆ·ç›®å½•ä¸­ï¼ŒåŒæ—¶å‚ç…§*.custom.yamlæ–‡ä»¶ä¿®æ”¹å¯¹åº”çš„è¾“å…¥æ–¹æ¡ˆã€‚
  è‡ªç„¶ç åŒæ‹¼ï¼š
è®¿é—®rime/rime-double-pinyinï¼Œä¸‹è½½å¾—åˆ°ä¸€å †*.schema.yamlæ–‡ä»¶ï¼Œå°†è‡ªå·±éœ€è¦çš„æ–‡ä»¶å¤åˆ¶åˆ°ç”¨æˆ·ç›®å½•ä¸­ï¼Œé‡æ–°éƒ¨ç½²åï¼Œä½¿ç”¨è¾“å…¥å‘è®¾å®šå‹¾é€‰éœ€è¦çš„è¾“å…¥æ–¹æ¡ˆã€‚
  ç”¨æˆ·é…ç½®å¤‡ä»½ï¼š
åœ¨installation.yamlæ–‡ä»¶ä¸­æ·»åŠ é…ç½®é¡¹ï¼š
1 2  # Windowssync_dir:&amp;#39;F:\BackupDocuments\RimeSettings&amp;#39;  é‡æ–°éƒ¨ç½²åï¼Œä½¿ç”¨ç”¨æˆ·èµ„æ–™åŒæ­¥å‹¾é€‰éœ€è¦çš„è¾“å…¥æ–¹æ¡ˆã€‚
æ³¨æ„ï¼šè·¯å¾„ä¸­ä¸è¦å‡ºç°ä¸­æ–‡ã€‚
  </content>
    </entry>
    
     <entry>
        <title>[C&amp;C&#43;&#43;]Cmake</title>
        <url>https://litmingc.github.io/post/cc&#43;&#43;/cmake/</url>
        <categories>
          <category>C&amp;C&#43;&#43;</category>
        </categories>
        <tags>
          <tag>ç¿»è¯‘</tag><tag>ç¬”è®°</tag>
        </tags>
        <content type="html"> æœ¬æ–‡ä¸ºé˜…è¯»å®˜æ–¹æ•™ç¨‹CMake Tutorialçš„ç¬”è®°ã€‚
Step1ï¼šhello world æ–°å»ºä¸€ä¸ªproject01ç›®å½•ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªtutorial.cppæ–‡ä»¶ï¼ˆå…¶ä¸­è¾“å‡ºhello worldï¼‰ã€‚
  åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªCMakeLists.txtæ–‡ä»¶ã€‚
æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8  # æŒ‡å®šcmakeæœ€å°ç‰ˆæœ¬ cmake_minimum_required(VERSION 3.10)# è®¾ç½®é¡¹ç›®çš„åç§°ï¼Œæ²¡æœ‰å…¶ä»–è®¾ç½®çš„è¯ï¼Œç¼–è¯‘å®Œæˆçš„å¯æ‰§è¡Œæ–‡ä»¶å°±æ˜¯è¿™ä¸ªåç§° project(project001)# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶ï¼Œwindowsä¸‹ï¼Œä¼šç¼–è¯‘ç”ŸæˆTutorial.exe add_executable(project01 tutorial.cpp)  å¯æ‰§è¡Œæ–‡ä»¶çš„åå­—ä¸é¡¹ç›®çš„åå­—å¹¶æ²¡æœ‰å…³ç³»ï¼Œä¸ä¸€å®šè¦è®¾ç½®æˆä¸€æ ·çš„ã€‚
  æ·»åŠ cmakeçš„å¤´æ–‡ä»¶ï¼Œæ·»åŠ ç‰ˆæœ¬å·
 ä¿®æ”¹CMakeLists.txtæ–‡ä»¶ï¼Œæ·»åŠ ç‰ˆæœ¬å·çš„ä¿¡æ¯ 1  project(project001 VERSION 0.1)   æ·»åŠ tutorial.h.inæ–‡ä»¶ï¼Œç¼–å†™ç›¸å…³çš„å®å®šä¹‰ 1 2 3  // the configured options and settings for Tutorial #define Tutorial_VERSION_MAJOR @project001_VERSION_MAJOR@ #define Tutorial_VERSION_MINOR @project001_VERSION_MINOR@   éœ€è¦æ³¨æ„ï¼š
@project001_VERSION_MAJOR@çš„å†™æ³•ï¼Œå…¶ä¸­åŒ…å«äº†é¡¹ç›®åç§°ï¼Œä¸åŒé¡¹ç›®åéœ€è¦å¯¹åº”ä¿®æ”¹ã€‚
 ä¿®æ”¹CMakeLists.txtæ–‡ä»¶ï¼Œæ·»åŠ å¤´æ–‡ä»¶çš„é…ç½®é¡¹ï¼Œä½¿cmakeæ ¹æ®XX.h.inæ–‡ä»¶ç”Ÿæˆå¯¹åº”çš„XX.hæ–‡ä»¶ 1 2 3 4 5  configure_file(tutorial.h.in tutorial.h)add_executable(project01 tutorial.cpp)target_include_directories(project01 PUBLIC &amp;#34;${PROJECT_BINARY_DIR}&amp;#34; )  configure_fileæŒ‡å®šäº†ç”Ÿæˆçš„å¤´æ–‡ä»¶çš„åå­—ï¼›
target_include_directoriesæŒ‡å®šå¤´æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡æ–‡ä»¶ï¼Œæ­¤å¤„ä¸add_executableä¸€è‡´ï¼Œä¸é¡¹ç›®åæ— å…³ã€‚å› æ­¤ï¼Œtarget_include_directorieséœ€è¦å†™åœ¨add_executableåé¢ã€‚
cmakeæ„å»ºä¹‹åå¯ä»¥åœ¨é¡¹ç›®ä¸­æ£€æŸ¥ç”Ÿæˆçš„å¤´æ–‡ä»¶ï¼Œ@project001_VERSION_MAJOR@è¢«åšäº†ç›¸åº”çš„æ›¿æ¢ï¼š
1 2 3  // the configured options and settings for Tutorial #define Tutorial_VERSION_MAJOR 0 #define Tutorial_VERSION_MINOR 1    ä¿®æ”¹mainå‡½æ•°ï¼Œä½¿ç”¨å®ï¼Œè¾“å‡ºcmakeä¸­å®šä¹‰çš„ç‰ˆæœ¬å·ä¿¡æ¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  #include &amp;lt;iostream&amp;gt;#include &amp;#34;tutorial.h&amp;#34; int main(int argc, char* argv[]) { if (argc &amp;lt; 2) { // report version  std::cout &amp;lt;&amp;lt; argv[0] &amp;lt;&amp;lt; &amp;#34; Version &amp;#34; &amp;lt;&amp;lt; Tutorial_VERSION_MAJOR &amp;lt;&amp;lt; &amp;#34;.&amp;#34; &amp;lt;&amp;lt; Tutorial_VERSION_MINOR &amp;lt;&amp;lt; std::endl; std::cout &amp;lt;&amp;lt; &amp;#34;Usage: &amp;#34; &amp;lt;&amp;lt; argv[0] &amp;lt;&amp;lt; &amp;#34; number&amp;#34; &amp;lt;&amp;lt; std::endl; return 1; } return 0; }       æŒ‡å®šc&#43;&#43;æ ‡å‡†
å½“éœ€è¦ä½¿ç”¨c&#43;&#43;æ–°çš„ç‰¹æ€§æ˜¯ï¼Œå¯ä»¥åœ¨cmakeä¸­æŒ‡å®šï¼š
1 2 3  # specify the C&#43;&#43; standard set(CMAKE_CXX_STANDARD 11)set(CMAKE_CXX_STANDARD_REQUIRED True)    ç¼–è¯‘é¡¹ç›®
æ–°å»ºä¸€ä¸ªbuildç›®å½•ï¼Œåœ¨buildç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š
1 2  cmake ../ cmake --build ./   å…¶ä¸­cmake ../æŒ‡å®šçš„æ˜¯CMakeLists.txtæ–‡ä»¶çš„ä½ç½®ï¼Œå¹¶åœ¨æ‰§è¡Œç›®å½•ç”Ÿæˆé¡¹ç›®æ–‡ä»¶ä»¥åŠç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰CMakeCache.txtç­‰æ–‡ä»¶ã€‚
cmake --build ./æŒ‡å®šçš„å°±æ˜¯CMakeCache.txtçš„ç›®å½•ã€‚
  Step2ï¼šæ·»åŠ åº“æ–‡ä»¶ æ–°å»ºå­ç›®å½•MathFunctionsï¼Œæ„é€ æˆ‘ä»¬çš„mysqrtå‡½æ•°ï¼Œå¹¶åœ¨mainå‡½æ•°ä¸­è°ƒç”¨ã€‚
æ–°å»ºæ–‡ä»¶MathFunctions.hã€mysqrt.cppï¼Œå†…å®¹å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  // mysqrt.cpp  #include &amp;lt;iostream&amp;gt; // a hack square root calculation using simple operations double mysqrt(double x) { if (x &amp;lt;= 0) { return 0; } double result = x; // do ten iterations  for (int i = 0; i &amp;lt; 10; &#43;&#43;i) { if (result &amp;lt;= 0) { result = 0.1; } double delta = x - (result * result); result = result &#43; 0.5 * delta / result; std::cout &amp;lt;&amp;lt; &amp;#34;Computing sqrt of &amp;#34; &amp;lt;&amp;lt; x &amp;lt;&amp;lt; &amp;#34; to be &amp;#34; &amp;lt;&amp;lt; result &amp;lt;&amp;lt; std::endl; } return result; }   1 2  // mysqrt.cpp double mysqrt(double x);   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  // mainå‡½æ•° #include &amp;lt;iostream&amp;gt;#include &amp;lt;string&amp;gt;#include &amp;#34;tutorial.h&amp;#34;#include &amp;#34;MathFunctions.h&amp;#34; int main(int argc, char* argv[]) { if (argc &amp;lt; 2) { // report version  std::cout &amp;lt;&amp;lt; argv[0] &amp;lt;&amp;lt; &amp;#34; Version &amp;#34; &amp;lt;&amp;lt; Tutorial_VERSION_MAJOR &amp;lt;&amp;lt; &amp;#34;.&amp;#34; &amp;lt;&amp;lt; Tutorial_VERSION_MINOR &amp;lt;&amp;lt; std::endl; std::cout &amp;lt;&amp;lt; &amp;#34;Usage: &amp;#34; &amp;lt;&amp;lt; argv[0] &amp;lt;&amp;lt; &amp;#34; number&amp;#34; &amp;lt;&amp;lt; std::endl; return 1; } // convert input to double  const double inputValue = std::stod(argv[1]); const double outputValue = mysqrt(inputValue); std::cout &amp;lt;&amp;lt; &amp;#34;The square root of &amp;#34; &amp;lt;&amp;lt; inputValue &amp;lt;&amp;lt; &amp;#34; is &amp;#34; &amp;lt;&amp;lt; outputValue &amp;lt;&amp;lt; std::endl; return 0; }     åœ¨MathFunctionså­ç›®å½•ä¸‹ï¼Œæ·»åŠ CMakeLists.txtæ–‡ä»¶ï¼Œæ·»åŠ MathFunctionsåº“ã€‚æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
1  add_library(MyFunctions mysqrt.cpp)    ä¿®æ”¹é¡¶å±‚çš„CMakeLists.txtï¼ˆé¡¹ç›®ç›®å½•ä¸‹ï¼‰ï¼Œä¸ºç›®æ ‡æ–‡ä»¶æ·»åŠ é“¾æ¥:
1 2 3 4 5 6 7 8  add_executable(project01 tutorial.cpp)add_subdirectory(MathFunctions)target_link_libraries(project01 PUBLIC MyFunctions)target_include_directories(project01 PUBLIC &amp;#34;${PROJECT_BINARY_DIR}&amp;#34; &amp;#34;${PROJECT_SOURCE_DIR}/MathFunctions&amp;#34; )  è‡³æ­¤ï¼Œmainä¸­å·²ç»å¯ä»¥æ­£å¸¸è°ƒç”¨mysqrtå‡½æ•°ã€‚
  ä¸‹é¢ï¼Œæ·»åŠ æ§åˆ¶å˜é‡ï¼Œé€šè¿‡cmakeçš„æ§åˆ¶å˜é‡ï¼Œåœ¨é¡¹ç›®ä¸­è°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚
  ä¿®æ”¹é¡¶å±‚çš„CMakeLists.txtï¼Œæ·»åŠ æ§åˆ¶å˜é‡USE_MYMATHï¼Œä½¿å¾—MathFunctionsæˆä¸ºå¯é€‰çš„åº“æ–‡ä»¶ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  option(USE_MYMATH &amp;#34;Use tutorial provided math implementation&amp;#34; ON)configure_file(tutorial.h.in tutorial.h)if(USE_MYMATH) add_subdirectory(MathFunctions) list(APPEND EXTRA_LIBS MathFunctions) list(APPEND EXTRA_INCLUDES &amp;#34;${PROJECT_SOURCE_DIR}/MathFunctions&amp;#34;)endif()# add the executable add_executable(Tutorial tutorial.cxx)target_link_libraries(Tutorial PUBLIC ${EXTRA_LIBS})# add the binary tree to the search path for include files # so that we will find TutorialConfig.h target_include_directories(Tutorial PUBLIC &amp;#34;${PROJECT_BINARY_DIR}&amp;#34; ${EXTRA_INCLUDES} )  é€šè¿‡optionè®¾ç½®å˜é‡ï¼Œä¹‹åé€šè¿‡.h.inæ–‡ä»¶ç”Ÿæˆçš„å¤´æ–‡ä»¶å¼•å…¥å®å®šä¹‰ï¼Œé€šè¿‡å®ä¿®æ”¹ä»£ç ä¸­çš„ç›¸å…³é€»è¾‘ã€‚
  ä¿®æ”¹tutorial.h.inï¼Œå¼•å…¥USE_MYMATHçš„å®šä¹‰ï¼š
1 2  // tutorial.h.in #cmakedefine USE_MYMATH   ç±»ä¼¼äº#cmakedefine VARçš„å®šä¹‰è¯­å¥å°†ä¼šè¢«æ›¿æ¢ä¸º#define VARæˆ–è€…/* #undef VAR /ï¼Œå¦‚ä¸Šä¾‹ä¸­USE_MYMATHå½“è®¾å®šä¸ºONçš„æ—¶å€™ï¼Œ#cmakedefine USE_MYMATHå˜æˆäº†#define USE_MYMATHï¼Œè®¾å®šä¸ºOFFæ—¶ï¼Œå˜æˆäº†/ #undef USE_MYMATH */ï¼›
åŒç†ï¼Œç±»ä¼¼äº#cmakedefine01 VARçš„å®šä¹‰è¯­å¥å°†ä¼šè¢«æ›¿æ¢ä¸º#define VAR 1æˆ–#define VAR 0ã€‚1
  ä¿®æ”¹mianå‡½æ•°ï¼Œåˆ©ç”¨USE_MYMATHæ§åˆ¶æ˜¯å¦è°ƒç”¨è‡ªå®šä¹‰çš„mysqrtå‡½æ•°ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  #include &amp;lt;math.h&amp;gt;#include &amp;lt;iostream&amp;gt;#include &amp;lt;string&amp;gt;#include &amp;#34;tutorial.h&amp;#34; #ifdef USE_MYMATH #include &amp;#34;MathFunctions.h&amp;#34;#endif  int main(int argc, char *argv[]) { if (argc &amp;lt; 2) { // report version  std::cout &amp;lt;&amp;lt; argv[0] &amp;lt;&amp;lt; &amp;#34; Version &amp;#34; &amp;lt;&amp;lt; Tutorial_VERSION_MAJOR &amp;lt;&amp;lt; &amp;#34;.&amp;#34; &amp;lt;&amp;lt; Tutorial_VERSION_MINOR &amp;lt;&amp;lt; std::endl; std::cout &amp;lt;&amp;lt; &amp;#34;Usage: &amp;#34; &amp;lt;&amp;lt; argv[0] &amp;lt;&amp;lt; &amp;#34; number&amp;#34; &amp;lt;&amp;lt; std::endl; return 1; } // convert input to double  const double inputValue = std::stod(argv[1]); #ifdef USE_MYMATH  const double outputValue = mysqrt(inputValue); #else  const double outputValue = sqrt(inputValue); #endif  std::cout &amp;lt;&amp;lt; &amp;#34;The square root of &amp;#34; &amp;lt;&amp;lt; inputValue &amp;lt;&amp;lt; &amp;#34; is &amp;#34; &amp;lt;&amp;lt; outputValue &amp;lt;&amp;lt; std::endl; return 0; }     æµ‹è¯•å˜é‡
åœ¨buildç›®å½•ä¸‹ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è®¾ç½®USE_MYMATHï¼Œå¹¶ç¼–è¯‘ï¼š
  1 2  cmake ../ -DUSE_MYMATH=OFF cmake --build ./   1 2  cmake ../ -DUSE_MYMATH=ON cmake --build ./   Step 2: Adding a Library
Step 2: Adding a Libraryä¸­æœ‰ä¸€ä¸ªé—®é¢˜ï¼š
Exercise: Why is it important that we configure TutorialConfig.h.in after the option for USE_MYMATH? What would happen if we inverted the two?
æˆ‘ä¹Ÿä¸çŸ¥é“ç­”æ¡ˆï¼Œæ„Ÿè§‰æ²¡å•¥é—®é¢˜ã€‚åˆ é™¤é¡¶å±‚MakeList.txtä¸­çš„option()ä¹‹åï¼Œå¤´æ–‡ä»¶ä¸­å†…å®¹ä¸USE_MYMATH=ONçš„æ—¶å€™ä¸€è‡´ã€‚
ä¹Ÿè®¸ï¼Œå¯¹äºä»»æ„å˜é‡ï¼Œé»˜è®¤å€¼å°±æ˜¯ONã€‚å› æ­¤ï¼Œå…ˆå¤„ç†USE_MYMATHå†å®šä¹‰å®ƒï¼Œå¯ä»¥é¿å…å¿˜è®°å¤„ç†è€Œå¸¦æ¥éš¾ä»¥å¯Ÿè§‰çš„é”™è¯¯ã€‚  Step3ï¼šä¸ºlibraryæ·»åŠ Usage Requirement è­¦å‘Šï¼šä¸ªäººç†è§£ï¼Œæœ‰å¾…éªŒè¯
æ²¡æœ‰ç‰¹åˆ«ç†è§£è¿™ä¸€èŠ‚çš„æ„æ€ï¼Œè¿™é‡Œå¯¹consumersçš„ç†è§£å¯èƒ½æœ‰é”™è¯¯ã€‚è¯·å…ˆè¯»å®˜æ–¹æ–‡æ¡£ã€‚   Usage RequirementæŒ‡çš„æ˜¯target_link_libraries()ã€target_include_directories()ç­‰å‘½ä»¤ä¸­çš„PUBLICã€PRIVATEã€INTERFACEå‚æ•°ã€‚
1  target_link_libraries(Tutorial PUBLIC ${EXTRA_LIBS})   é¦–å…ˆï¼Œè¯´æ˜ä¸‰ä¸ªä¸åŒçš„Usage Requirementçš„ä½¿ç”¨åœºæ™¯ï¼š
INTERFACEï¼šæ¶ˆè´¹è€…éœ€è¦ï¼Œç”Ÿäº§è€…ä¸éœ€è¦ï¼›
PUBLICï¼šæ¶ˆè´¹è€…éœ€è¦ï¼Œç”Ÿäº§è€…éœ€è¦ï¼›
PRIVATEï¼šæ¶ˆè´¹è€…ä¸éœ€è¦ï¼Œç”Ÿäº§è€…éœ€è¦ï¼›
å…¶æ¬¡ï¼Œä»€ä¹ˆæ˜¯æ¶ˆè´¹è€…ã€ ç”Ÿäº§è€…ï¼Œä»€ä¹ˆæ˜¯éœ€è¦ï¼Ÿ
ä»¥Step2ä¸­çš„ä»£ç ä¸ºä¾‹ï¼š
  ä¿®æ”¹MathFunctionsç›®å½•ä¸‹çš„CMakeLists.txtï¼Œæ·»åŠ å¦‚ä¸‹å‘½ä»¤ï¼š
1 2 3 4  add_library(MyFunctions mysqrt.cpp)target_include_directories(MyFunctions INTERFACE ${CMAKE_CURRENT_SOURCE_DIR} )  è¿™é‡ŒMyFunctionså°±æ˜¯ç”Ÿäº§è€…ï¼Œè€Œä¸Šå±‚çš„project01å°†æ˜¯æ¶ˆè´¹è€…ï¼Œå› ä¸ºproject01ä½¿ç”¨äº†MyFunctionsã€‚${CMAKE_CURRENT_SOURCE_DIR}è¿™ä¸ªç›®å½•æ˜¯project01éœ€è¦çš„ï¼Œè€ŒMyFunctionsä¸éœ€è¦é…ç½®ã€‚
  ä¿®æ”¹é¡¶å±‚çš„CMakeLists.txtï¼Œåˆ é™¤ä¸€éƒ¨åˆ†å‘½ä»¤ï¼š
1if(USE_MYMATH)2add_subdirectory(MathFunctions)3list(APPEND EXTRA_LIBS MyFunctions)4endif()56target_include_directories(project01 PUBLIC 7 &amp;#34;${PROJECT_BINARY_DIR}&amp;#34; 8 )è¿™é‡ŒTutorialæ˜¯ç”Ÿäº§è€…ï¼Œæ²¡æœ‰æ¶ˆè´¹è€…ã€‚
  è¿™ä¸¤æ­¥åªæ˜¯åˆ å»äº†Tutorialçš„target_include_directoriesä¸­MathFunctionsçš„ç›®å½•é…ç½®ï¼Œä¸‹æ”¾åˆ°äº†ä¸‹ä¸€çº§ï¼ˆMathFunctionsä¸­çš„cmakeæ–‡ä»¶ï¼‰é‡Œã€‚
æ€»ç»“ä¸€ä¸‹ï¼ŒUsage Requirementsæ§åˆ¶çš„æ˜¯é…ç½®é¡¹çš„ä¼ é€’æ–¹å¼ã€‚INTERFACEä¼šæŠŠé…ç½®é¡¹å‘ä¸Šå±‚ï¼ˆä½¿ç”¨è€…ã€æ¶ˆè´¹è€…ï¼‰ä¼ é€’ï¼Œè€Œè‡ªå·±ä¸ä¿ç•™é…ç½®é¡¹ï¼›PUBLICä¼šä¼ é€’é…ç½®ï¼Œè‡ªå·±ä¹Ÿä¿ç•™é…ç½®ï¼›PRIVATEä¸ä¼ é€’é…ç½®ï¼Œé…ç½®åªå¯¹è‡ªå·±ç”Ÿæ•ˆã€‚
Step4ï¼šå®‰è£…ä¸æµ‹è¯• å®‰è£…installing å¯¹äºMathFunctionï¼Œæˆ‘ä»¬éœ€è¦installçš„æ˜¯libæ–‡ä»¶å’Œå¤´æ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨MathFunction/CMakeLists.txtä¸­æ·»åŠ å‘½ä»¤ï¼š
1 2  install(TARGETS MyFunctions DESTINATION lib)install(FILES MathFunctions.h DESTINATION include)  å¯¹äºToturialï¼Œåœ¨é¡¶å±‚CMakeList.txtä¸­æ·»åŠ å‘½ä»¤ï¼š
1 2 3 4  install(TARGETS project01 DESTINATION bin)install(FILES &amp;#34;${PROJECT_BINARY_DIR}/tutorial.h&amp;#34; DESTINATION include )  æ·»åŠ å®Œinstallçš„è§„åˆ™ä¹‹åï¼Œå…ˆç¼–è¯‘é¡¹ç›®ï¼Œä¹‹åä½¿ç”¨å‘½ä»¤cmake --installè¿›è¡Œå®‰è£…ï¼š
1  cmake --install . --prefix &amp;#34;/home/myuser/installdir&amp;#34;   --prefixç”¨äºæŒ‡å®šå®‰è£…ç›®å½•ã€‚æ‰§è¡Œå®Œå‘½ä»¤ï¼Œåœ¨æŒ‡å®šçš„ç›®å½•ä¸‹å°†ç”Ÿæˆbinã€includeã€libæ–‡ä»¶å¤¹ï¼Œå¹¶åŒ…å«å¯¹åº”çš„æ–‡ä»¶ã€‚
æµ‹è¯• ä¿®æ”¹é¡¶å±‚çš„cmakeæ–‡ä»¶ï¼Œæ·»åŠ æµ‹è¯•å‘½ä»¤ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  enable_testing()# does the application run add_test(NAME Runs COMMAND project01 25)# does the usage message work? add_test(NAME Usage COMMAND project01)set_tests_properties(Usage PROPERTIES PASS_REGULAR_EXPRESSION &amp;#34;Usage:.*number&amp;#34; )# define a function to simplify adding tests function(do_test target arg result) add_test(NAME Comp${arg} COMMAND ${target} ${arg}) set_tests_properties(Comp${arg} PROPERTIES PASS_REGULAR_EXPRESSION ${result} )endfunction(do_test)# do a bunch of result based tests do_test(project01 4 &amp;#34;4 is 2&amp;#34;)do_test(project01 9 &amp;#34;9 is 3&amp;#34;)do_test(project01 5 &amp;#34;5 is 2.236&amp;#34;)do_test(project01 7 &amp;#34;7 is 2.645&amp;#34;)do_test(project01 25 &amp;#34;25 is 5&amp;#34;)do_test(project01 -25 &amp;#34;-25 is [-nan|nan|0]&amp;#34;)do_test(project01 0.0001 &amp;#34;0.0001 is 0.01&amp;#34;)   enable_testing()å¯ç”¨æµ‹è¯•åŠŸèƒ½ã€‚ add_test()æ·»åŠ æµ‹è¯•ï¼š
line4æ·»åŠ äº†ä¸€ä¸ªæµ‹è¯•ã€‚NAME åé¢æ˜¯å®šä¹‰æµ‹è¯•çš„åå­—ï¼Œå¯ä»¥éšä¾¿èµ·åï¼Œä½†æ˜¯æµ‹è¯•åä¸å¯é‡å¤ï¼Œå¿…é¡»æ˜¯å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæµ‹è¯•ï¼›COMMANDåé¢æ¥æ‰§è¡Œçš„å‘½ä»¤ä»¥åŠå‚æ•°ã€‚ set_tests_properties()ä¸ºæµ‹è¯•æ·»åŠ å±æ€§ï¼š
line8ä¸ºåä¸º Usageçš„æµ‹è¯•æ·»åŠ äº†ä¸€æ¡å±æ€§PASS_REGULAR_EXPRESSIONï¼Œä»¥åŠå±æ€§å€¼&amp;quot;Usage:.*number&amp;quot;ã€‚ä»å±æ€§çš„åå­—æ¥çœ‹ï¼ŒåŠŸèƒ½æ˜¯åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦é€šè¿‡ï¼Œå› æ­¤å¯¹äºline7æ·»åŠ çš„æµ‹è¯•ï¼Œå½“å®ƒçš„è¾“å‡ºå¯ä»¥ä¸&amp;quot;Usage:.*number&amp;quot;åŒ¹é…æ—¶ï¼Œä¼šæ˜¾ç¤ºPASSã€‚ function()ä»¥åŠendfunction()å®šä¹‰äº†å‡½æ•°:
line13å¼€å§‹å‡½æ•°å®šä¹‰do_testå¹¶å£°æ˜äº†å‚æ•°ï¼Œline14-17æ˜¯å‡½æ•°å†…å®¹ï¼Œline18ç»“æŸå‡½æ•°å®šä¹‰å¹¶å‘½åå‡½æ•°ä¸º do_testï¼Œéšåçš„line20åˆ™è°ƒç”¨äº†å‡½æ•° do_testã€‚do_testå‡½æ•°ä¸­ï¼Œæ·»åŠ äº†åä¸ºCompXXç³»åˆ—çš„æµ‹è¯•ï¼Œå¹¶å°†æµ‹è¯•ç»“æœä¸ resultå‚æ•°è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚  é‡æ–°ç¼–è¯‘é¡¹ç›®æ–‡ä»¶ã€‚
ä½¿ç”¨å‘½ä»¤ctest -NæŸ¥çœ‹å°†ä¼šæ‰§è¡Œå“ªäº›å‘½ä»¤ï¼Œåªæ˜¯åˆ—å‡ºå¯ä»¥æ‰§è¡Œçš„æµ‹è¯•é¡¹ï¼Œä½†ä¸ä¼šæ‰§è¡Œæµ‹è¯•ã€‚
ctest -VVæ‰§è¡Œæµ‹è¯•ï¼Œå¹¶ä¸”è¾“å‡ºè¾ƒä¸ºå®Œæ•´çš„æµ‹è¯•ä¿¡æ¯ï¼ˆEnable more verbose output from tests.ï¼‰ã€‚ä½¿ç”¨multi-config generatorsï¼Œæ¯”å¦‚Visual Studioï¼Œéœ€è¦æŒ‡å®šconfigurationï¼Œåœ¨buildç›®å½•ä¸‹ä½¿ç”¨ctest -C Debug -VVè¿›è¡Œæµ‹è¯•ã€‚
Step5ï¼šæ·»åŠ System Introspection é€šè¿‡æ£€æŸ¥å½“å‰çš„å¹³å°ç³»ç»Ÿï¼Œå€ŸåŠ©ä¹‹å‰çš„å¯é€‰å‚æ•°æ¥æ§åˆ¶ç¼–è¯‘çš„é…ç½®é¡¹ã€‚
å‡å®šä»¥ä¸‹çš„æƒ…å½¢ï¼š
æˆ‘ä»¬çš„mysqrt()å‡½æ•°éœ€è¦logã€expå‡½æ•°åšä¸€äº›äº‹æƒ…ï¼Œä½†æ˜¯ä¸ç¡®å®šç³»ç»Ÿæ”¯ä¸æ”¯æŒï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä»£ç ä»¥åŠcmakeçš„é…ç½®ï¼Œä»¥ä¾¿é€‚åº”ä¸åŒæƒ…å†µã€‚
  é¦–å…ˆï¼Œä¿®æ”¹mysqrt()å‡½æ•°ï¼Œæ·»åŠ logç›¸å…³çš„æ“ä½œï¼Œå¹¶ä¸”é€šè¿‡å®å®šä¹‰æ¥åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦æ”¯æŒlogç­‰å‡½æ•°ã€‚
1#include &amp;lt;iostream&amp;gt;2#include &amp;lt;cmath&amp;gt;3 4// a hack square root calculation using simple operations 5double mysqrt(double x) 6{ 7 if (x &amp;lt;= 0) { 8 return 0; 9 } 10 double result = x; 11 // do ten iterations 12 for (int i = 0; i &amp;lt; 10; &#43;&#43;i) { 13 if (result &amp;lt;= 0) { 14 result = 0.1; 15 } 16 double delta = x - (result * result); 17 result = result &#43; 0.5 * delta / result; 18 std::cout &amp;lt;&amp;lt; &amp;#34;Computing sqrt of &amp;#34; &amp;lt;&amp;lt; x &amp;lt;&amp;lt; &amp;#34; to be &amp;#34; &amp;lt;&amp;lt; result &amp;lt;&amp;lt; std::endl; 19 } 20 21#if defined(HAVE_LOG) &amp;amp;&amp;amp; defined(HAVE_EXP) 22 double result2 = exp(log(x) * 0.5); 23 std::cout &amp;lt;&amp;lt; &amp;#34;Computing sqrt of &amp;#34; &amp;lt;&amp;lt; x &amp;lt;&amp;lt; &amp;#34; to be &amp;#34; &amp;lt;&amp;lt; result 24 &amp;lt;&amp;lt; &amp;#34; using log and exp&amp;#34; &amp;lt;&amp;lt; std::endl; 25#else 26 double result2 = x; 27#endif 28 29 return result2; 30}   ç„¶åï¼Œå€ŸåŠ©CheckSymbolExsitsæ¨¡å—æ¥è¿›è¡Œæ£€æŸ¥ï¼Œè‹¥ä¸æ”¯æŒåˆ™å°è¯•åœ¨ m åº“ä¸­è·å–è¿™ä¸¤ä¸ªå‡½æ•°å¹¶é“¾æ¥ã€‚
ä¿®æ”¹MathFunctions/CMakeLists.txtï¼Œæ·»åŠ ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13  include(CheckSymbolExists)check_symbol_exists(log &amp;#34;math.h&amp;#34; HAVE_LOG)check_symbol_exists(exp &amp;#34;math.h&amp;#34; HAVE_EXP)if(NOT (HAVE_LOG AND HAVE_EXP)) unset(HAVE_LOG CACHE) unset(HAVE_EXP CACHE) set(CMAKE_REQUIRED_LIBRARIES &amp;#34;m&amp;#34;) check_symbol_exists(log &amp;#34;math.h&amp;#34; HAVE_LOG) check_symbol_exists(exp &amp;#34;math.h&amp;#34; HAVE_EXP) if(HAVE_LOG AND HAVE_EXP) target_link_libraries(MyFunctions PRIVATE m) endif()endif()    å¦‚æœç³»ç»Ÿä¸­æ”¯æŒï¼Œé‚£ä¹ˆå°±æ·»åŠ å®å®šä¹‰ï¼Œä½¿ä»£ç ç”Ÿæ•ˆï¼š
ä¿®æ”¹MathFunctions/CMakeLists.txtï¼Œæ·»åŠ ï¼š
1 2 3 4  if(HAVE_LOG AND HAVE_EXP) target_compile_definitions(MathFunctions PRIVATE &amp;#34;HAVE_LOG&amp;#34; &amp;#34;HAVE_EXP&amp;#34;)endif()  target_compile_definitions()ä¸ºtargetæ·»åŠ ç¼–è¯‘å®šä¹‰ï¼Œæ•ˆæœçœ‹èµ·æ¥å°±æ˜¯mysqrt()ä¸­çš„#if defined(HAVE_LOG) &amp;amp;&amp;amp; defined(HAVE_EXP)ç»“æœä¸ºtrueäº†ã€‚è¿™é‡Œçš„targetï¼Œæ˜¯ç”±add_executable()oradd_library()ç»™å®šçš„ã€‚
  æœ€åç¼–è¯‘çœ‹çœ‹ç»“æœã€‚
  Step6ï¼šæ·»åŠ Custom Commandï¼Œç”Ÿæˆæ–‡ä»¶ åˆ é™¤*Step5*æ‰€åšçš„ä¿®æ”¹ï¼Œè¿™æ¬¡æ˜¯æ–°çš„éœ€æ±‚äº†ã€‚
æ–°éœ€æ±‚ï¼šé€šè¿‡ç”Ÿæˆæ–°æ–‡ä»¶å‘mysqrtä¼ é€’æ•°æ®ã€‚å…·ä½“è€Œè¨€ï¼ŒStep6é€šè¿‡ä¸€ä¸ªç¼–è¯‘å¯æ‰§è¡Œç¨‹åºMakeTableï¼Œå¹¶æ‰§è¡Œï¼Œåœ¨é¡¹ç›®ä¸­ç”Ÿæˆä¸€ä¸ªTable.hæ–‡ä»¶ã€‚ç„¶åï¼ŒTable.hä½œä¸ºæºæ–‡ä»¶å‚ä¸ project01 çš„ç¼–è¯‘ã€‚    æ·»åŠ MathFunctions/MakeTable.cppï¼ŒåŠŸèƒ½æ˜¯å‘æ–‡ä»¶ä¸­å†™å…¥ä»£ç ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  // A simple program that builds a sqrt table #include &amp;lt;cmath&amp;gt;#include &amp;lt;fstream&amp;gt;#include &amp;lt;iostream&amp;gt; int main(int argc, char* argv[]) { // make sure we have enough arguments  if (argc &amp;lt; 2) { return 1; } std::ofstream fout(argv[1], std::ios_base::out); const bool fileOpen = fout.is_open(); if (fileOpen) { fout &amp;lt;&amp;lt; &amp;#34;double sqrtTable[] = {&amp;#34; &amp;lt;&amp;lt; std::endl; for (int i = 0; i &amp;lt; 10; &#43;&#43;i) { fout &amp;lt;&amp;lt; sqrt(static_cast&amp;lt;double&amp;gt;(i)) &amp;lt;&amp;lt; &amp;#34;,&amp;#34; &amp;lt;&amp;lt; std::endl; } // close the table with a zero  fout &amp;lt;&amp;lt; &amp;#34;0};&amp;#34; &amp;lt;&amp;lt; std::endl; fout.close(); } return fileOpen ? 0 : 1; // return 0 if wrote the file }     åœ¨MathFunctions/CMakeLists.txtä¸­æ·»åŠ å‘½ä»¤ï¼Œå°†MakeTable.cppç¼–è¯‘å¹¶è¿è¡Œï¼Œå¹¶ä¸”è¿™ä¸ªè¿‡ç¨‹æ˜¯æ•´ä¸ªproject01ç¼–è¯‘è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚
1 2 3 4 5 6  add_executable(MakeTable MakeTable.cpp)add_custom_command( OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/Table.h COMMAND MakeTable ${CMAKE_CURRENT_BINARY_DIR}/Table.h DEPENDS MakeTable )    ä¿®æ”¹MathFunctions/mysqrt.cppï¼Œä½¿ç”¨Table.hä¸­å®šä¹‰çš„double sqrtTable[]å˜é‡ï¼š
1#include &amp;lt;iostream&amp;gt;2#include &amp;#34;MathFunctions.h&amp;#34;3 4// include the generated table 5#include &amp;#34;Table.h&amp;#34;6 7// a hack square root calculation using simple operations 8double mysqrt(double x) 9{ 10 if (x &amp;lt;= 0) { 11 return 0; 12 } 13 14 // use the table to help find an initial value 15 double result = x; 16 if (x &amp;gt;= 1 &amp;amp;&amp;amp; x &amp;lt; 10) { 17 std::cout &amp;lt;&amp;lt; &amp;#34;Use the table to help find an initial value &amp;#34; &amp;lt;&amp;lt; std::endl; 18 result = sqrtTable[static_cast&amp;lt;int&amp;gt;(x)]; 19 } 20 21 // do ten iterations 22 for (int i = 0; i &amp;lt; 10; &#43;&#43;i) { 23 if (result &amp;lt;= 0) { 24 result = 0.1; 25 } 26 double delta = x - (result * result); 27 result = result &#43; 0.5 * delta / result; 28 std::cout &amp;lt;&amp;lt; &amp;#34;Computing sqrt of &amp;#34; &amp;lt;&amp;lt; x &amp;lt;&amp;lt; &amp;#34; to be &amp;#34; &amp;lt;&amp;lt; result &amp;lt;&amp;lt; std::endl; 29 } 30 31 return result; 32}   æ­¤å¤–ï¼Œä¿®æ”¹MathFunctions/CMakeLists.txtä½¿mysqrt.cppèƒ½æ‰¾åˆ°Table.hæ–‡ä»¶ã€‚
  1 2 3 4 5 6  add_library(MyFunctions mysqrt.cpp ${CMAKE_CURRENT_BINARY_DIR}/Table.h)target_include_directories(MyFunctions INTERFACE ${CMAKE_CURRENT_SOURCE_DIR} PRIVATE ${CMAKE_CURRENT_BINARY_DIR} )  ç¼–è¯‘é¡¹ç›®åï¼Œå¯ä»¥å‘ç°å¤šäº†ä¸€ä¸ªTable.hï¼Œå¹¶ä¸”mysqrtæ‰§è¡Œæ— è¯¯ã€‚
Step7ï¼šæ‰“åŒ…å¯æ‰§è¡Œæ–‡ä»¶ ä¿®æ”¹é¡¶å±‚çš„CMakeLists.txtï¼š
1 2 3 4  include(InstallRequiredSystemLibraries)set(CPACK_PACKAGE_VERSION_MAJOR &amp;#34;${project001_VERSION_MAJOR}&amp;#34;)set(CPACK_PACKAGE_VERSION_MINOR &amp;#34;${project001_VERSION_MINOR}&amp;#34;)include(CPack)  ç…§å¸¸ç¼–è¯‘é¡¹ç›®ï¼Œä½¿ç”¨cpackæ‰“åŒ…ï¼š
1  cpack -C Debug -G ZIP   æ‰“åŒ…åå¾—åˆ°ä¸€ä¸ª.zipæ–‡ä»¶ï¼Œå…¶ä¸­ï¼Œbinç›®å½•ä¸‹å¯ä»¥æ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚
Step8ï¼šæ·»åŠ Testing Dashboard ç•¥
Step9ï¼šé€‰æ‹©é™æ€åº“æˆ–åŠ¨æ€åº“ ä½¿ç”¨BUILD_SHARED_LIBSå˜é‡æ§åˆ¶add_library()çš„è¡Œä¸ºã€‚
ä¸»ç¨‹åºé“¾æ¥ MyFunctions åº“ï¼Œ MyFunctions é“¾æ¥ SqrtLibrary åº“ã€‚
  åœ¨é¡¶å±‚CMakeLists.txtä¸­æ·»åŠ BUILD_SHARED_LIBSå˜é‡ï¼Œä½¿ç”¨option()å‘½ä»¤æ‰‹åŠ¨æ§åˆ¶å˜é‡çš„å€¼ä¸ºONæˆ–OFFï¼›åˆ é™¤USE_MYMATHå˜é‡ï¼Œå°†å®ƒç§»åŠ¨åˆ°MathFuntionså±‚æ¬¡ä¸‹ã€‚
1cmake_minimum_required(VERSION 3.0.0)23project(project001 VERSION 0.1)45# specify the C&#43;&#43; standard 6set(CMAKE_CXX_STANDARD 11)7set(CMAKE_CXX_STANDARD_REQUIRED True)89option(USE_MYMATH &amp;#34;use tutorial provided math implementation?&amp;#34; ON)1011# è®¾ç½®é™æ€åº“ã€åŠ¨æ€åº“ç¼–è¯‘è¾“å‡ºçš„è·¯å¾„ï¼Œæ–¹ä¾¿ä¹‹åè¿è¡Œå¯æ‰§è¡Œç¨‹åº 12set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY &amp;#34;${PROJECT_BINARY_DIR}&amp;#34;)13set(CMAKE_LIBRARY_OUTPUT_DIRECTORY &amp;#34;${PROJECT_BINARY_DIR}&amp;#34;)14set(CMAKE_RUNTIME_OUTPUT_DIRECTORY &amp;#34;${PROJECT_BINARY_DIR}&amp;#34;)1516option(BUILD_SHARED_LIBS &amp;#34;Build using shared libraries&amp;#34; ON)1718configure_file(tutorial.h.in tutorial.h)19# æ·»åŠ ç›®å½• 20add_subdirectory(MathFunctions)2122add_executable(project01 tutorial.cpp)23# é“¾æ¥MyFunctionsåº“ 24target_link_libraries(project01 PUBLIC MyFunctions)25target_include_directories(project01 PUBLIC 26 &amp;#34;${PROJECT_BINARY_DIR}&amp;#34; 27 )  ä¿®æ”¹MathFunctions/CMakeLists.txtï¼Œæ·»åŠ SqrtLibraryåº“ï¼Œå¹¶ä¸”ä½¿ç”¨ USE_MYMATHå˜é‡æ§åˆ¶ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„å‡½æ•°ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49  # add the library that runs add_library(MyFunctions MathFunctions.cpp)# å£°æ˜é“¾æ¥åˆ°æ­¤åº“éœ€è¦includeçš„ç›®å½•ï¼Œä»¥ä¾¿æ£€ç´¢å¤´æ–‡ä»¶ target_include_directories(MyFunctions INTERFACE ${CMAKE_CURRENT_SOURCE_DIR} )# æ§åˆ¶å˜é‡ option(USE_MYMATH &amp;#34;Use tutorial provided math implementation&amp;#34; ON)if(USE_MYMATH) # å®šä¹‰å®  target_compile_definitions(MyFunctions PRIVATE &amp;#34;USE_MYMATH&amp;#34;) # æ·»åŠ å¯æ‰§è¡Œç¨‹åºï¼Œç”¨æ¥ç”ŸæˆTable.h  add_executable(MakeTable MakeTable.cpp) # ä½¿ç”¨å‘½ä»¤ç”ŸæˆTable.h  add_custom_command( OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/Table.h COMMAND MakeTable ${CMAKE_CURRENT_BINARY_DIR}/Table.h DEPENDS MakeTable ) # æ˜¾å¼æ·»åŠ é™æ€åº“  add_library(SqrtLibrary STATIC mysqrt.cpp ${CMAKE_CURRENT_BINARY_DIR}/Table.h ) # state that we depend on our binary dir to find Table.h  target_include_directories(SqrtLibrary PRIVATE ${CMAKE_CURRENT_BINARY_DIR} ) target_link_libraries(MyFunctions PRIVATE SqrtLibrary)endif()# define the symbol stating we are using the declspec(dllexport) when # building on windows target_compile_definitions(MyFunctions PRIVATE &amp;#34;EXPORTING_MYMATH&amp;#34;)# install rules set(installable_libs MyFunctions)if(TARGET SqrtLibrary) list(APPEND installable_libs SqrtLibrary)endif()install(TARGETS ${installable_libs} DESTINATION lib)install(FILES MathFunctions.h DESTINATION include)  ä¸åŒäºStep2ï¼Œè¿™é‡Œä½¿ç”¨target_compile_definitionsé…åˆif()ï¼Œå®ç°ä¸#cmakedefineçš„ç›¸åŒçš„æ•ˆæœã€‚
åŒæ—¶ï¼Œä¿®æ”¹MathFunctionsç›®å½•ä¸‹çš„å†…å®¹ï¼Œæ·»åŠ ç›¸åº”æ–‡ä»¶ï¼Œä½¿ç”¨å‘½åç©ºé—´åŒºåˆ†ä¸åŒåº“ä¸­çš„sqrtï¼š
  æ·»åŠ MathFuntions\MathFuntions.cppï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  #include &amp;#34;MathFunctions.h&amp;#34; #include &amp;lt;cmath&amp;gt; #ifdef USE_MYMATH #include &amp;#34;mysqrt.h&amp;#34;#endif  namespace mathfunctions { double sqrt(double x) { #ifdef USE_MYMATH  return detail::mysqrt(x); #else  return std::sqrt(x); #endif  } }     æ·»åŠ MathFuntions\mysqrt.hï¼š
1 2 3 4 5 6 7  namespace mathfunctions { namespace detail { double mysqrt(double x); } }     ä¿®æ”¹MathFuntions\mysqrt.cppï¼Œè¡¥ä¸Šå‘½åç©ºé—´çš„ä»£ç ã€‚
  ä¿®æ”¹MathFuntions\MathFuntions.hï¼Œæ·»åŠ åŠ¨æ€åº“çš„å£°æ˜ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14  #if defined(_WIN32) #if defined(EXPORTING_MYMATH) #define DECLSPEC __declspec(dllexport) #else #define DECLSPEC __declspec(dllimport) #endif #else // non windows #define DECLSPEC #endif  namespace mathfunctions { double DECLSPEC sqrt(double x); }       æ”¹åŠ¨ä¹‹åï¼Œç›¸å½“äºç”± MyFunctions æ ¹æ®ä¸åŒæƒ…å†µé€‰æ‹©ä¸åŒçš„sqrt()ï¼Œå› æ­¤ä¿®æ”¹tutorial.cppä¸­çš„å†…å®¹ï¼Œåˆ æ‰USE_MYMATHç›¸å…³çš„æ§åˆ¶ï¼Œä½¿ç”¨MathFunctions\MathFunctions.hå£°æ˜çš„å‡½æ•°æ›¿æ¢æ‰mysqrt()ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  #include &amp;lt;math.h&amp;gt;#include &amp;lt;iostream&amp;gt;#include &amp;lt;string&amp;gt;#include &amp;#34;tutorial.h&amp;#34; #include &amp;#34;MathFunctions.h&amp;#34; int main(int argc, char *argv[]) { if (argc &amp;lt; 2) { // report version  std::cout &amp;lt;&amp;lt; argv[0] &amp;lt;&amp;lt; &amp;#34; Version &amp;#34; &amp;lt;&amp;lt; Tutorial_VERSION_MAJOR &amp;lt;&amp;lt; &amp;#34;.&amp;#34; &amp;lt;&amp;lt; Tutorial_VERSION_MINOR &amp;lt;&amp;lt; std::endl; std::cout &amp;lt;&amp;lt; &amp;#34;Usage: &amp;#34; &amp;lt;&amp;lt; argv[0] &amp;lt;&amp;lt; &amp;#34; number&amp;#34; &amp;lt;&amp;lt; std::endl; return 1; } // convert input to double  const double inputValue = std::stod(argv[1]); const double outputValue = mathfunctions::sqrt(inputValue); std::cout &amp;lt;&amp;lt; &amp;#34;The square root of &amp;#34; &amp;lt;&amp;lt; inputValue &amp;lt;&amp;lt; &amp;#34; is &amp;#34; &amp;lt;&amp;lt; outputValue &amp;lt;&amp;lt; std::endl; return 0; }     ç¼–è¯‘é¡¹ç›®ï¼Œå¯ä»¥å¾—åˆ°build\Debug\MyFunctions.dllæ–‡ä»¶ï¼Œè€Œ SqrtLibrary ä¸ºé™æ€åº“ã€‚
Exercise  We modified MathFunctions.h to use dll export defines. Using CMake documentation can you find a helper module to simplify this?  Step10ï¼šç”Ÿæˆè¡¨è¾¾å¼ generator expressions  interface library
åˆ›å»ºä¸€ä¸ªæ¥å£åº“
1  add_library(&amp;lt;name&amp;gt; INTERFACE [IMPORTED [GLOBAL]])  è¿™ç±»åº“æœ‰å±æ€§ï¼Œèƒ½install()ï¼Œ export å’Œ imported ï¼Œä½†å¯èƒ½æ²¡æœ‰buildè¿‡ç¨‹ã€‚åƒçº¯å¤´æ–‡ä»¶åº“æˆ–å®Œå…¨é’ˆå¯¹targetçš„è®¾è®¡ã€‚2
 Step11ï¼šAdding Export Configuration æ·»åŠ å¯¼å‡ºé…ç½®ï¼Œè®©å…¶ä»–é¡¹ç›®å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„é¡¹ç›®ã€‚
  é¦–å…ˆï¼Œæ›´æ–°install(TARGETS)ï¼Œæ·»åŠ  EXPORT ã€‚ EXPORT å…³é”®å­—çš„ä½œç”¨æ˜¯ç”Ÿæˆå¹¶å®‰è£…ä¸€ä¸ªCMakeæ–‡ä»¶ï¼Œç”¨ä»¥å¯¼å…¥å®‰è£…å‘½ä»¤æ‰€éœ€çš„å…¨éƒ¨ TARGET ã€‚
ä¿®æ”¹MathFunctions\CMakeLists.txtï¼š
1 2 3 4  install(TARGETS ${installable_libs} DESTINATION lib EXPORT MathFunctionsTargets )  æ­¤å¤–ï¼Œä¿®æ”¹é¡¶å±‚CMakeLists.txtï¼Œæ˜¾å¼åœ°å®‰è£…ç”Ÿæˆçš„.cmakeæ–‡ä»¶ï¼š
1 2 3 4  install(EXPORT MathFunctionsTargets FILE MathFunctionsTargets.cmake DESTINATION lib/cmake/MathFunctions )  æ­¤æ—¶ï¼Œç¼–è¯‘å¹¶å®‰è£…é¡¹ç›®é¡¹ç›®ï¼š
1 2  cmake --build ./ --config Release cmake --install . --prefix &amp;#34;../install/&amp;#34;   åœ¨../install/lib/cmake/MathFunctionsä¸­å¯ä»¥æŸ¥çœ‹åˆ°ç”Ÿæˆçš„.cmakeæ–‡ä»¶ã€‚
å®˜ç½‘æåˆ°çš„ç¼–è¯‘é—®é¢˜ï¼Œæˆ‘æ²¡æœ‰é‡åˆ°ã€‚
å…¶è§£å†³æ–¹æ³•æ˜¯ï¼Œä¿®æ”¹target_include_directories()ï¼Œåˆ©ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼æ·»åŠ é€‚å½“çš„INTERFACEè·¯å¾„ï¼š
1 2 3 4 5  target_include_directories(MathFunctions INTERFACE $&amp;lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}&amp;gt; $&amp;lt;INSTALL_INTERFACE:include&amp;gt; )    è‡³æ­¤ï¼Œtargetä¿¡æ¯éƒ½å·²æ‰“åŒ…å®Œæ¯•ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ä¸€äº›é…ç½®ï¼Œä½¿å¾—CMake çš„find_package()æŒ‡ä»¤å¯ä»¥æ‰¾åˆ°å·²ç»å‡†å¤‡å¥½çš„é¡¹ç›®ã€‚
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ·»åŠ Config.cmake.inæ–‡ä»¶ï¼š
1 2  @PACKAGE_INIT@ include ( &amp;#34;${CMAKE_CURRENT_LIST_DIR}/MathFunctionsTargets.cmake&amp;#34;     ä¸ºäº†æ­£ç¡®åœ°é…ç½®å®‰è£…ç”Ÿæˆçš„æ–‡ä»¶ï¼Œåœ¨é¡¶å±‚CMakeLists.txtä¸­æ·»åŠ å¦‚ä¸‹å‘½ä»¤ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  # å‰å‡ æ­¥å·²ç»é…ç½®äº† install(EXPORT MathFunctionsTargets FILE MathFunctionsTargets.cmake DESTINATION lib/cmake/MathFunctions )include(CMakePackageConfigHelpers)# generate the config file that is includes the exports configure_package_config_file(${CMAKE_CURRENT_SOURCE_DIR}/Config.cmake.in &amp;#34;${CMAKE_CURRENT_BINARY_DIR}/MathFunctionsConfig.cmake&amp;#34; INSTALL_DESTINATION &amp;#34;lib/cmake/example&amp;#34; NO_SET_AND_CHECK_MACRO NO_CHECK_REQUIRED_COMPONENTS_MACRO )# generate the version file for the config file write_basic_package_version_file( &amp;#34;${CMAKE_CURRENT_BINARY_DIR}/MathFunctionsConfigVersion.cmake&amp;#34; VERSION &amp;#34;${Tutorial_VERSION_MAJOR}.${Tutorial_VERSION_MINOR}&amp;#34; COMPATIBILITY AnyNewerVersion )# install the configuration file install(FILES ${CMAKE_CURRENT_BINARY_DIR}/MathFunctionsConfig.cmake ${CMAKE_CURRENT_BINARY_DIR}/MathFunctionsConfigVersion.cmake DESTINATION lib/cmake/MathFunctions )  è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»ä¸ºé¡¹ç›®ç”Ÿæˆäº†å¯é‡å®šä½çš„çš„CMakeé…ç½®ã€‚æ­¤åï¼Œåªè¦é¡¹ç›®å·²å®‰è£…æˆ–æ‰“åŒ…ï¼Œå°±å¯ä»¥è¢«ä½¿ç”¨ã€‚
è‹¥å¸Œæœ›é¡¹ç›®å¯ä»¥åœ¨æ„å»ºç›®å½•ä¸­è¢«ä½¿ç”¨ï¼Œåˆ™å¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„CMakeLists.txtæœ«å°¾æ·»åŠ å¦‚ä¸‹æŒ‡ä»¤ï¼š
1 2 3  export(EXPORT MathFunctionsTargets FILE &amp;#34;${CMAKE_CURRENT_BINARY_DIR}/MathFunctionsTargets.cmake&amp;#34; )  æ­¤æ—¶ï¼Œåœ¨buildç›®å½•ä¸‹ï¼Œç”Ÿæˆäº†MathFunctionsTargets.cmakeï¼Œå…è®¸æ„å»ºç›®å½•ä¸­çš„MathFunctionsConfig.cmakeé…ç½®ä¾›å…¶ä»–é¡¹ç›®ä½¿ç”¨ï¼Œè€Œæ— éœ€installã€‚
   ä½œè€…ï¼šä»™äººæŒD é“¾æ¥ï¼šhttps://www.jianshu.com/p/f0f71d36411a&amp;#160;&amp;#x21a9;&amp;#xfe0e;
 https://blog.csdn.net/LaineGates/article/details/108242803&amp;#160;&amp;#x21a9;&amp;#xfe0e;
   </content>
    </entry>
    
     <entry>
        <title>[C&amp;C&#43;&#43;]Autoå…³é”®å­—</title>
        <url>https://litmingc.github.io/post/cc&#43;&#43;/base-autotype/</url>
        <categories>
          <category>C&amp;C&#43;&#43;</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> autoå…³é”®å­—ä¸»è¦åŠŸèƒ½ä¸ºç±»å‹æ¨å¯¼ã€‚
 åŸºæœ¬ç”¨æ³• 1 2 3 4 5  int a=10; auto x=a; // xçš„ç±»å‹ä¸ºint auto *x=&amp;amp;a; // xçš„ç±»å‹ä¸ºint* auto x=&amp;amp;a; // xçš„ç±»å‹ä¸ºint* auto&amp;amp; x=a; // xçš„ç±»å‹ä¸ºint&amp;amp;    å»é™¤orä¿æŒconstè¯­ä¹‰ï¼ˆvolatileç›¸åŒï¼‰  å»é™¤const 1 2 3  const int a=10; auto x=a; // xçš„ç±»å‹ä¸ºintï¼Œå¯ä»¥ä¿®æ”¹xçš„å€¼   æ­¤æ—¶ï¼Œxæ˜¯ä¸€ä¸ªæ–°çš„intå˜é‡ã€‚
 ä¿æŒconst 1 2 3  const int a=10; auto&amp;amp; x=a; // xçš„ç±»å‹æ˜¯const int&amp;amp;ï¼Œä¿æŒconstï¼Œä¸å¯ä»¥ä¿®æ”¹x   æ­¤æ—¶ï¼Œxæ˜¯açš„ä¸€ä¸ªå¼•ç”¨ã€‚&amp;amp;xä¸&amp;amp;açš„å€¼ä¸€æ ·ã€‚
   å¯¹æ•°ç»„åšæ¨æ–­   æŒ‡é’ˆç±»å‹
1 2 3 4  int a[3] = {1,2,3}; auto x=a; cout &amp;lt;&amp;lt; typeid(x).name(); // è¾“å‡ºç±»å‹ï¼š int *   xä¸ºæŒ‡é’ˆç±»å‹ï¼ŒæŒ‡å‘açš„é¦–åœ°å€ã€‚
  æ•°ç»„ç±»å‹
1 2 3 4  int a[3] = {1,2,3}; auto&amp;amp; x=a; cout &amp;lt;&amp;lt; typeid(x).name(); // è¾“å‡ºç±»å‹ï¼šint [3]   xä¸ºæ•°ç»„ç±»å‹ï¼Œå¯ä»¥ç”¨sizeof()è®¡ç®—æ•°ç»„å¤§å°ã€‚
ä¸ä½¿ç”¨autoå£°æ˜æ•°ç»„çš„å¼•ç”¨   int a[3] = {1,2,3};int (&amp;amp;x)[3] = a;      è¿ç»­çš„æ¨å¯¼
autoçš„æ¨å¯¼ç»“æœåº”å½“æ˜¯å‰åä¸€è‡´çš„ã€‚ 1 2 3  int a=10; auto *x=&amp;amp;a, y=20; // æ­£ç¡® auto *x=&amp;amp;a, y=3.0; // ç¼–è¯‘å¤±è´¥     </content>
    </entry>
    
     <entry>
        <title>[C&amp;C&#43;&#43;]åŸºç¡€è¯­æ³•å°è®°</title>
        <url>https://litmingc.github.io/post/cc&#43;&#43;/base/</url>
        <categories>
          <category>C&amp;C&#43;&#43;</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> ä¸€äº›è¯­æ³• const  å¯ä»¥ç”¨éå¸¸é‡å¼•ç”¨åˆå§‹åŒ–å¸¸é‡å¼•ç”¨ï¼Œåä¹‹ä¸è¡Œã€‚  å®  å®ä¸­çš„ç‰¹æ®Šç¬¦å·#ã€@ã€##ï¼š 1 2 3  #define Conn(x,y) x##y #define ToChar(x) #@x #define ToString(x) #x   ##è¡¨ç¤ºè¿æ¥ï¼Œint n = Conn(123,456);ç»“æœå°±æ˜¯n=123456;ã€‚
#@è¡¨ç¤ºç»™xåŠ ä¸Šå•å¼•å·ï¼Œç»“æœè¿”å›æ˜¯ä¸€ä¸ªconst charã€‚
#è¡¨ç¤ºåŠ ä¸ŠåŒå¼•å·ã€‚
  å¼•ç”¨ å¼•ç”¨vsæŒ‡é’ˆï¼š
 ä¸å­˜åœ¨ç©ºå¼•ç”¨ å¼•ç”¨åªèƒ½åˆå§‹åŒ–ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä¸å¯æ›´æ”¹ å¼•ç”¨åˆ›å»ºæ—¶å¿…é¡»åˆå§‹åŒ–  åˆ›å»ºå¼•ç”¨ï¼š
1 2  int i = 17; int&amp;amp; r = i;   r æ˜¯ä¸€ä¸ªåˆå§‹åŒ–ä¸º i çš„æ•´å‹å¼•ç”¨
Lambda å‡½æ•°ä¸è¡¨è¾¾å¼ åŸºç¡€è¯­æ³•ï¼š
[capture](parameters)-&amp;gt;return-type{body}
 [capture]ä¸ºæ•è·åˆ—è¡¨ï¼Œå¯ä»¥æ˜¯lambdaå‡½æ•°å¤–é¢çš„å˜é‡åˆ—è¡¨ï¼Œç›¸å½“äºå‡½æ•°è°ƒç”¨æ—¶çš„ä¼ å‚ã€‚ (parameters)ç­‰ï¼Œå’Œæ™®é€šå‡½æ•°å®šä¹‰æ²¡æœ‰ä¸åŒï¼Œåˆ†åˆ«æ˜¯å‚æ•°åˆ—è¡¨ã€è¿”å›ç±»å‹å’Œå‡½æ•°ä½“ã€‚ å‡½æ•°ä½“æ˜¯å¿…é¡»çš„ï¼Œå…¶å®ƒéƒ¨åˆ†å¯ä»¥ä¸ºç©ºæˆ–çœç•¥ï¼Œä¾‹å¦‚ï¼š 1 2 3  auto f = []{return 42;} []mutable{ &#43;&#43;global_x; } // æ— è¿”å›å€¼     ä½¿ç”¨æ•è·åˆ—è¡¨ä¼ å‚ï¼š
 æ•è·åˆ—è¡¨ä»…ç”¨äºå±€éƒ¨éstaticå˜é‡ å˜é‡æ•è·ç±»ä¼¼äºå‚æ•°ä¼ é€’ï¼Œæœ‰å€¼ä¼ é€’ã€å¼•ç”¨ä¼ é€’ï¼š 1 2 3 4 5 6 7 8 9  // [capture](parameters)-&amp;gt;return-type{body} [] // æ²’æœ‰å®šä¹‰ä»»ä½•å˜é‡ã€‚ä½¿ç”¨æœªå®šä¹‰å˜é‡ä¼šå¼•å‘é”™è¯¯ã€‚ [x, &amp;amp;y] // xä»¥ä¼ å€¼æ–¹å¼ä¼ å…¥ï¼ˆé»˜è®¤ï¼‰ï¼Œyä»¥å¼•ç”¨æ–¹å¼ä¼ å…¥ã€‚ [&amp;amp;] // ä»»ä½•è¢«ä½¿ç”¨åˆ°çš„å¤–éƒ¨å˜é‡éƒ½éšå¼åœ°ä»¥å¼•ç”¨æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚ [=] // ä»»ä½•è¢«ä½¿ç”¨åˆ°çš„å¤–éƒ¨å˜é‡éƒ½éšå¼åœ°ä»¥ä¼ å€¼æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚ [&amp;amp;, x] // xæ˜¾å¼åœ°ä»¥ä¼ å€¼æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚å…¶ä½™å˜é‡ä»¥å¼•ç”¨æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚ [=, &amp;amp;z] // zæ˜¾å¼åœ°ä»¥å¼•ç”¨æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚å…¶ä½™å˜é‡ä»¥ä¼ å€¼æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚  [this]() { this-&amp;gt;someFunc(); }();   å€¼æ•è·æ–¹å¼ä¸­ï¼Œè¢«æ•è·å˜é‡å¿…é¡»æ˜¯å¯æ‹·è´çš„ï¼Œä¸”è¢«æ•è·å˜é‡çš„å€¼æ˜¯lambdaåˆ›å»ºæ—¶æ‹·è´ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œå€¼æ•è·çš„å˜é‡åœ¨lambdaä¸­ä¸ä¼šæ”¹å˜å€¼ã€‚
  å†…è”å‡½æ•° ä¸€ä¸ª C/C&#43;&#43; ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥è®¤ä¸ºæ˜¯å¤šä¸ªå‡½æ•°ä¹‹é—´çš„ç›¸äº’è°ƒç”¨è¿‡ç¨‹ã€‚
ä½†æ˜¯ï¼Œå‡½æ•°è°ƒç”¨æ˜¯æœ‰æ—¶é—´å’Œç©ºé—´å¼€é”€çš„ã€‚
ä¸ºäº†æ¶ˆé™¤å‡½æ•°è°ƒç”¨çš„æ—¶ç©ºå¼€é”€ï¼ŒC&#43;&#43; æä¾›ä¸€ç§æé«˜æ•ˆç‡çš„æ–¹æ³•ï¼Œå³åœ¨ç¼–è¯‘æ—¶å°†å‡½æ•°è°ƒç”¨å¤„ç”¨å‡½æ•°ä½“æ›¿æ¢ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„å®å±•å¼€ã€‚
ğŸŒ°  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  #include &amp;lt;iostream&amp;gt;using namespace std; //å†…è”å‡½æ•°ï¼Œäº¤æ¢ä¸¤ä¸ªæ•°çš„å€¼ inline void swap(int *a, int *b){ int temp; temp = *a; *a = *b; *b = temp; } int main(){ int m, n; cin&amp;gt;&amp;gt;m&amp;gt;&amp;gt;n; cout&amp;lt;&amp;lt;m&amp;lt;&amp;lt;&amp;#34;, &amp;#34;&amp;lt;&amp;lt;n&amp;lt;&amp;lt;endl; swap(&amp;amp;m, &amp;amp;n); cout&amp;lt;&amp;lt;m&amp;lt;&amp;lt;&amp;#34;, &amp;#34;&amp;lt;&amp;lt;n&amp;lt;&amp;lt;endl; return 0; }   ç¼–è¯‘mainçš„æ—¶ä»£ç æ›¿æ¢ä¸ºï¼š
1 2 3 4 5 6 7 8 9 10 11  int main(){ int m, n; cin&amp;gt;&amp;gt;m&amp;gt;&amp;gt;n; cout&amp;lt;&amp;lt;m&amp;lt;&amp;lt;&amp;#34;, &amp;#34;&amp;lt;&amp;lt;n&amp;lt;&amp;lt;endl; int temp; temp = *(&amp;amp;m); *(&amp;amp;m) = *(&amp;amp;n); *(&amp;amp;n) = temp; cout&amp;lt;&amp;lt;m&amp;lt;&amp;lt;&amp;#34;, &amp;#34;&amp;lt;&amp;lt;n&amp;lt;&amp;lt;endl; return 0; }    
é¢å‘å¯¹è±¡ æˆå‘˜å®šä¹‰
1 2 3 4 5 6 7 8 9 10 11 12 13  class Box{ public: int x; void setX(int tmp); // å£°æ˜ } // å®šä¹‰ void Box::setX(int tmp){ x = tmp; } int main(){ return 0; }   æ„é€ å‡½æ•°&amp;amp;ææ„å‡½æ•°
æ„é€ å‡½æ•°ï¼šç±»åˆ›å»ºå¯¹è±¡æ—¶æ‰§è¡Œ
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  class Box{ public: int x; Box(int tmp); // å£°æ˜  ~Box() } // å®šä¹‰ Box::Box(int tmp){ x = tmp; } Box::~Box(void){ } int main(){ Box box(3); return 0; }   ç»§æ‰¿æ„é€ å‡½æ•°
1 2 3 4  å­ç±»æ„é€ å‡½æ•°(...):åŸºç±»æ„é€ å‡½æ•°(...) { }   æ‹·è´æ„é€ å‡½æ•°
1 2 3  classname(const classname &amp;amp;obj){ // æ„é€ å‡½æ•°ä¸»ä½“ }   å®ä¾‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  class Box{ public: int x; Box(int tmp); // å£°æ˜  Box(const Box &amp;amp;obj); ~Box() } // å®šä¹‰ Box::Box(int tmp){ x = tmp; } Box::Box(const Box &amp;amp;obj){ } int main(){ Box box(3); return 0; }   å‹å…ƒå‡½æ•°&amp;amp;å‹å…ƒç±» å‹å…ƒå‡½æ•°ä¸æ˜¯ç±»çš„æˆå‘˜ï¼Œä½†æ˜¯å¯ä»¥è®¿é—®ç±»çš„privatedã€protectedæˆå‘˜ã€‚
å‹å…ƒå‡½æ•°æ²¡æœ‰ this æŒ‡é’ˆã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  class Box{ double width; public: friend void printWidth( Box box ); void setWidth( double wid ); }; // æˆå‘˜å‡½æ•°å®šä¹‰ void Box::setWidth( double wid ){ width = wid; } // è¯·æ³¨æ„ï¼šprintWidth() ä¸æ˜¯ä»»ä½•ç±»çš„æˆå‘˜å‡½æ•° void printWidth( Box box ){ /* å› ä¸º printWidth() æ˜¯ Box çš„å‹å…ƒï¼Œå®ƒå¯ä»¥ç›´æ¥è®¿é—®è¯¥ç±»çš„ä»»ä½•æˆå‘˜ */ cout &amp;lt;&amp;lt; &amp;#34;Width of box : &amp;#34; &amp;lt;&amp;lt; box.width &amp;lt;&amp;lt;endl; } // ç¨‹åºçš„ä¸»å‡½æ•° int main( ){ Box box; // ä½¿ç”¨æˆå‘˜å‡½æ•°è®¾ç½®å®½åº¦  box.setWidth(10.0); // ä½¿ç”¨å‹å…ƒå‡½æ•°è¾“å‡ºå®½åº¦  printWidth( box ); return 0; }   ç±»çš„é™æ€æˆå‘˜ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ static å…³é”®å­—æ¥æŠŠç±»æˆå‘˜å®šä¹‰ä¸ºé™æ€çš„ã€‚å½“æˆ‘ä»¬å£°æ˜ç±»çš„æˆå‘˜ä¸ºé™æ€æ—¶ï¼Œè¿™æ„å‘³ç€æ— è®ºåˆ›å»ºå¤šå°‘ä¸ªç±»çš„å¯¹è±¡ï¼Œé™æ€æˆå‘˜éƒ½åªæœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚ é™æ€æˆå‘˜å‡½æ•°å³ä½¿åœ¨ç±»å¯¹è±¡ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ä¹Ÿèƒ½è¢«è°ƒç”¨ã€‚
é™æ€æˆå‘˜å‡½æ•°æœ‰ä¸€ä¸ªç±»èŒƒå›´ï¼Œä»–ä»¬ä¸èƒ½è®¿é—®ç±»çš„ this æŒ‡é’ˆã€‚æ‚¨å¯ä»¥ä½¿ç”¨é™æ€æˆå‘˜å‡½æ•°æ¥åˆ¤æ–­ç±»çš„æŸäº›å¯¹è±¡æ˜¯å¦å·²è¢«åˆ›å»ºã€‚
å¤šç»§æ‰¿ 1 2 3 4  class &amp;lt;æ´¾ç”Ÿç±»å&amp;gt;:&amp;lt;ç»§æ‰¿æ–¹å¼1&amp;gt;&amp;lt;åŸºç±»å1&amp;gt;,&amp;lt;ç»§æ‰¿æ–¹å¼2&amp;gt;&amp;lt;åŸºç±»å2&amp;gt;,â€¦ { &amp;lt;æ´¾ç”Ÿç±»ç±»ä½“&amp;gt; };   ç»§æ‰¿æ–¹å¼ï¼Œå³è®¿é—®ä¿®é¥°ç¬¦ï¼š
publicç»§æ‰¿ï¼šåŸºç±»éç§æœ‰æˆå‘˜çš„è®¿é—®å±æ€§ä¸å˜
protectedç»§æ‰¿ï¼šåŸºç±»çš„publicæˆå‘˜å˜æˆproctecedæˆå‘˜
privateç»§æ‰¿ï¼šåŸºç±»çš„publicã€protectedæˆå‘˜å˜æˆprivateæˆå‘˜
å¤šæ€ å­ç±»é‡å†™çˆ¶ç±»çš„å‡½æ•°ï¼Œä¸åŒå­ç±»çš„å¯¹è±¡è°ƒç”¨å„è‡ªçš„å‡½æ•°
è™šå‡½æ•°
è‹¥ä¸ä½¿ç”¨è™šå‡½æ•°å®šä¹‰çˆ¶ç±»çš„å‡½æ•°ï¼Œå­ç±»çš„åŒåå‡½æ•°æ— æ³•ç”Ÿæ•ˆã€‚å› ä¸ºå‡½æ•°è°ƒç”¨åœ¨ç¨‹åºç¼–è¯‘æœŸé—´å°±å·²ç»è®¾ç½®å¥½äº†ï¼Œåˆç§°é™æ€é“¾æ¥ã€æ—©ç»‘å®šã€‚
ä½¿ç”¨virtualä¿®é¥°å‡½æ•°ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰åŸºç±»ä¸­å®šä¹‰çš„è™šå‡½æ•°æ—¶ï¼Œä¼šå‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦é™æ€é“¾æ¥åˆ°è¯¥å‡½æ•°ã€‚æˆ‘ä»¬æƒ³è¦çš„æ˜¯åœ¨ç¨‹åºä¸­ä»»æ„ç‚¹å¯ä»¥æ ¹æ®æ‰€è°ƒç”¨çš„å¯¹è±¡ç±»å‹æ¥é€‰æ‹©è°ƒç”¨çš„å‡½æ•°ï¼Œè¿™ç§æ“ä½œè¢«ç§°ä¸ºåŠ¨æ€é“¾æ¥ï¼Œæˆ–åæœŸç»‘å®šã€‚
çº¯è™šå‡½æ•°
1 2 3 4 5 6 7 8 9 10 11 12  class Shape { protected: int width, height; public: Shape( int a=0, int b=0) { width = a; height = b; } // pure virtual function  virtual int area() = 0; };   c&#43;&#43;æ¥å£ c&#43;&#43;ä½¿ç”¨æŠ½è±¡ç±»å®ç°æ¥å£
ç±»ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå‡½æ•°è¢«å£°æ˜ä¸ºçº¯è™šå‡½æ•°ï¼Œåˆ™è¿™ä¸ªç±»å°±æ˜¯æŠ½è±¡ç±»ã€‚
è™šå‡½æ•°æœªå®ç°æ—¶ï¼Œç¼–è¯‘ä¼šå‡ºé”™ã€‚
æ³›å‹ç¼–ç¨‹ c&#43;&#43;æ¨¡æ¿æ˜¯æ³›å‹ç¼–ç¨‹çš„åŸºç¡€ã€‚
å‡½æ•°æ¨¡æ¿
å½¢å¦‚ï¼š
template &amp;lt;typename type&amp;gt; ret-type func-name(parameter list){// å‡½æ•°çš„ä¸»ä½“}ä¾‹å¦‚ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  // function templates #include &amp;lt;iostream&amp;gt;using namespace std; template &amp;lt;class T, class U&amp;gt; bool are_equal (T a, U b) { return (a==b); } int main () { if (are_equal(10,10.0)) cout &amp;lt;&amp;lt; &amp;#34;x and y are equal\n&amp;#34;; else cout &amp;lt;&amp;lt; &amp;#34;x and y are not equal\n&amp;#34;; return 0; }   æ¨¡æ¿ä¸­é™¤äº†ä½¿ç”¨TæŒ‡ä»£æŸç§ç±»å‹ï¼Œè¿˜å¯ä»¥æŒ‡å®šå…·ä½“çš„å®ä¾‹ä½œä¸ºå‚æ•°ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14  // template arguments #include &amp;lt;iostream&amp;gt;using namespace std; template &amp;lt;class T, int N&amp;gt; T fixed_multiply (T val) { return val * N; } int main() { std::cout &amp;lt;&amp;lt; fixed_multiply&amp;lt;int,2&amp;gt;(10) &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; // 20  std::cout &amp;lt;&amp;lt; fixed_multiply&amp;lt;int,3&amp;gt;(10) &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;; // 30 }   ç±»æ¨¡æ¿ å½¢å¦‚ï¼š
template &amp;lt;class type&amp;gt; class class-name {}å¦‚ä½•ç†è§£å¤´æ–‡ä»¶ä¸cppæ–‡ä»¶çš„å…³ç³»ï¼Ÿ   ç¼–è¯‘è¿‡ç¨‹ä»¥Cæ–‡ä»¶ä¸ºå•ä½ï¼Œç¼–è¯‘Cæ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„å¤´æ–‡ä»¶è¢«é€’å½’å±•å¼€åˆ°Cæ–‡ä»¶ä¸­ã€‚
  ä½¿ç”¨ä»»ä½•å˜é‡ã€å‡½æ•°ä¹‹å‰ï¼Œå¿…é¡»è¦æœ‰å®ƒçš„å£°æ˜ã€å®šä¹‰ã€‚å£°æ˜æ˜¯ä¸ºäº†è®©ç¼–è¯‘å™¨çŸ¥é“å®ƒçš„å­˜åœ¨ï¼Œå› ä¸ºç¼–è¯‘è¿‡ç¨‹ä»¥Cæ–‡ä»¶ä¸ºå•ä½ï¼Œæ‰€ä»¥ å£°æ˜å¿…é¡»å‡ºç°åœ¨æ¯ä¸€ä¸ªéœ€è¦ä½¿ç”¨ä»–çš„æ–‡ä»¶ä¸­ã€‚å¤´æ–‡ä»¶å°±æ˜¯ä¸ºäº†æ–¹ä¾¿åœ°æ’å…¥å£°æ˜ã€‚
  </content>
    </entry>
    
     <entry>
        <title>[Unity]Learning Records (creat with code)</title>
        <url>https://litmingc.github.io/post/unity/learning-records/</url>
        <categories>
          <category>Unity</category><category>å­¦ä¹ ç¬”è®°</category>
        </categories>
        <tags>
          <tag>unity å­¦ä¹ </tag><tag>creat with code</tag><tag>unity 3d</tag>
        </tags>
        <content type="html"> æœ¬æ–‡ä¸ºè·Ÿéšunityåœ¨Bç«™çš„ç›´æ’­æ•™å­¦çš„å­¦ä¹ è®°å½•ã€‚
æ•™ç¨‹åœ°å€
lesson 1 å®ç°äº†ä¸€ä¸ªå°è½¦çš„å‰è¿›åŠè½¬å‘æ§åˆ¶ã€‚
æè¦ ç´ æå¯¼å…¥
åœ¨assetsåŒºåŸŸï¼Œå³å‡»é¼ æ ‡ã€‚é€‰æ‹©Import Package &amp;ndash;&amp;gt; Costum Package&amp;hellip;
ç‰©ä½“è§†è§’è°ƒæ•´ï¼š
é¼ æ ‡å³é”® &#43; wã€aã€sã€dã€qã€e &amp;mdash;-&amp;gt; wsadæ˜¯å‰åå·¦å³ï¼Œqeæ˜¯å‡é™è§†è§’ï¼›
é€‰ä¸­ç‰©ä½“ &#43; Alt &#43; é¼ æ ‡å·¦é”® &amp;mdash;-&amp;gt; ä»¥é€‰ä¸­ç‰©ä½“ä¸ºä¸­å¿ƒæ—‹è½¬è§†è§’ï¼›
é¼ æ ‡æ”¾åœ¨Sceneçª—å£ &#43; fé”® &amp;mdash;-&amp;gt; èšç„¦åˆ°å½“å‰é€‰ä¸­ç‰©ä½“
è„šæœ¬ä½œä¸ºç»„ä»¶æ·»åŠ åˆ°ç‰©ä½“ä¸Šã€‚
ç‰©ä½“çš„Transformç¼–è¾‘æ–¹æ³•ï¼š
transform.Translate();
transform.Rotate();
è¾“å…¥è¾“å‡ºçš„è·å–æ–¹æ³•ï¼š
Input.GetAxis()
è®¾ç½®å˜é‡
ä»£ç ä¸­çš„publicå˜é‡å¯ä»¥ç›´æ¥åœ¨unityç•Œé¢ä¿®æ”¹ã€‚
è¿‡ç¨‹ ç•¥è¿‡ç›¸å…³å®‰è£…è¿‡ç¨‹ã€‚
  æ‰“å¼€unity hubï¼Œæ–°å»ºé¡¹ç›®ã€‚
æ¨¡æ¿é€‰æ‹©3Dï¼Œç¼–è¾‘é¡¹ç›®åï¼Œé€‰æ‹©åˆ›å»ºåœ°å€ã€‚
  è®¤è¯†ç•Œé¢ã€‚
åŒºåŸŸ1é€‰æ‹©å„ä¸ªçª—å£çš„å¸ƒå±€ï¼ŒåŒºåŸŸ2ä¸ºé¡¹ç›®çš„èµ„æºçª—å£ã€‚
  å¯¼å…¥é¡¹ç›®èµ„æºã€‚ åœ¨assetsåŒºåŸŸï¼Œå³å‡»é¼ æ ‡ã€‚é€‰æ‹©Import Package &amp;ndash;&amp;gt; Costum Package&amp;hellip;ï¼Œå¯¼å…¥å®˜æ–¹çš„èµ„æº prototype1ã€‚
å¯¼å…¥èµ„æºä¹‹åï¼Œåœ¨Assets/Scenes/ç›®å½•ä¸‹å‡ºç°äº†ä¸€ä¸ªæ–°çš„åœºæ™¯Prototype 1ï¼ŒæŠŠé¡¹ç›®åŸå…ˆçš„ç©ºåœºæ™¯åˆ é™¤ã€‚
  åœºæ™¯ä¸­æ·»åŠ GameObject
åœ¨hierarchyçª—å£æ·»åŠ GameObjectï¼Œå¯ä»¥å°†Assets/ä¸­çš„å¯¹è±¡ç›´æ¥æ‹–æ”¾åˆ°Sceneä¸­ï¼Œä¹Ÿå¯ä»¥æ‹–åˆ°hierarchyçª—å£ã€‚
æŠŠå°è½¦ï¼ˆAssets/Course Library/Vehicles/Veh_Ute_Red_Z.prefabï¼‰å’Œéšœç¢ç‰©ï¼ˆAssets/Course Library/Obstacles/Crate_01.prefabï¼‰æ‹–åˆ°åœºæ™¯ä¸­ã€‚
  GameObjectä½ç½®çš„è°ƒæ•´
åœ¨Inspectorçª—å£ä¸­çš„Transformæ ‡ç­¾ä¸‹ï¼ŒPositionè°ƒæ•´ä¸‰ç»´ä½ç½®(è¿™äº›å­—ï¼ŒXã€Yã€Zç­‰ç­‰ï¼Œéƒ½æ˜¯å¯ä»¥æ‹–åŠ¨çš„)ï¼Œæˆ–è€…åœ¨Sceneçª—å£ä¸­æ‹–åŠ¨ç›¸åº”çš„ç®­å¤´ã€‚
ç‰©ä½“è§†è§’è°ƒæ•´ï¼š
é¼ æ ‡å³é”® &#43; wã€aã€sã€dã€qã€e &amp;mdash;-&amp;gt; wsadæ˜¯å‰åå·¦å³ï¼Œqeæ˜¯å‡é™è§†è§’ï¼›
é€‰ä¸­ç‰©ä½“ &#43; Alt &#43; é¼ æ ‡å·¦é”® &amp;mdash;-&amp;gt; ä»¥é€‰ä¸­ç‰©ä½“ä¸ºä¸­å¿ƒæ—‹è½¬è§†è§’ï¼›
é¼ æ ‡æ”¾åœ¨Sceneçª—å£ &#43; fé”® &amp;mdash;-&amp;gt; èšç„¦åˆ°å½“å‰é€‰ä¸­ç‰©ä½“
  æ‘„åƒæœºçš„è°ƒæ•´
ä¸‰ç»´åæ ‡çš„è°ƒæ•´ä¸ä¸Šä¸€éƒ¨åˆ†ç›¸åŒã€‚
ä½¿ç”¨Rotationè°ƒæ•´ç‰©ä½“çš„æ—‹è½¬ï¼ŒXè¡¨ç¤ºç»•ç€Xè½´è½¬åŠ¨ã€‚
åœ¨å¦‚å›¾æ‰€ç¤ºçš„å·¥å…·æ ä¸­é€‰æ‹©ç›¸åº”çš„å·¥å…·ï¼Œåœ¨Sceneçª—å£æ‹–åŠ¨è½´çº¿ä¹Ÿå¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚
  ä¸ºå¯¹è±¡æ·»åŠ è„šæœ¬
ä¹ æƒ¯ä¸Šï¼Œå…ˆåˆ›å»ºAssets/Scripts/ç›®å½•ï¼Œåœ¨æ­¤ç›®å½•ä¸‹æ–°å»ºc#è„šæœ¬PlyerController.csã€‚é€‰ä¸­å°è½¦ï¼ŒæŠŠè„šæœ¬PlyerController.csæ‹–åˆ°Inspectorçª—å£ä¸­ï¼Œæˆ–è€…ä½¿ç”¨Inspectorçª—å£æœ€ä¸‹é¢çš„Add ComponentåŠŸèƒ½æ·»åŠ è„šæœ¬ä¸ºç»„ä»¶ã€‚
ä¹‹åï¼ŒåŒå‡»è„šæœ¬å¯æ‰“å¼€ç¼–è¾‘å™¨ç¼–è¾‘è„šæœ¬ä»£ç ã€‚
è®¾ç½®ç¼–è¾‘å™¨ï¼š
èœå•æ é€‰æ‹©Edit&amp;ndash;&amp;gt;Preferences&amp;ndash;&amp;gt;External Toolsï¼Œåœ¨External Script Editorä¸­é€‰æ‹©ç›¸åº”çš„ç¼–è¾‘å™¨ã€‚
ä½¿ç”¨visual studioçš„è¯ï¼Œéœ€è¦åœ¨visual studioå®‰è£…unityçš„ç›¸åº”æ‹“å±•ã€‚è‹¥ä¸å®‰è£…æ‹“å±•ï¼Œæ‰“å¼€ä»£ç æ—¶ä¼šå‡ºç°ä¸å…¼å®¹çš„é—®é¢˜ã€‚ ä½¿ç”¨vscodeï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„éœ€è¦unityçš„ç›¸åº”æ’ä»¶ï¼ˆC#ã€Debugger for Unityã€Unity Toolã€Unity Code Snippetsï¼‰
  å†™ä»£ç äº†
å°è½¦çš„è„šæœ¬ä»£ç å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  using System.Collections; using System.Collections.Generic; using UnityEngine; public class PlayerController : MonoBehaviour { //å‰è¿›é€Ÿåº¦  public float speed; // ä½¿ç”¨publicåˆ™åœ¨unityç¼–è¾‘å™¨ä¸­å¯ä»¥ç›´è§‚åœ°è®¾ç½®speedå€¼  //è½¬å‘é€Ÿåº¦  public float turnspeed; //è·å–è¾“å…¥å‚æ•°  public float verticalInput; public float horizontalInput; // Update is called once per frame  void Update() { //è·å–è¾“å…¥  verticalInput = Input.GetAxis(&amp;#34;Vertical&amp;#34;); // å–å€¼ä¸º[-1,1]  horizontalInput = Input.GetAxis(&amp;#34;Horizontal&amp;#34;); //å‰è¿›ã€åé€€  transform.Translate(Vector3.forward * Time.deltaTime * speed * verticalInput); //è½¬å‘  transform.Rotate(Vector3.up,Time.deltaTime * turnspeed * horizontalInput); // ç»•ç€yè½´æ—‹è½¬  } }    ç±»ä¸­çš„publicå‚æ•°ï¼Œåœ¨ç‰©ä½“çš„Inspectorçª—å£çš„è„šæœ¬ç»„ä»¶ä¸‹å¯ä»¥ç›´æ¥è®¾ç½®å®ƒçš„å€¼ã€‚
 Input.GetAxis()è·å–è¾“å…¥ï¼Œå‚æ•°ç±»å‹ä¸ºstringï¼Œå–å€¼æ ¹æ®unityçš„è®¾ç½®å¡«å†™ã€‚unityä¸­é€‰æ‹©Edit&amp;ndash;&amp;gt;Project Setting&amp;ndash;&amp;gt;Input ManageræŸ¥çœ‹unityä¸­çš„è¾“å…¥æ–¹å¼çš„åç§°ã€‚æŒ‰é”®æœªæŒ‰ä¸‹æ—¶ï¼Œå…¶å€¼ä¸º0ï¼›æŒ‰ä¸‹æ—¶ï¼Œå–å€¼èŒƒå›´ä¸ºã€-1ï¼Œ1ã€‘ã€‚ Time.deltaTimeé¿å…ä¸åŒå¹³å°ä¸Šæ—¶é—´è®¡é‡çš„å·®å¼‚ transform.Translate()ï¼Œtransform.Rotate()æ§åˆ¶ç‰©ä½“çš„Transformå±æ€§å¯¹åº”çš„å€¼ã€‚  åˆ›å»ºå¦å¤–ä¸€ä¸ªè„šæœ¬CameraFollow.csæ·»åŠ åˆ°Main Cameraä¸­ï¼Œæ§åˆ¶æ‘„åƒå¤´è·Ÿéšå°è½¦ã€‚ä»£ç å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  using System.Collections; using System.Collections.Generic; using UnityEngine; public class CameraFollow : MonoBehaviour { public GameObject player; private Vector3 offset = new Vector3(0, 3.02f, -12.39f); // Start is called before the first frame update  void Start() { } // Update is called once per frame  void Update() { transform.position = player.transform.position &#43; offset; } }   è®¾ç½®Transformä½¿å¾—æ‘„åƒå¤´ä¸å°è½¦ä¿æŒç›¸å¯¹ä½ç½®ã€‚
å°†playerè®¾ç½®ä¸ºå°è½¦ï¼š
åœ¨unityç•Œé¢ä¸­ï¼Œå°†å°è½¦æ‹–åˆ°public GameObject player;çš„ä½ç½®ï¼Œä¸ºå…¶è®¾å€¼ä¸ºå°è½¦ã€‚
  æ·»åŠ ç‰©ç†æ•ˆæœ ä¸ºéšœç¢ç‰©ä»¥åŠå°è½¦æ·»åŠ åˆšä½“ï¼Œæ·»åŠ é‡åŠ›ã€‚   lesson 2 å°„å‡»&amp;amp;æ¶ˆé™¤
è¿‡ç¨‹   æ–°å»º3Dé¡¹ç›®ï¼Œå¯¼å…¥ç´ æã€Prototype_2ã€‘
  å‘åœºæ™¯ä¸­æ·»åŠ ç‰©ä½“ï¼Œä¸‰åªåŠ¨ç‰©ã€ä¸€åå†œå¤«ã€ä¸€ä¸ªé£Ÿç‰©ã€‚
è°ƒæ•´åŠ¨ç‰©çš„é¢å‘ï¼ˆtransform.rotationï¼‰ï¼Œé¢å‘å†œå¤«ã€‚
ä¸ºåŠ¨ç‰©ã€é£Ÿç‰©æ·»åŠ ç¢°æ’ä½“ï¼Œä¸ºé£Ÿç‰©æ·»åŠ åˆšä½“ï¼ˆå®ç°åŠ¨ç‰©ä¸é£Ÿç‰©ç¢°æ’ç›¸æ¶ˆçš„å‰æï¼Œä¸¤è€…éƒ½å¿…é¡»æœ‰ç¢°æ’ä½“ï¼Œä¸¤è€…è‡³å°‘æœ‰ä¸€ä¸ªæœ‰åˆšä½“ï¼‰ã€‚åŒæ—¶ï¼Œè°ƒæ•´ç¢°æ’ä½“è‡³åˆé€‚å¤§å°ï¼Œå–æ¶ˆé£Ÿç‰©åˆšä½“çš„é‡åŠ›æ•ˆæœï¼ˆä»¥é˜²å‘ä¸‹æ‰å‡ºåœ°é¢ï¼‰ã€‚
  å°†åŠ¨ç‰©ã€é£Ÿç‰©æ·»åŠ ä¸ºPrefabï¼ˆé¢„åˆ¶å»ºç­‘ã€é¢„åˆ¶ä½“ï¼‰
æ–°å»ºç›®å½•Assets/Prefabï¼ŒæŠŠåŠ¨ç‰©ã€é£Ÿç‰©æ‹–åˆ°ç›®å½•ä¸­ï¼Œå¹¶é€‰æ‹©original prefabã€‚
  ä¸ºç‰©ä½“æ·»åŠ è„šæœ¬
æ³¨æ„ï¼šç¼–è¾‘åœºæ™¯ä¸­çš„ç‰©ä½“å¹¶ä¸ä¼šæ”¹å˜é¢„åˆ¶ä½“ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ç¼–è¾‘Assetä¸­çš„é¢„åˆ¶ä½“ï¼›ä¹Ÿå¯ä»¥å…ˆç¼–å¥½è„šæœ¬å†æ·»åŠ é¢„åˆ¶ä½“ã€‚æ€»ä¹‹ï¼Œé¢„åˆ¶ä½“å’Œå·²æ·»åŠ çš„ç‰©ä½“ä¸æ˜¯åŒæ­¥çš„ã€‚
ä¸ºé£Ÿç‰©å’ŒåŠ¨ç‰©æ·»åŠ å‘å‰ç§»åŠ¨çš„è„šæœ¬ï¼Œå¹¶ä¸”ï¼Œç¢°æ’æ—¶é”€æ¯ç‰©ä½“ã€‚ä»£ç å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  using System.Collections; using System.Collections.Generic; using UnityEngine; public class MoveForward : MonoBehaviour { public float speed = 40f; // Update is called once per frame  void Update() { transform.Translate(Vector3.forward * speed * Time.deltaTime); if(transform.position.z &amp;gt; 40f || transform.position.z &amp;lt; -4f) Destroy(gameObject); } private void OnCollisionEnter(Collision other) { Destroy(gameObject); } }   publicå˜é‡ï¼Œå¯åœ¨unityä¸ºä¸åŒçš„åŠ¨ç‰©ã€é£Ÿç‰©è®¾ç½®ä¸åŒé€Ÿåº¦ï¼›
transform.Translate(Vector3.forward * speed * Time.deltaTime);æ²¿ç€å‘å‰çš„æ–¹å‘ç§»åŠ¨ï¼Œå³æ²¿Zè½´ç§»åŠ¨ï¼›
if(transform.position.z &amp;gt; 40f || transform.position.z &amp;lt; -4f) Destroy(gameObject);ç‰©ä½“ç§»åŠ¨åˆ°ä¸Šä¸‹è¾¹ç•Œä»¥å¤–çš„åœ°æ–¹æ—¶ï¼Œé”€æ¯è‡ªèº«ï¼ˆZè½´æ–¹å‘çš„è¾¹ç•Œï¼Œå³è§†è§’çš„ä¸Šä¸‹è¾¹ç•Œï¼‰ã€‚
private void OnCollisionEnter(Collision other){}ï¼Œè¿™ä¸ªæ–¹æ³•å‘ç”Ÿç¢°æ’æ—¶è§¦å‘ï¼Œå‚æ•°otherä¸ºç¢°æ’çš„å¦ä¸€æ–¹ã€‚
ä¸ºå†œå¤«åˆ›å»ºç§»åŠ¨è„šæœ¬ï¼Œå¹¶è®¾ç½®å‘å°„é£Ÿç‰©çš„åŠŸèƒ½ã€‚ä»£ç å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  using System.Collections; using System.Collections.Generic; using UnityEngine; public class PlayerController : MonoBehaviour { public float speed = 10f; private float HorizontalInput; public float HRange=16f; public GameObject ShootObjects; // Update is called once per frame  void Update() { // HorizontalInput = Input.GetAxis(&amp;#34;Horizontal&amp;#34;);  HorizontalInput = Input.GetAxisRaw(&amp;#34;Horizontal&amp;#34;); transform.Translate(Vector3.right * speed * Time.deltaTime * HorizontalInput); // é™åˆ¶ç§»åŠ¨èŒƒå›´  if(transform.position.x &amp;gt; HRange) transform.position = new Vector3(HRange,0,0); if(transform.position.x &amp;lt; -HRange) transform.position = new Vector3(-HRange,0,0); // ç©ºæ ¼æŒ‰é”®è§¦å‘  // å°„å‡»ï¼šç”Ÿæˆæ–°ç‰©ä½“  if(Input.GetKeyDown(KeyCode.Space)) Instantiate(ShootObjects, transform.position, ShootObjects.transform.rotation); } }   Input.GetAxisRaw(&amp;quot;Horizontal&amp;quot;)ï¼Œä¸Input.GetAxis()ä¸åŒã€‚GetAxisRawåœ¨æŒ‰é”®æŒ‰ä¸‹æ—¶ï¼Œå–å€¼ä¸º{-1,1}ï¼Œå®ƒçš„å€¼ç›´æ¥æ˜¯1æˆ–è€…-1ï¼›è€ŒGetAxisåˆ™æ˜¯æ¸å˜çš„ï¼Œä»0æ…¢æ…¢å˜åˆ°1æˆ–-1ã€‚å› æ­¤ä½¿ç”¨GetAxisRawæ—¶ï¼Œå†œå¤«ç§»åŠ¨çš„ååº”æ›´åŠæ—¶ã€‚
Instantiate(ShootObjects, transform.position, ShootObjects.transform.rotation);ï¼Œç”Ÿæˆæ–°ç‰©ä½“ï¼Œæœ‰å¤šä¸ªé‡è½½æ–¹æ³•ã€‚æ­¤å¤„è¡¨ç¤ºï¼Œåœ¨å†œå¤«çš„ä½ç½®ï¼Œä»¥ShootObjectsæœ¬èº«çš„é¢å‘ï¼Œç”ŸæˆShootObjectsã€‚
åœ¨Unityä¸­ï¼Œå°†é£Ÿç‰©çš„é¢„åˆ¶ä½“æ‹–åˆ°å˜é‡ShootObjectsä¸­å®Œæˆèµ‹å€¼ã€‚
  éšæœºç”ŸæˆåŠ¨ç‰©
å…ˆæ·»åŠ ä¸€ä¸ªç©ºçš„GameObjectï¼šåœ¨Hierarchyçª—å£çš„ç©ºç™½å¤„å³å‡»ï¼Œé€‰æ‹©Create Emptyï¼Œå¹¶å‘½åä¸ºéšä¾¿ä½ ï¼ˆSpawnManagerï¼‰ã€‚
ä¸ºSpawnManageræ·»åŠ ä¸€ä¸ªåŒåè„šæœ¬ï¼Œç”¨æ¥ç”ŸæˆåŠ¨ç‰©ã€‚ä»£ç å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  using System.Collections; using System.Collections.Generic; using UnityEngine; public class SpawnManager : MonoBehaviour { public GameObject[] animals; private int index=0; //ä¸Šä¸‹å·¦å³  public float[] Range={0f,0f,0f,0f}; // Start is called before the first frame update  void Start() { InvokeRepeating(nameof(SpawnAnimals), 2, 2); } // Update is called once per frame  void Update() { } void SpawnAnimals(){ float xpos = Random.Range(Range[2],Range[3]); index = Random.Range(0,animals.Length); Instantiate(animals[index], new Vector3(xpos, 0f, Range[0]), animals[index].transform.rotation); } }   public GameObject[] animals;ï¼Œè®¾ç½®åŠ¨ç‰©æ•°ç»„ï¼Œåœ¨Unityä¸­æ‹–åŠ¨åŠ¨ç‰©é¢„åˆ¶ä½“åˆ°å˜é‡ä¸Šè®¾ç½®å®ƒçš„å€¼ã€‚ç”±äºæ˜¯æ•°ç»„ï¼Œå…ˆç¼–è¾‘ä¸€ä¸‹å®ƒçš„å¤§å°ä¸º3ï¼Œå†æŠŠä¸åŒåŠ¨ç‰©çš„é¢„åˆ¶ä½“æ‹–åˆ°å„ä¸ªå…ƒç´ ä¸Šã€‚
void SpawnAnimals()æ–¹æ³•ï¼Œå®ç°éšæœºé€‰æ‹©åŠ¨ç‰©ç§ç±»ï¼ˆindexï¼‰ã€éšæœºç”Ÿæˆåˆ·æ–°ä½ç½®ï¼ˆXè½´éšæœºï¼ŒZè½´ä¸ºä¸Šè¾¹ç•Œï¼ŒYè½´ä¸ºåœ°é¢åæ ‡ï¼‰ã€‚ç”Ÿæˆçš„æ–¹æ³•å’Œå‘å°„ç‰©ShootObjectsä¸€æ ·ï¼Œç”Ÿæˆçš„æ—‹è½¬è§’åº¦ï¼ˆrotationï¼‰ï¼Œä¹Ÿå°±æ˜¯åŠ¨ç‰©çš„é¢å‘ï¼Œä½¿ç”¨é¢„åˆ¶ä½“æœ¬èº«çš„é¢å‘ã€‚
æ³¨æ„è®¾ç½®å¥½è¾¹ç•Œæ•°ç»„public float[] Range={0f,0f,0f,0f};ï¼Œä¾æ¬¡ä¸ºä¸Šä¸‹å·¦å³ã€‚
  æŠŠåœºæ™¯é‡Œçš„æ‚ç‰©æ¸…ç†ä¸€ä¸‹ï¼Œåªç•™ä¸‹å†œå¤«ã€‚å¯ä»¥å¼€å§‹æ¸¸æˆäº†ã€‚
  challenge 2 åœ¨ lesson 2 çš„åŸºç¡€ä¸Šï¼Œå¯¼å…¥æœ‰é”™è¯¯çš„æ–°åœºæ™¯ï¼Œå°†å®ƒä¿®æ”¹å®Œå–„ã€‚
åŸæ•ˆæœï¼š
å®Œæˆæ•ˆæœï¼š
éœ€è¦ä¿®æ”¹çš„å†…å®¹  äººç‰©åº”å½“å‘å°„ç‹—ï¼Œéšæœºæ‰è½çš„ç‰©ä½“åº”å½“æ˜¯çƒã€‚
è„šæœ¬å˜é‡çš„èµ‹å€¼æåäº†ã€‚ çƒè½åœ°æ¶ˆå¤±ï¼Œç‹—è·‘è¿œäº†åº”å½“æ¶ˆå¤±ï¼Œç‹—ã€çƒç›¸é‡è¦æ¶ˆå¤±ã€‚
DestroyOutOfBoundsXè„šæœ¬ä¸­çš„åˆ¤æ–­æ¡ä»¶ï¼Œä»¥åŠè¾¹ç•Œå¤§å°åšç›¸åº”çš„æ›´æ”¹ã€‚transform.positionçš„æ•°å€¼æ˜¯ä»¥å…¨å±€çš„åæ ‡å€¼ï¼Œä¸ªä½“çš„åæ ‡è½´ç”¨äºåˆ¤æ–­ä¸ªä½“çš„é¢å‘ï¼ˆå‰åå·¦å³ä¸Šä¸‹ï¼ŒZè½´è¡¨ç¤ºå‰åï¼‰ã€‚ çƒè½åœ°è¦æ˜¾ç¤ºâ€œGame Overï¼â€ã€‚
å®ç°æ–¹å¼å¤šç§å¤šæ ·ã€‚
æ­¤å¤„å€ŸåŠ©å·²å­˜åœ¨çš„private void OnTriggerEnter(){}æ–¹æ³•å®ç°è§¦å‘ã€‚
ä¸ºåœ°é¢è®¾ç½®ç¢°æ’ä½“ï¼Œå¹¶è®¾ç½®Tagä¸ºâ€œFinishâ€ã€‚
ä¿®æ”¹è„šæœ¬DetectCollisionsXçš„å†…å®¹ï¼Œå¦‚ä¸‹ï¼š 1 2 3 4 5 6 7  private void OnTriggerEnter(Collider other) { if(other.CompareTag(&amp;#34;Finish&amp;#34;)) Debug.Log(&amp;#34;Game Over!&amp;#34;); else Destroy(gameObject); }   Unityæ–‡æ¡£ä¸­ï¼Œå…³äºOnTriggerEnteræ–¹æ³•ï¼Œæœ‰å¦‚ä¸‹æè¿°ï¼š
 Note: Both GameObjects must contain a Collider component. One must have Collider.isTrigger enabled, and contain a Rigidbody. If both GameObjects have Collider.isTrigger enabled, no collision happens. The same applies when both GameObjects do not have a Rigidbody component.
è§¦å‘OnTriggerEnterçš„æ¡ä»¶ï¼Œéœ€è¦ç¢°æ’çš„åŒæ–¹å…·æœ‰ç¢°æ’ä½“ï¼Œè‡³å°‘æœ‰ä¸€æ–¹å…·æœ‰åˆšä½“ä¸”å‹¾é€‰Is Triggerã€‚
å¯ç”¨Is Triggerä»£è¡¨æ­¤åˆšä½“æœ‰å½¢æ— å®ï¼Œä¸ä¼šç¢°æ’ï¼Œæ‰€ä»¥å¦‚æœåŒæ–¹éƒ½å¯ç”¨Is Triggerï¼Œé‚£ä¹ˆä¸ä¼šç¢°æ’ï¼Œä½†ä¼šè§¦å‘OnTriggerEnteræ–¹æ³•ã€‚å¦‚æœåŒæ–¹éƒ½æ²¡æœ‰Is Triggerï¼Œä¸”æœ‰ä¸€æ–¹å…·æœ‰åˆšä½“ï¼Œåˆ™ç¢°æ’ã€‚
  éšæœºè½ä¸‹ä¸åŒç§ç±»çš„çƒä½“  lesson 3 ä¸€ä¸ªè·‘é…·æ¸¸æˆã€‚
æè¦ GetCompontes()é¡ºåºçš„é—®é¢˜ï¼Ÿ
è¿‡ç¨‹   æ·»åŠ äººç‰©ä¸ºplayerï¼Œæ§åˆ¶å…¶è·³è·ƒï¼›ä¸æ–­ç”Ÿæˆçš„éšœç¢ç‰©ï¼Œå‘playerç§»åŠ¨ï¼Œè¶…å‡ºè§†çº¿èŒƒå›´æ—¶é”€æ¯è‡ªèº«ã€‚
æ•ˆæœå¦‚ä¸‹ï¼š
éœ€è¦æ³¨æ„ï¼Œäººç‰©è·³è·ƒæ—¶ï¼Œä¸èƒ½è§¦å‘äºŒæ®µè·³ã€‚
ä¸ºéšœç¢ç‰©æ·»åŠ ç¢°æ’ä½“ï¼Œä¸ºäººç‰©æ·»åŠ ç¢°æ’ä½“ã€æ·»åŠ åˆšä½“ç»„ä»¶ä½¿å…¶å…·æœ‰ç‰©ä½“ç‰¹æ€§ï¼Œä½¿å¾—äººç‰©ä¸éšœç¢ç‰©å¯ä»¥äº§ç”Ÿç¢°æ’ã€‚
éšœç¢ç‰©çš„ç”Ÿæˆä¸ç§»åŠ¨çš„ä»£ç å’Œlesson1å‡ ä¹ä¸€è‡´ï¼Œç°ç»™å‡ºäººç‰©è„šæœ¬å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  using System.Collections; using System.Collections.Generic; using UnityEngine; public class PlayerController : MonoBehaviour { public float jumpForce; public float gravityModifier; private bool isGround; public bool isGameOver; // éœ€è¦publicï¼Œåé¢è¦ç”¨  private Rigidbody rb; private Animator anim; // Start is called before the first frame update  void Start() { rb = GetComponent&amp;lt;Rigidbody&amp;gt;(); anim = GetComponent&amp;lt;Animator&amp;gt;(); Physics.gravity *= gravityModifier; } // Update is called once per frame  void Update() { if(Input.GetKeyDown(KeyCode.Space) &amp;amp;&amp;amp; isGround){ rb.AddForce(Vector3.up * jumpForce, ForceMode.Impulse); isGround = false; } } private void OnCollisionEnter(Collision other) { if(other.gameObject.CompareTag(&amp;#34;Ground&amp;#34;)) isGround = true; } }   è·³è·ƒçš„å®ç°æ–¹æ³•ï¼š
è·³è·ƒæ—¶å¯¹äººç‰©æ·»åŠ å‘ä¸Šçš„åŠ›ã€‚é¦–å…ˆè·å–åˆšä½“ç»„ä»¶ï¼Œå®šä¹‰åˆšä½“ç»„ä»¶ä¸ºprivate Rigidbody rb;ï¼Œè·å–åˆšä½“ç»„ä»¶rb = GetComponent&amp;lt;Rigidbody&amp;gt;();ã€‚ç„¶åï¼Œè§¦å‘æŒ‰é”®æ—¶æ–½åŠ å†²å‡»åŠ›rb.AddForce(Vector3.up * jumpForce, ForceMode.Impulse);ï¼ˆè‹¥ä¸ä½¿ç”¨ForceMode.Impulseå†²å‡»ï¼Œåˆ™åªæœ‰ä¸€å¸§å—åŠ›ï¼Œè·³ä¸èµ·æ¥ï¼‰ã€‚æ­¤å¤–ï¼ŒPhysics.gravity *= gravityModifier;ä¿®æ”¹é‡åŠ›åŠ é€Ÿåº¦gï¼Œå½±å“äººç‰©ä¸‹è½é€Ÿåº¦ï¼ˆå‚è€ƒæ•°å€¼ï¼šjumpForce=30ï¼›gravityModifier=10ï¼‰ã€‚
ä¸ºäº†é¿å…ç¢°æ’æ—¶ï¼Œäººç‰©å€’ä¸‹ã€é¢å‘æ”¹å˜çš„é—®é¢˜ï¼Œåœ¨åˆšä½“ä¸­ï¼Œé”å®šå…¶æ—‹è½¬è§’åº¦ã€‚å¦‚å›¾ï¼š
  ç§»åŠ¨èƒŒæ™¯ï¼Œä½¿èƒŒæ™¯ä¸éšœç¢ç‰©ä¿æŒç›¸å¯¹é™æ­¢ã€‚
åœ¨èƒŒæ™¯ä¸Šï¼Œæ·»åŠ è„šæœ¬ï¼ˆMoveLeft.csï¼Œéšœç¢ç‰©ä¹Ÿä½¿ç”¨è¿™ä¸€è„šæœ¬ï¼‰æ§åˆ¶å…¶ç§»åŠ¨ã€‚ä¸éšœç¢ç‰©ä¸åŒçš„æ˜¯ï¼ŒèƒŒæ™¯æ˜¯ä¸€ä¸ªé‡å¤çš„ç”»é¢ã€‚å› æ­¤ï¼ŒèƒŒæ™¯ç§»åŠ¨ç­–ç•¥æ˜¯ç§»åŠ¨åŠä¸ªèƒŒæ™¯é•¿åº¦æ—¶ï¼ŒèƒŒæ™¯ä½ç½®å¤åŸã€‚
ä¸ºäº†é¿å…èƒŒæ™¯æ¶ˆå¤±ï¼Œåœ¨MoveLeft.csä¸­ï¼Œé”€æ¯ç‰©ä½“å‰åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦ä¸ºéšœç¢ç‰©ã€‚æˆ–è€…ï¼Œä½¿ç”¨å¦ä¸€ä¸ªè„šæœ¬ï¼ˆDestroyObstcale.csï¼‰æ¥å®ç°é”€æ¯ï¼Œå¹¶æ·»åŠ ç»™éšœç¢ç‰©ã€‚
ä¸ºäº†èƒŒæ™¯å¯ä»¥å¤ä½ï¼Œæ–°å»ºè„šæœ¬ç»„ä»¶BgRepeat.csæ§åˆ¶å…¶å¤ä½ï¼Œä»£ç å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  public class BgRepeat : MonoBehaviour { BoxCollider rb; float repeatWidth; // ä¸€åŠç¢°æ’ä½“é•¿åº¦ï¼ˆXè½´ï¼‰  Vector3 startPos; // è®°å½•èµ·å§‹ä½ç½®  // Start is called before the first frame update  void Start() { rb = GetComponent&amp;lt;BoxCollider&amp;gt;(); repeatWidth = rb.size.x / 2f; startPos = transform.position; } // Update is called once per frame  void Update() { if(transform.position.x &amp;lt; startPos.x - repeatWidth) transform.SetPositionAndRotation(startPos, transform.rotation); } }   æ•ˆæœå¦‚ä¸‹ï¼š
åœ°é¢æ˜¯çº¯è‰²ï¼Œä¸éœ€è¦ç§»åŠ¨ã€‚
  ä¸ºäººç‰©æ·»åŠ è·‘åŠ¨ã€è·³è·ƒåŠ¨ç”»ã€‚
é€‰ä¸­äººç‰©ï¼ŒåŒå‡»Animatorç»„ä»¶ä¸­çš„Controllerï¼Œå¦‚å›¾ï¼š
åœ¨æ‰“å¼€çš„åŠ¨ç”»ç•Œé¢ä¸­ï¼Œé€‰æ‹©Layers&amp;ndash;&amp;gt;Movementã€‚é€‰ä¸­â€œRun_Staticâ€ï¼Œå³å‡»ï¼Œå°†å…¶è®¾ç½®ä¸ºdefault stateï¼ˆEntryæŒ‡å‘å®ƒï¼‰ã€‚å¦‚å›¾ï¼š
åŒæ—¶ï¼Œé€‰ä¸­Parametersï¼Œè®¾ç½®Speed_fçš„å€¼ä¸º1.0ï¼ˆå¤§äº0.5ï¼‰ã€‚å¦‚å›¾ï¼š
æ­¤æ—¶ï¼Œè¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°äººç‰©è·‘åŠ¨èµ·æ¥äº†ã€‚ï¼ˆå¦‚æœäººç‰©è·‘åŠ¨çš„é€Ÿåº¦ä¸ç¯å¢ƒæ ¼æ ¼ä¸å…¥ï¼Œå¯ä»¥é€‚å½“è°ƒæ•´åŠ¨ç”»æ’­æ”¾é€Ÿåº¦ï¼‰
ä¸ºä»€ä¹ˆè®¾ç½®Speed_få¤§äº0.5ï¼Ÿ  é€‰ä¸­Run_StaticæŒ‡å‘Walk_Staticçš„çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°Conditionsæ˜¯Speed_få°äº0.5ï¼Œé‚£ä¹ˆåªè¦Speed_få¤§äº0.5ï¼ŒåŠ¨ç”»å°±ä¸ä¼šè½¬å˜ä¸ºèµ°è·¯ã€‚ä½ è¿˜å¯ä»¥çœ‹ä¸€ä¸‹å…¶ä»–çš„å˜åŒ–æ¡ä»¶ï¼Œå®ƒä»¬ä¹‹é—´éƒ½æ˜¯ä¸ä¼šå†²çªçš„ã€‚   æŸ¥çœ‹ä¸€ä¸‹Layersä¸­çš„Jumpingçš„æƒ…å†µï¼Œå‘ç°ä»Runåˆ°Running_Jumpå˜åŒ–çš„æ¡ä»¶æ˜¯Jump_trigï¼Œä¸”åœ¨Parametersä¸­æŸ¥åˆ°Jump_trigæ˜¯ä¸€ä¸ªè§¦å‘å˜é‡ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨è„šæœ¬ï¼ˆPlayControllerï¼‰æ§åˆ¶Jump_trigï¼Œåœ¨è·³è·ƒçš„æ¡ä»¶ä¸­åŠ å…¥Jump_trigçš„è§¦å‘:
1 2 3 4 5  if(Input.GetKeyDown(KeyCode.Space) &amp;amp;&amp;amp; isGround){ rb.AddForce(Vector3.up * jumpForce, ForceMode.Impulse); isGround = false; anim.SetTrigger(&amp;#34;Jump_trig&amp;#34;); }   è‡³æ­¤ï¼Œäººç‰©è·³è·ƒæ—¶å¯ä»¥è¡¨ç°å‡ºè·³è·ƒçš„åŠ¨ä½œã€‚ä½†æ˜¯ï¼Œåœ¨è·³è·ƒæ—¶ï¼Œäººç‰©çš„ä½ç½®ä¼šå‘å‰è¿›ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åœ¨åˆšä½“ä¸­é”å®špositionçš„xå€¼ã€‚
å®ç°æ•ˆæœå¦‚å›¾ï¼š
  äººç‰©ç¢°æ’åˆ°é˜»ç¢ç‰©æ—¶ï¼Œæ’­æ”¾æ­»äº¡åŠ¨ç”»ï¼ŒåŒæ—¶ç¯å¢ƒä¸å†ç§»åŠ¨ï¼Œä¸”éšœç¢ç‰©ä¸å†ç”Ÿæˆã€‚ æ’­æ”¾æ­»äº¡åŠ¨ç”»ä¸è·³è·ƒå¼‚æ›²åŒå·¥ã€‚å…ˆæŸ¥çœ‹å…¶æ¡ä»¶ï¼Œç„¶åä½¿ç”¨è„šæœ¬è®¾ç½®æ¡ä»¶ï¼ˆDeath_bä¸ºtrueï¼ŒDeathType_intä¸º1ï¼‰ï¼š
PlayerController.cs:
1 2 3 4 5 6  if(other.gameObject.CompareTag(&amp;#34;Obstacle&amp;#34;)){ isGameOver = true; Debug.Log(&amp;#34;GAME OVER!&amp;#34;); anim.SetBool(&amp;#34;Death_b&amp;#34;, true); anim.SetInteger(&amp;#34;DeathType_int&amp;#34;, 1); }   MoveLeft.cs:
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  using System.Collections; using System.Collections.Generic; using UnityEngine; public class MoveLeft : MonoBehaviour { public float speed=5f; private PlayerController playerController; // Start is called before the first frame update  void Start() { playerController = FindObjectOfType&amp;lt;PlayerController&amp;gt;(); } // Update is called once per frame  void Update() { if(!playerController.isGameOver) transform.Translate(Vector3.left * speed * Time.deltaTime); } }   SpawnObstacles.cs:
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  using System.Collections; using System.Collections.Generic; using UnityEngine; public class SpawnObstacles : MonoBehaviour { private PlayerController playerController; public GameObject[] obstacles; int index; public Vector3 spawnPosition; // Start is called before the first frame update  void Start() { InvokeRepeating(nameof(Spawn), 2f, 2f); playerController = FindObjectOfType&amp;lt;PlayerController&amp;gt;(); } // Update is called once per frame  void Update() { } void Spawn() { if (!playerController.isGameOver) { index = Random.Range(0, obstacles.Length); Instantiate(obstacles[index], spawnPosition, obstacles[index].transform.rotation); } } }   æ•ˆæœå¦‚å›¾ï¼š
  æ·»åŠ ç²’å­ç‰¹æ•ˆã€‚ æ•ˆæœå¦‚ä¸‹ï¼š
åœ¨Assets/Course Library/Particlesä¸­æœ‰ä¿©ä¸ªç²’å­ç‰¹æ•ˆï¼Œä¸€ä¸ªæ˜¯ç°å°˜çš„ç²’å­ï¼Œå¦ä¸€ä¸ªæ˜¯çˆ†ç‚¸çš„ç²’å­ã€‚
é¦–å…ˆï¼ŒæŠŠç²’å­æ‹–åˆ°Playerä¸Šï¼Œä½œä¸ºäººç‰©çš„å­é›†ï¼š
ç„¶åç”¨ä»£ç æ§åˆ¶ç²’å­çš„æ’­æ”¾ã€‚ç°å°˜ç²’å­æœ¬èº«å°±è®¾ç½®äº†å¾ªç¯æ’­æ”¾ï¼Œæ‰€ä»¥è¦æ§åˆ¶å…¶è·³è·ƒæ—¶åœæ­¢æ’­æ”¾ã€æ­»äº¡æ—¶ä¸å†æ’­æ”¾ï¼›çˆ†ç‚¸ç²’å­ä¸æ˜¯å¾ªç¯æ’­æ”¾çš„ï¼Œå¹¶ä¸”åœ¨æ¸¸æˆå¼€å§‹æ—¶æ²¡æœ‰æ’­æ”¾ï¼Œæ‰€ä»¥ç”¨è„šæœ¬æ§åˆ¶å…¶æ­»äº¡æ—¶æ’­æ”¾ã€‚ä»£ç å¦‚ä¸‹ï¼Œæ³¨æ„åœ¨Unityä¸­å¯¹ç²’å­å˜é‡èµ‹å€¼ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  using System.Collections; using System.Collections.Generic; using UnityEngine; public class PlayerController : MonoBehaviour { private Rigidbody rb; private Animator anim; public ParticleSystem dirtParticle, explosionParticle; public float jumpForce; public float gravityModifier; public bool isGround; public bool isGameOver; // Start is called before the first frame update  void Start() { rb = GetComponent&amp;lt;Rigidbody&amp;gt;(); anim = GetComponent&amp;lt;Animator&amp;gt;(); Physics.gravity *= gravityModifier; } // Update is called once per frame  void Update() { if(Input.GetKeyDown(KeyCode.Space) &amp;amp;&amp;amp; isGround){ rb.AddForce(Vector3.up * jumpForce, ForceMode.Impulse); isGround = false; anim.SetTrigger(&amp;#34;Jump_trig&amp;#34;); dirtParticle.Stop(); } } private void OnCollisionEnter(Collision other) { // isGameOverçš„åˆ¤æ–­ï¼Œé¿å…æ­»äº¡ä¸”ä¸åœ°é¢ç¢°æ’æ—¶çš„ç²’å­æ’­æ”¾  if(other.gameObject.CompareTag(&amp;#34;Ground&amp;#34;) &amp;amp;&amp;amp; (!isGameOver)){ isGround = true; dirtParticle.Play(); } if(other.gameObject.CompareTag(&amp;#34;Obstacle&amp;#34;)){ isGameOver = true; Debug.Log(&amp;#34;GAME OVER!&amp;#34;); anim.SetBool(&amp;#34;Death_b&amp;#34;, true); anim.SetInteger(&amp;#34;DeathType_int&amp;#34;, 1); explosionParticle.Play(); dirtParticle.Stop(); } } }     æ·»åŠ éŸ³æ•ˆã€‚
åœ¨MainCameraä¸­æœ‰AudioListenerç”¨äºæ”¶å£°ï¼Œç›¸å½“äºä½ çš„è€³æœµã€‚
é¦–å…ˆï¼Œåœ¨MainCameraä¸­æ·»åŠ AudioSourceå¹¶è®¾ç½®AudioClipä½œä¸ºéŸ³æºã€‚èƒŒæ™¯éŸ³è¦è®¾ç½®å¼€å§‹æ’­æ”¾ï¼Œè®¾ç½®å¾ªç¯æ’­æ”¾ï¼š
å…¶æ¬¡ï¼Œåœ¨Playerä¸­æ·»åŠ AudioSourceï¼Œä½†ä¸è¦è®¾ç½®AudioClipï¼Œå¹¶ä¸”å¼€å§‹æ—¶ä¸è¦æ’­æ”¾ï¼Œä¸è¦è®¾ç½®å¾ªç¯æ’­æ”¾ã€‚åœ¨è„šæœ¬ä¸­è®¾ç½®2ä¸ªAudioClipå˜é‡ï¼Œèµ‹å€¼ç¢°æ’ä»¥åŠè·³è·ƒçš„éŸ³æ•ˆï¼Œå¹¶æ§åˆ¶å•¥æ—¶å€™æ’­æ”¾å“ªä¸ªAudioClipï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53  using System.Collections; using System.Collections.Generic; using UnityEngine; public class PlayerController : MonoBehaviour { private Rigidbody rb; private Animator anim; private AudioSource audioSource; public ParticleSystem dirtParticle, explosionParticle; public AudioClip crashClip, jumpClip; public float jumpForce; public float gravityModifier; public bool isGround; public bool isGameOver; // Start is called before the first frame update  void Start() { rb = GetComponent&amp;lt;Rigidbody&amp;gt;(); anim = GetComponent&amp;lt;Animator&amp;gt;(); Physics.gravity *= gravityModifier; audioSource = GetComponent&amp;lt;AudioSource&amp;gt;(); } // Update is called once per frame  void Update() { if(Input.GetKeyDown(KeyCode.Space) &amp;amp;&amp;amp; isGround &amp;amp;&amp;amp; (!isGameOver)){ rb.AddForce(Vector3.up * jumpForce, ForceMode.Impulse); isGround = false; anim.SetTrigger(&amp;#34;Jump_trig&amp;#34;); dirtParticle.Stop(); audioSource.PlayOneShot(jumpClip, 0.5f); } } private void OnCollisionEnter(Collision other) { // isGameOverçš„åˆ¤æ–­ï¼Œé¿å…æ­»äº¡ä¸”ä¸åœ°é¢ç¢°æ’æ—¶çš„ç²’å­æ’­æ”¾  if(other.gameObject.CompareTag(&amp;#34;Ground&amp;#34;) &amp;amp;&amp;amp; (!isGameOver)){ isGround = true; dirtParticle.Play(); } if(other.gameObject.CompareTag(&amp;#34;Obstacle&amp;#34;)){ isGameOver = true; audioSource.PlayOneShot(crashClip, 1f); Debug.Log(&amp;#34;GAME OVER!&amp;#34;); anim.SetBool(&amp;#34;Death_b&amp;#34;, true); anim.SetInteger(&amp;#34;DeathType_int&amp;#34;, 1); explosionParticle.Play(); dirtParticle.Stop(); } } }   audioSource.PlayOneShot(jumpClip, 0.5f);è¡¨ç¤ºä»¥0.5çš„éŸ³é‡æ’­æ”¾jumpClipã€‚
  </content>
    </entry>
    
     <entry>
        <title>[Translation]Whoosh 2.7.4 Documentation</title>
        <url>https://litmingc.github.io/post/translation/whoosh/</url>
        <categories>
          <category>Translation</category><category>Python</category>
        </categories>
        <tags>
          <tag>whoosh</tag><tag>æ–‡æ¡£æ£€ç´¢</tag>
        </tags>
        <content type="html"> è‹±è¯­å°ç™½ï¼Œã€åŸæ–‡åœ°å€ã€‘ã€‚storeä¸çŸ¥é“æ€ä¹ˆç¿»è¯‘åˆé€‚ï¼Œå­˜å‚¨ï¼Ÿ
 Quick start  A quick introduction The Index and Schema objects The IndexWriter object The Searcher object   Designing a schema  About schemas and fields Built-in field types Creating a Schema Modifying the schema after indexing Dynamic fields Advanced schema setup  Field boosts Field types Formats Vectors     How to index documents  Creating an Index object Clearing the index Indexing documents Indexing and storing different values for the same field Finishing adding documents Merging segments Deleting documents Updating documents Incremental indexing Clearing the index   How to search  The Searcher object    Quick start whooshæ˜¯ä¸€ä¸ªä¸ºæ–‡æœ¬å»ºç«‹ç´¢å¼•å¹¶æœç´¢è¿™ä¸ªç´¢å¼•çš„æ–¹æ³•åº“å’Œç±»åº“ã€‚å®ƒå…è®¸ä½ é’ˆå¯¹è‡ªå·±çš„å†…å®¹å¼€å‘è‡ªå®šä¹‰çš„æœç´¢å¼•æ“ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨å»ºç«‹ä¸€ä¸ªåšå®¢å†™ä½œè½¯ä»¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨Whooshæ·»åŠ æœç´¢æ–¹æ³•ï¼Œè®©ç”¨æˆ·æœç´¢åšæ–‡ã€‚
A quick introduction 1 2 3 4 5 6 7 8 9 10 11 12 13  from whoosh.index import create_in from whoosh.fields import * schema = Schema(title=TEXT(stored=True), path=ID(stored=True), content=TEXT) ix = create_in(&amp;#34;indexdir&amp;#34;, schema) writer = ix.writer() writer.add_document(title=u&amp;#34;First document&amp;#34;, path=u&amp;#34;/a&amp;#34;,content=u&amp;#34;This is the first document we&amp;#39;ve added!&amp;#34;) writer.add_document(title=u&amp;#34;Second document&amp;#34;, path=u&amp;#34;/b&amp;#34;,content=u&amp;#34;The second one is even more interesting!&amp;#34;) writer.commit() from whoosh.qparser import QueryParser with ix.searcher() as searcher: query = QueryParser(&amp;#34;content&amp;#34;, ix.schema).parse(&amp;#34;first&amp;#34;) results = searcher.search(query) print(results[0])   è¾“å‡ºï¼š
{&amp;quot;title&amp;quot;: u&amp;quot;First document&amp;quot;, &amp;quot;path&amp;quot;: u&amp;quot;/a&amp;quot;}
The Index and Schema objects é¦–å…ˆï¼Œä½¿ç”¨whooshå‰ï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªç´¢å¼•ï¼ˆindexï¼‰å¯¹è±¡ï¼›
å…¶æ¬¡ï¼Œä½¿ç”¨indexå‰ï¼Œä½ å¿…é¡»å®šä¹‰å¥½indexçš„schema(ç»“æ„æ¨¡å¼)ã€‚
schemaåˆ—å‡ºäº†indexä¸­çš„å­—æ®µï¼ˆfieldï¼‰ã€‚ä¸€ä¸ªå­—æ®µï¼ˆfieldï¼‰å°±æ˜¯ç´¢å¼•ä¸­è®°å½•çš„æ–‡æ¡£çš„ä¸€é¡¹ä¿¡æ¯ã€‚fieldèƒ½å¤Ÿè¢«ç´¢å¼•(indexed)ï¼ˆå¯ä»¥æœç´¢fieldï¼‰ã€è¢«å­˜å‚¨(stored)ï¼ˆè¢«ç´¢å¼•çš„fieldçš„å€¼ä¼šå’Œç»“æœä¸€èµ·è¿”å›ï¼›åœ¨æ ‡é¢˜ç­‰å­—æ®µä¸­ï¼Œè¿™ä¸€ç‚¹å¾ˆæœ‰ç”¨ï¼‰ã€‚
ä¸‹é¢çš„schemaç¤ºä¾‹ä¸­æœ‰ä¸¤ä¸ªå­—æ®µï¼Œâ€œtitleâ€å’Œâ€œcontentâ€ï¼š
1 2  from whoosh.fields import Schema, TEXT schema = Schema(title=TEXT, content=TEXT)   åˆ›å»ºindexæ—¶ï¼Œä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ªschemaã€‚è¿™ä¸ªschemaå’Œindexæ·±åº¦ç»‘å®šã€‚
åˆ›å»ºschemaå¯¹è±¡æ—¶ï¼Œä½ ä½¿ç”¨å…³é”®å­—å‚æ•°æ¥æŠŠå­—æ®µåå’Œå­—æ®µç±»å‹ç»‘å®šåœ¨ä¸€èµ·ã€‚å­—æ®µåˆ—è¡¨ä»¥åŠä»–ä»¬çš„ç±»å‹å†³å®šäº†â€œå“ªäº›ä¼šè¢«ç´¢å¼•ï¼Œå“ªäº›èƒ½è¢«æ£€ç´¢â€ã€‚Whooshè‡ªå¸¦äº†ä¸€äº›éå¸¸æœ‰ç”¨çš„å­—æ®µç±»å‹ï¼Œå¹¶ä¸”ä½ ä¹Ÿå¯ä»¥è½»æ˜“çš„å®šä¹‰è‡ªå·±çš„ç±»å‹ã€‚
 whoosh.fields.ID
è¿™ç§ç±»å‹ç®€å•åœ°æŠŠæ•´ä¸ªå­—æ®µçš„å€¼ç´¢å¼•æˆä¸€ä¸ªå•å…ƒ(a single unitï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸ä¼šæŠŠå­—æ®µçš„å€¼åˆ‡åˆ†æˆå•ç‹¬çš„è¯è¯­)ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€‰æ‹©å­˜å‚¨è¿™ä¸ªå€¼ã€‚è¿™åœ¨è¯¸å¦‚æ–‡ä»¶è·¯å¾„ã€URLã€æ—¥æœŸä»¥åŠåˆ†ç±»ç­‰å­—æ®µä¸­å¾ˆæœ‰ç”¨ã€‚ whoosh.fields.STORED
ä½¿ç”¨è¿™ä¸ªç±»å‹çš„å­—æ®µä¼šè¢«å‚¨å­˜ä¸ºæ–‡æ¡£ï¼Œä½†æ˜¯ä¸ä¼šä¸ºå®ƒå»ºç«‹ç´¢å¼•ã€‚è¿™ä¸ªå­—æ®µç±»å‹ä¸ä¼šè¢«ç´¢å¼•ï¼Œä¹Ÿä¸å¯æœç´¢ã€‚å®ƒå¯ä»¥ç”¨åœ¨ä¸€äº›æ–‡æ¡£ä¿¡æ¯ä¸Šï¼Œè€Œä½ åªæ˜¯æƒ³æŠŠè¿™äº›æ–‡æ¡£ä¿¡æ¯å‘ˆç°åœ¨æœç´¢ç»“æœä¸­ã€‚ whoosh.fields.KEYWORD
è¿™ä¸ªç±»å‹æ˜¯ä¸ºé‚£äº›ç”¨ç©ºæ ¼å’Œé€—å·åˆ†éš”çš„å…³é”®å­—è®¾è®¡çš„ï¼Œå¯ä»¥è¢«ç´¢å¼•ã€è¢«æœç´¢ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å°†å…¶å­˜å‚¨ã€‚ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œè¿™ä¸ªç±»å‹çš„å­—æ®µçš„æœç´¢å¹¶ä¸å…è®¸éƒ¨åˆ†åŒ¹é…ï¼ˆphrase searchingï¼‰ã€‚ whoosh.fields.TEXT
è¿™æ˜¯ç”¨äºæ­£æ–‡çš„å­—æ®µç±»å‹ã€‚å®ƒä¸ºæ–‡æœ¬å»ºç«‹ç´¢å¼•ï¼ˆå¯é€‰æ‹©å­˜å‚¨ä¸å¦ï¼‰å¹¶ä¸”å‚¨å­˜è¯è¯­çš„ä½ç½®ç”¨äºç‰‡è¨€æœç´¢ï¼ˆphrase searchingï¼‰ whoosh.fields.NUMERIC
ç”¨äºæ•°å­—ï¼Œå¯ä»¥å­˜å‚¨æ•´å‹å’Œæµ®ç‚¹æ•°ã€‚ whoosh.fields.BOOLEAN
ç”¨äºå¸ƒå°”å€¼ï¼ˆtrueï¼Œfalseï¼‰ whoosh.fields.DATETIME
ç”¨äºdatatimeå¯¹è±¡ã€‚æ›´å¤šä¿¡æ¯å‚è§Indexing and parsing dates/times whoosh.fields.NGRAM å’Œ whoosh.fields.NGRAMWORDS
è¿™ä¸ªç±»å‹æŠŠå­—æ®µçš„æ–‡æœ¬ä»¥åŠå•ä¸ªçš„æœ¯è¯­æ‰“æ•£ï¼Œå°†å®ƒä»¬ç»„æˆNå…ƒç»„(N-grams)ã€‚æ›´å¤šä¿¡æ¯å‚è§Indexing and searching N-grams  ï¼ˆå¦‚æœä½ ä¸éœ€è¦å‘å­—æ®µç±»å‹ä¼ é€’å‚æ•°ï¼Œé‚£ä¹ˆåªè¦ç»™å‡ºç±»åå°±å¯ä»¥äº†ã€‚Whooshä¼šå¸®ä½ å®ä¾‹åŒ–ã€‚ï¼‰
1 2 3  from whoosh.fields import Schema, STORED, ID, KEYWORD, TEXT schema = Schema(title=TEXT(stored=True), content=TEXT, path=ID(stored=True), tags=KEYWORD, icon=STORED)   æ›´å¤šä¿¡æ¯å‚è§Designing a schema
ä¸€æ—¦ä½ æœ‰äº†schemaï¼Œä½ å°±å¯ä»¥ä½¿ç”¨create_inæ–¹æ³•åˆ›å»ºindex:
1 2 3 4 5 6  import os.path from whoosh.index import create_in if not os.path.exists(&amp;#34;index&amp;#34;): os.mkdir(&amp;#34;index&amp;#34;) ix = create_in(&amp;#34;index&amp;#34;, schema)   ï¼ˆè¿™ä¸€æ­¥åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«ç´¢å¼•&amp;quot;index&amp;quot;çš„å­˜å‚¨å¯¹è±¡ã€‚Storageå¯¹è±¡æ˜¯å°†è¢«å‚¨å­˜çš„indexçš„ä¸­é—´ä»¶ã€‚é€šå¸¸ï¼Œå­˜å‚¨å¯¹è±¡ä¼šæ˜¯FileStorageå¯¹è±¡ï¼Œå°†indexå­˜å‚¨ä¸ºä¸€ç»„æ–‡ä»¶ï¼Œå­˜å‚¨åˆ°æŸä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚ï¼‰
åœ¨åˆ›å»ºäº†ä¸€ä¸ªindexä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨open_diræ–¹æ³•ï¼Œå¾ˆæ–¹ä¾¿çš„æ‰“å¼€å®ƒï¼š
1 2  from whoosh.index import open_dir ix = open_dir(&amp;#34;index&amp;#34;)   The IndexWriter object å¥½çš„ï¼Œæ—¢ç„¶æˆ‘ä»¬å·²ç»æœ‰çš„indexå¯¹è±¡äº†ï¼Œé‚£ç°åœ¨å°±å¯ä»¥æ·»åŠ æ–‡æ¡£äº†ã€‚indexå¯¹è±¡çš„writer()æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªIndexWriterå¯¹è±¡ï¼Œå¯ä»¥ç”¨æ¥å°†æ–‡æ¡£æ·»åŠ è¿›indexã€‚IndexWriterå¯¹è±¡çš„add_document(**kwargs)æ–¹æ³•é€šè¿‡ä¼ å…¥çš„å…³é”®å­—å‚æ•°ï¼Œå°†å­—æ®µåæ˜ å°„åˆ°å…·ä½“çš„å€¼ã€‚
1 2 3 4 5 6 7 8  writer = ix.writer() writer.add_document(title=u&amp;#34;My document&amp;#34;, content=u&amp;#34;This is my document!&amp;#34;, path=u&amp;#34;/a&amp;#34;, tags=u&amp;#34;first short&amp;#34;, icon=u&amp;#34;/icons/star.png&amp;#34;) writer.add_document(title=u&amp;#34;Second try&amp;#34;, content=u&amp;#34;This is the second example.&amp;#34;, path=u&amp;#34;/b&amp;#34;, tags=u&amp;#34;second short&amp;#34;, icon=u&amp;#34;/icons/sheep.png&amp;#34;) writer.add_document(title=u&amp;#34;Third time&amp;#39;s the charm&amp;#34;, content=u&amp;#34;Examples are many.&amp;#34;, path=u&amp;#34;/c&amp;#34;, tags=u&amp;#34;short&amp;#34;, icon=u&amp;#34;/icons/book.png&amp;#34;) writer.commit()   å…¶ä¸­ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š
 ä½ ä¸ä¸€å®šè¦ä¸ºæ‰€æœ‰çš„å­—æ®µèµ‹å€¼ã€‚Whooshæ ¹æœ¬ä¸åœ¨ä¹ã€‚ å»ºç«‹ç´¢å¼•çš„å­—æ®µçš„æ–‡æœ¬å‚æ•°å¿…é¡»æ˜¯ä»¥unicodeç¼–ç çš„å­—ç¬¦ä¸²ã€‚é‚£äº›åªå­˜å‚¨ä¸å»ºç«‹ç´¢å¼•çš„å­—æ®µï¼ˆSTOREDç±»å‹ï¼‰å¯ä»¥ä¼ å…¥ä»»ä½•ç¼–ç çš„å¯¹è±¡ã€‚  å¦‚æœä½ æœ‰ä¸€ä¸ªæ–‡æœ¬å­—æ®µï¼Œæ—¢è¦å»ºç«‹ç´¢å¼•ï¼Œä¹Ÿè¦è¢«å­˜å‚¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä¸ºunicodeç¼–ç å€¼å»ºç«‹ç´¢å¼•ï¼Œç„¶åå†ç”¨ä¸‹é¢å±•ç¤ºçš„æŠ€å·§å­˜å‚¨ä¸€ä¸ªä¸åŒçš„å¯¹è±¡ï¼ˆå¦‚æœå¿…è¦çš„è¯ï¼Œä½†æ˜¯é€šå¸¸æ²¡å¿…è¦ã€‚ åˆ ä½†æ˜¯ï¼Œæœ‰æ—¶å€™ï¼Œè¿™çœŸçš„å¾ˆæœ‰ç”¨ï¼‰ï¼š
1  writer.add_document(title=u&amp;#34;Title to be indexed&amp;#34;, _stored_title=u&amp;#34;Stored title&amp;#34;)   è°ƒç”¨IndexWriterçš„commit()æ¥æäº¤é‚£äº›æ·»åŠ åˆ°indexä¸­çš„æ–‡æ¡£ï¼š
1  writer.commit()   æ›´å¤šä¿¡æ¯å‚è§How to index documents
ä¸€æ—¦æ–‡æ¡£è¢«æäº¤åˆ°indexä¸­ï¼Œé‚£ä½ å°±å¯ä»¥æœç´¢å®ƒä»¬äº†ã€‚
The Searcher object ä¸ºäº†æ£€ç´¢indexï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªSearcherå¯¹è±¡ï¼š
1  searcher = ix.searcher()   ä½ é€šå¸¸ä¼šæƒ³è¦é€šè¿‡withè¯­å¥æ‰“å¼€æ£€ç´¢å™¨(Searcher)ã€‚è¿™æ ·ï¼Œå½“ä½ ä½¿ç”¨å®Œæ£€ç´¢å™¨ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å…³é—­äº†ï¼ˆSearcherå¯¹è±¡è¡¨ç¤ºå¾ˆå¤šæ‰“å¼€çš„æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æ²¡æœ‰æ˜¾å¼åœ°å…³é—­ä»–ä»¬ï¼Œè€Œä¸”ç³»ç»Ÿæ”¶é›†ä»–ä»¬çš„é€Ÿåº¦ä¹Ÿæ…¢çš„è¯ï¼Œä½ å¯èƒ½ä¼šèŠ±å…‰æ–‡ä»¶å¥æŸ„ï¼‰ã€‚
1 2  with ix.searcher() as searcher: pass   ç­‰ä»·äºï¼š
1 2 3 4 5  try: searcher = ix.searcher() pass finally: searcher.close()   Searcherå¯¹è±¡çš„search()æ–¹æ³•éœ€è¦ä¸€ä¸ªæŸ¥è¯¢(Query)å¯¹è±¡ã€‚ä½ å¯ä»¥ç›´æ¥æ„é€ queryå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨queryåˆ†æå™¨åˆ†æqueryå­—ç¬¦ä¸²ã€‚
æ¯”å¦‚ï¼Œä¸‹é¢çš„æŸ¥è¯¢å¯¹è±¡å°†ä¼šåŒ¹é…åœ¨â€œcontentâ€å­—æ®µä¸­åŒæ—¶åŒ…å«â€œappleâ€å’Œâ€œbearâ€çš„æ–‡æ¡£ï¼š
1 2 3 4  # Construct query objects directly from whoosh.query import * myquery = And([Term(&amp;#34;content&amp;#34;, u&amp;#34;apple&amp;#34;), Term(&amp;#34;content&amp;#34;, &amp;#34;bear&amp;#34;)])   æ­¤å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨qparseræ¨¡å—ä¸­é»˜è®¤çš„æŸ¥è¯¢åˆ†æå™¨å»åˆ†ææŸ¥è¯¢å­—ç¬¦ä¸²ã€‚QueryParseræ„é€ å™¨çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é»˜è®¤çš„æœç´¢å­—æ®µï¼Œå®ƒé€šå¸¸ä¼ å…¥â€œæ–‡æœ¬ä¸»ä½“â€æ‰€åœ¨çš„å­—æ®µã€‚ç¬¬äºŒä¸ªå¯é€‰å‚æ•°æ˜¯ä¸€ä¸ªschemaï¼Œç”¨æ¥è®©åˆ†æå™¨ç†è§£å¦‚ä½•åˆ†æå­—æ®µï¼š
1 2 3 4 5  # Parse a query string from whoosh.qparser import QueryParser parser = QueryParser(&amp;#34;content&amp;#34;, ix.schema) myquery = parser.parse(querystring)   åªè¦ä½ æœ‰äº†Searcherå’Œqueryå¯¹è±¡ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨Searcherçš„search()æ–¹æ³•æ¥æ‰§è¡ŒæŸ¥è¯¢ï¼Œè·å¾—Resultså¯¹è±¡ï¼š
1 2 3 4 5  &amp;gt;&amp;gt;&amp;gt; results = searcher.search(myquery) &amp;gt;&amp;gt;&amp;gt; print(len(results)) 1 &amp;gt;&amp;gt;&amp;gt; print(results[0]) {&amp;#34;title&amp;#34;: &amp;#34;Second try&amp;#34;, &amp;#34;path&amp;#34;: &amp;#34;/b&amp;#34;, &amp;#34;icon&amp;#34;: &amp;#34;/icons/sheep.png&amp;#34;}   é»˜è®¤çš„QueryParserå®ç°æŸ¥è¯¢è¯­è¨€çš„æ–¹å¼å’ŒLuceneä¸­çš„éå¸¸ç›¸ä¼¼ã€‚å®ƒå…è®¸ä½¿ç”¨ANDæˆ–è€…ORè”ç³»è¯­å¥ï¼Œä½¿ç”¨NOTæ’é™¤è¯­å¥ï¼ŒæŠŠè¯­å¥ç»„åˆæˆå¸¦æ‹¬å·çš„å­å¥ï¼Œè¿›è¡ŒèŒƒå›´ã€å‰ç¼€ä»¥åŠé€šé…ç¬¦æŸ¥è¯¢ï¼Œå¹¶æŒ‡å®šä¸åŒå­—æ®µå»æœç´¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä½¿ç”¨ANDç»„åˆæŸ¥è¯¢å­å¥ï¼ˆæ‰€ä»¥ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä½ æ‰€æŒ‡å®šçš„å…¨éƒ¨æœç´¢è¯å¿…é¡»å…¨åœ¨æ–‡æ¡£ä¸­ï¼Œæ–‡æ¡£æ‰èƒ½è¢«åŒ¹é…ï¼‰ï¼š
1 2 3 4 5 6 7 8  &amp;gt;&amp;gt;&amp;gt; print(parser.parse(u&amp;#34;render shade animate&amp;#34;)) And([Term(&amp;#34;content&amp;#34;, &amp;#34;render&amp;#34;), Term(&amp;#34;content&amp;#34;, &amp;#34;shade&amp;#34;), Term(&amp;#34;content&amp;#34;, &amp;#34;animate&amp;#34;)]) &amp;gt;&amp;gt;&amp;gt; print(parser.parse(u&amp;#34;render OR (title:shade keyword:animate)&amp;#34;)) Or([Term(&amp;#34;content&amp;#34;, &amp;#34;render&amp;#34;), And([Term(&amp;#34;title&amp;#34;, &amp;#34;shade&amp;#34;), Term(&amp;#34;keyword&amp;#34;, &amp;#34;animate&amp;#34;)])]) &amp;gt;&amp;gt;&amp;gt; print(parser.parse(u&amp;#34;rend*&amp;#34;)) Prefix(&amp;#34;content&amp;#34;, &amp;#34;rend&amp;#34;)   Whooshè¿˜æœ‰é¢å¤–çš„åŠŸèƒ½å¤„ç†æ£€ç´¢ç»“æœï¼Œæ¯”å¦‚ï¼š
 ä»¥ç´¢å¼•å­—æ®µçš„å€¼æ’åºï¼Œè€Œä¸æ˜¯ç›¸å…³ç¨‹åº¦ åœ¨åŸæ–‡çš„èŠ‚é€‰ä¸­ï¼Œé«˜äº®æœç´¢å­—æ®µ åŸºäºæ£€ç´¢åˆ°çš„å‰å‡ ä¸ªæ–‡æ¡£ï¼Œæ‰©å±•æœç´¢é€‰é¡¹ åˆ†é¡µæ˜¾ç¤ºç»“æœï¼ˆä¾‹å¦‚ï¼Œâ€œæ˜¾ç¤ºç»“æœ 1-20 ï¼Œé¡µé¢1 of 4â€ï¼‰
æ›´å¤šå†…å®¹å‚è§How to search  Designing a schema About schemas and fields schemaæŒ‡å®šäº†æ–‡æ¡£åœ¨ç´¢å¼•ä¸­çš„å­—æ®µã€‚
æ¯ä¸€ç¯‡æ–‡æ¡£éƒ½å¯ä»¥æœ‰å¤šä¸ªå­—æ®µï¼Œæ¯”å¦‚titleã€contentã€urlã€dateç­‰ç­‰ã€‚
æŸäº›å­—æ®µå¯ä»¥è¢«ç´¢å¼•ã€‚æŸäº›å­—æ®µå¯ä»¥å’Œæ–‡æ¡£ä¸€èµ·å­˜å‚¨ï¼Œç”¨äºåœ¨æ£€ç´¢çš„ç»“æœä¸­æ˜¾ç¤ºè¿™äº›å­—æ®µçš„å€¼ã€‚æŸäº›å­—æ®µæ—¢å¯ä»¥è¢«ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥è¢«å­˜å‚¨ã€‚
schemaæ˜¯æ–‡æ¡£ä¸­å¯èƒ½å‡ºç°çš„å­—æ®µçš„é›†åˆï¼Œæ¯ä¸€ç¯‡æ–‡æ¡£éƒ½å¯èƒ½ä»…ä»…ä½¿ç”¨å®ƒçš„å­é›†ã€‚
æ¯”å¦‚ï¼Œä¸€ä¸ªç”¨äºç´¢å¼•é‚®ä»¶çš„schameå¯èƒ½çš„å­—æ®µæœ‰from_addrã€ to_addrã€subjectã€bodyä»¥åŠattachmentsï¼Œattachmentså­—æ®µå¯èƒ½ä»¥åˆ—è¡¨å½¢å¼åˆ—å‡ºäº†é‚®ä»¶çš„é™„ä»¶åã€‚å¯¹äºæ²¡æœ‰é™„ä»¶çš„é‚®ä»¶ï¼Œä½ å°±å¯ä»¥å¿½ç•¥è¿™ä¸ªå­—æ®µã€‚
Built-in field types Whooshæä¾›äº†ä¸€äº›å®ç”¨çš„é¢„è®¾å­—æ®µç±»å‹ï¼š
 whoosh.fields.TEXT
è¿™ä¸ªç±»å‹ç”¨äºæ–‡æœ¬ä¸»ä½“ã€‚å®ƒä¸ºæ–‡æœ¬å»ºç«‹ç´¢å¼•ï¼Œå¹¶ä¸”è®°å½•è¯è¯­çš„ä½ç½®ä»¥ä¾¿çŸ­è¯­æ£€ç´¢ï¼›äº¦å¯å¢é€‰å­˜å‚¨èµ·æ¥ã€‚
TEXTå­—æ®µé»˜è®¤ä½¿ç”¨StandarAnalyzerè¿›è¡Œåˆ†è¯ã€‚è¦æŒ‡å®šä¸åŒçš„åˆ†è¯å™¨ï¼Œä½ å¯ä»¥ä¸ºå­—æ®µçš„æ„é€ å™¨ä½¿ç”¨analyzerå‚æ•°ï¼Œæ¯”å¦‚TEXT(analyzer=analysis.StemmingAnalyzer())ã€‚è¯¦æƒ…è§See About analyzers
TEXTå­—æ®µé»˜è®¤å‚¨å­˜è¯è¯­çš„ä½ç½®ï¼Œç”¨äºçŸ­è¯­æ£€ç´¢ã€‚å¦‚æœä½ ä¸éœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Œä½ å¯ä»¥å…³é—­å®ƒä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚ä½¿ç”¨TEXT(phrase=False)å…³é—­æ­¤åŠŸèƒ½ã€‚ TEXTå­—æ®µé»˜è®¤ä¸å­˜å‚¨å­—æ®µçš„å€¼ã€‚é€šå¸¸ï¼Œä½ ä¸ä¼šå¸Œæœ›åœ¨ç´¢å¼•ä¸­å‚¨å­˜æ–‡æ¡£çš„æ­£æ–‡ã€‚å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä»æ£€ç´¢ç»“æœä¸­ç›´æ¥è¯»å–æˆ–è€…é“¾æ¥åˆ°æ–‡æ¡£æœ¬èº«ï¼Œæ‰€ä»¥æ— éœ€åœ¨ç´¢å¼•ä¸­å­˜å‚¨æ–‡æœ¬ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå‚¨å­˜å­—æ®µçš„å€¼ä¼šæ˜¯å®ç”¨çš„ï¼Œæ¯”å¦‚How to create highlighted search result excerptsã€‚ä½¿ç”¨TEXT(stored=True)å°†æ–‡æœ¬å­˜å‚¨åˆ°ç´¢å¼•ä¸­ã€‚ whoosh.fields.KEYWORD
è¿™ä¸ªç±»å‹æ˜¯è®¾è®¡ç»™ä»¥ç©ºæ ¼ã€é€—å·åˆ†éš”çš„å…³é”®è¯çš„ã€‚æ­¤ç±»å‹å¯ç´¢å¼•ï¼Œä¹Ÿå¯å­˜å‚¨å±•ç¤ºã€‚ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œå®ƒä¸æ”¯æŒçŸ­è¯­æ£€ç´¢ã€‚
åœ¨æ„é€ å™¨ä¸­ä½¿ç”¨stored=Trueå­˜å‚¨å±•ç¤ºå­—æ®µçš„å€¼ï¼›ä½¿ç”¨lowercase=Trueå°†åœ¨ç´¢å¼•å»ºç«‹å‰è‡ªåŠ¨å°å†™å…³é”®å­—ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè®¤ä¸ºå…³é”®å­—æ˜¯ä»¥ç©ºæ ¼ä¸ºåˆ†å‰²ç¬¦çš„ï¼Œå¯è®¾ç½®commas=Trueä½¿ç”¨é€—å·æ›¿ä»£ç©ºæ ¼æˆä¸ºåˆ†éš”ç¬¦ï¼ˆæ³¨æ„ï¼Œæ­¤æ—¶å³å…è®¸å…³é”®å­—ä¸­å«æœ‰ç©ºæ ¼ï¼‰ã€‚
å¦‚æœä½ çš„ä½¿ç”¨è€…å°†ä½¿ç”¨å…³é”®å­—å­—æ®µè¿›è¡Œæ£€ç´¢ï¼Œè¯·è®¾ç½®scorable=Trueã€‚ whoosh.fields.ID
IDç±»å‹ç®€å•åœ°å°†å­—æ®µçš„æ•´ä¸ªå€¼å½“ä½œä¸€ä¸ªå•å…ƒï¼ˆä¸ä¼šå°†å­—æ®µåˆ†éš”æˆä¸€ä¸ªä¸€ä¸ªè¯è¯­ï¼‰è¿›è¡Œç´¢å¼•ï¼ˆand optionally storesï¼‰ã€‚è¿™ä¸ªç±»å‹ä¸ä¼šå­˜å‚¨è¯é¢‘ï¼Œå› æ­¤å®ƒå®Œæˆå¾—å¾ˆå¿«ï¼Œä½†å¯¹äºæ–‡æ¡£ç›¸å…³åº¦çš„è®¡ç®—å°±æ²¡å•¥ç”¨äº†ã€‚
IDç±»å‹ä¸€èˆ¬ç”¨äºURLã€æ–‡ä»¶è·¯å¾„ã€æ—¥æœŸã€åˆ†ç±»ç­‰å­—æ®µï¼Œè¿™äº›å­—æ®µé€šå¸¸éœ€è¦å½“æˆæ•´ä½“æ¥å¯¹å¾…ï¼Œå¹¶ä¸”ä¸€ä¸ªæ–‡æ¡£åªæœ‰ä¸€ä¸ªå€¼ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼ŒIDç±»å‹ä¹Ÿä¸è¢«å­˜å‚¨å±•ç¤ºã€‚è®¾ç½®ID(stored=true)ï¼Œä½¿æŒ‡å®šçš„å­—æ®µå¯ä»¥è¢«å­˜å‚¨ï¼Œç”¨äºåœ¨æ£€ç´¢ç»“æœä¸­å±•ç¤ºã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥å­˜å‚¨URLçš„å€¼ï¼Œä»¥ä¾¿åœ¨æ£€ç´¢ç»“æœä¸­æä¾›æ–‡æ¡£çš„é“¾æ¥ã€‚ whoosh.fields.STORED
è¿™ä¸ªç±»å‹ç”¨äºå­˜å‚¨æ–‡æ¡£ï¼Œä½†æ˜¯ä¸èƒ½å»ºç«‹ç´¢å¼•ä¹Ÿä¸èƒ½æ£€ç´¢ï¼Œä¸»è¦ç”¨åœ¨ä½ å¸Œæœ›åœ¨æ£€ç´¢ç»“æœä¸­å±•ç¤ºï¼Œå´ä¸å¿…æ£€ç´¢å¾—åˆ°çš„æ–‡æ¡£ä¿¡æ¯ä¸Šã€‚ whoosh.fields.NUMERIC
ç”¨ç´§å‡‘ã€å¯æ’åºå¾—å½¢å¼å­˜å‚¨intã€longã€æµ®ç‚¹æ•°ã€‚ whoosh.fields.DATETIME
ç”¨ç´§å‡‘ã€å¯æ’åºå¾—å½¢å¼å­˜å‚¨æ—¥æœŸå¯¹è±¡ã€‚ whoosh.fields.BOOLEAN
ç”¨äºç´¢å¼•å¸ƒå°”å€¼ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨yes no true false 1 0 t fæ£€ç´¢åˆ°è¿™ä¸ªç±»å‹çš„å­—æ®µã€‚ whoosh.fields.NGRAM
TBD.  Creating a Schema ä¸¾ä¸ªæ —å­ï¼š
1 2 3 4 5 6 7 8  from whoosh.fields import Schema, TEXT, KEYWORD, ID, STORED from whoosh.analysis import StemmingAnalyzer schema = Schema(from_addr=ID(stored=True), to_addr=ID(stored=True), subject=TEXT(stored=True), body=TEXT(analyzer=StemmingAnalyzer()), tags=KEYWORD)   å¦‚æœä¸éœ€è¦ä¸ºåŸç”Ÿçš„å­—æ®µç±»å‹æ„é€ å™¨æä¾›å‚æ•°ï¼Œå¯ä»¥çœç•¥()ï¼ˆæ¯”å¦‚ï¼Œç”¨fieldname=TEXTä»£æ›¿fieldname=TEXT()ï¼‰ã€‚whooshä¼šå¸®ä½ å®ä¾‹åŒ–ã€‚
æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨SchemaClassåŸºç¡€ç±»æ¥å£°æ˜ä¸€ä¸ªSchemaï¼š
1 2 3 4 5 6 7  from whoosh.fields import SchemaClass, TEXT, KEYWORD, ID, STORED class MySchema(SchemaClass): path = ID(stored=True) title = TEXT(stored=True) content = TEXT tags = KEYWORD   ä½ å¯ä»¥å°†ä¸Šè¿°å£°æ˜ç±»å½“å‚æ•°ä¼ ç»™æ–¹æ³•create_in()æˆ–è€…create_index()ï¼Œè€Œä¸å¿…ä½¿ç”¨Schemaå®ä¾‹ã€‚
Modifying the schema after indexing åœ¨å·²ç»å»ºç«‹ç´¢å¼•ä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨add_field()å’Œremove_field()å¢å‡å­—æ®µã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯writerå¯¹è±¡çš„æˆå‘˜æ–¹æ³•ï¼š
1 2 3 4  writer = ix.writer() writer.add_field(&amp;#34;fieldname&amp;#34;, fields.TEXT(stored=True)) writer.remove_field(&amp;#34;content&amp;#34;) writer.commit()   ï¼ˆå¦‚æœå¢å‡å­—æ®µå’Œæ·»åŠ æ–‡æ¡£ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªwriterï¼Œä½ å¿…é¡»ç¡®ä¿åœ¨æ·»åŠ æ–‡æ¡£å‰è°ƒç”¨add_field()ä»¥åŠremove_field()ã€‚ï¼‰
åœ¨indexå¯¹è±¡ä¸­ï¼Œè¿™äº›æ–¹æ³•ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ï¼š
1  ix.add_field(&amp;#34;fieldname&amp;#34;, fields.KEYWORD)   ä½†æ˜¯ï¼Œå½“ä½ è¿™ä¹ˆç”¨çš„æ—¶å€™ï¼Œindexå¯¹è±¡å®é™…ä¸Šæ˜¯åˆ›å»ºäº†writerï¼Œå¹¶è°ƒç”¨äº†å¯¹åº”çš„å‡½æ•°å†æäº¤ï¼ˆcommitï¼‰çš„ã€‚æ‰€ä»¥ï¼Œè‹¥æ˜¯ä½ æƒ³å¢å‡å¤šä¸ªå­—æ®µï¼Œä½¿ç”¨writerä¼šæ›´æœ‰æ•ˆç‡ã€‚
åœ¨filedbåå°ï¼Œç§»é™¤ä¸€ä¸ªå­—æ®µä»…ä»…å¯¹schemaåšäº†ä¿®æ”¹ï¼Œindexå¹¶ä¸ä¼šå˜å°ï¼Œindexæœ‰å…³é‚£ä¸ªå­—æ®µçš„æ•°æ®ä»ç„¶å­˜åœ¨ï¼Œé™¤éä½ commitçš„æ—¶å€™ä½¿ç”¨äº†optimizeï¼ˆä¼˜åŒ–ï¼‰ã€‚ä¼˜åŒ–å¯ä»¥é‡æ„ç´¢å¼•ï¼Œç§»é™¤ç›¸åº”å­—æ®µçš„å¼•ç”¨ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š
1 2 3 4  writer = ix.writer() writer.add_field(&amp;#34;uuid&amp;#34;, fields.ID(stored=True)) writer.remove_field(&amp;#34;path&amp;#34;) writer.commit(optimize=True)   å› ä¸ºæ•°æ®æ˜¯å’Œå­—æ®µåä¸€èµ·å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ï¼Œæ‰€ä»¥ä¸è¦åœ¨ç§»é™¤å­—æ®µä¸”ä¸è®¾ç½®optimizeçš„æƒ…å†µä¸‹ï¼Œæ·»åŠ åŒåçš„å­—æ®µï¼š
1 2 3 4  writer = ix.writer() writer.delete_field(&amp;#34;path&amp;#34;) # Don&amp;#39;t do this!!! writer.add_field(&amp;#34;path&amp;#34;, fields.KEYWORD)   ï¼ˆæœªæ¥ï¼Œwhooshä¹Ÿè®¸ä¼šè‡ªåŠ¨é¿å…è¿™ä¸ªé”™è¯¯ã€‚ï¼‰
Dynamic fields åŠ¨æ€å­—æ®µå°±æ˜¯æŠŠç±»å‹ä¸ä¸€ç»„å­—æ®µè”ç³»èµ·æ¥ï¼Œè¿™äº›å­—æ®µèƒ½å¤Ÿè¢«ç»™å®šçš„â€œé€šé…ç¬¦â€åŒ¹é…ï¼ˆé€šé…ç¬¦ï¼ˆglobï¼‰æŒ‡ä¸€ç§å‘½åæ¨¡æ¿ï¼ŒåŒ…å«*ã€ï¼Ÿä»¥åŠ[abc]é€šé…ç¬¦ï¼‰ã€‚
ä½ å¯ä»¥ä½¿ç”¨å¸¦globå…³é”®å­—çš„add()æ–¹æ³•æ·»åŠ åŠ¨æ€å­—æ®µï¼ˆè®¾ç½®glob=Trueï¼š
1 2 3 4  schema = fields.Schema(...) # Any name ending in &amp;#34;_d&amp;#34; will be treated as a stored # DATETIME field schema.add(&amp;#34;*_d&amp;#34;, fields.DATETIME(stored=True), glob=True)   å’Œæ·»åŠ æ™®é€šçš„å­—æ®µä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨IndexWriter.add_field()æ·»åŠ åŠ¨æ€å­—æ®µã€‚ä½†æ˜¯ï¼Œéœ€è¦è®¾ç½®glob=Trueï¼š
1 2 3  writer = ix.writer() writer.add_field(&amp;#34;*_d&amp;#34;, fields.DATETIME(stored=True), glob=True) writer.commit()   ç§»é™¤åŠ¨æ€å­—æ®µæ—¶ï¼Œä½¿ç”¨IndexWriter.remove_field()ï¼Œå¹¶ç»™å‡ºâ€œç»Ÿé…ç¬¦å­—æ®µåâ€ï¼š
1 2 3  writer = ix.writer() writer.remove_field(&amp;#34;*_d&amp;#34;) writer.commit()   ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•å…è®¸æ–‡æ¡£åŒ…å«ä»»ä½•ä»¥_idç»“å°¾çš„å­—æ®µåï¼Œå¹¶æŒ‡å®šå…¶ä¸ºIDç±»å‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  schema = fields.Schema(path=fields.ID) schema.add(&amp;#34;*_id&amp;#34;, fields.ID, glob=True) ix = index.create_in(&amp;#34;myindex&amp;#34;, schema) w = ix.writer() w.add_document(path=u&amp;#34;/a&amp;#34;, test_id=u&amp;#34;alfa&amp;#34;) w.add_document(path=u&amp;#34;/b&amp;#34;, class_id=u&amp;#34;MyClass&amp;#34;) # ... w.commit() qp = qparser.QueryParser(&amp;#34;path&amp;#34;, schema=schema) q = qp.parse(u&amp;#34;test_id:alfa&amp;#34;) with ix.searcher() as s: results = s.search(q)   Advanced schema setup Field boosts ä½ å¯ä»¥ä¸ºå­—æ®µæŒ‡å®šfield boostï¼ˆå­—æ®µå¢å¼ºå™¨ï¼‰ï¼Œå®ƒå¯ä»¥å€å¢æŸä¸ªå­—æ®µä¸­å‡ºç°çš„ä»»æ„termçš„æ£€ç´¢ä»·å€¼ã€‚æ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œåœ¨è®¡ç®—æ–‡æ¡£ä¸æ£€ç´¢æ¡ä»¶çš„ç›¸å…³æ€§çš„æ—¶å€™ï¼Œtitleå­—æ®µä¸­å‡ºç°çš„ç›¸å…³è¯å¥ï¼ˆtermï¼‰ï¼Œåˆ†æ•°ä¼šæ˜¯bodyä¸­çš„ä¸¤å€ï¼š
1  schema = Schema(title=TEXT(field_boost=2.0), body=TEXT)   Field types å‰æ–‡åˆ—å‡ºçš„é¢„è®¾ç±»å‹éƒ½æ˜¯fields.FieldTypeçš„å­ç±»ã€‚FieldTypeæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç±»ï¼Œå®ƒçš„å±æ€§ä¸­åŒ…å«äº†å®šä¹‰å­—æ®µè¡Œä¸ºçš„ä¿¡æ¯ï¼š
   Attribute Type Description     format fields.Format Defines what kind of information a field records about each term, and how the information is stored on disk.   vector fields.Format Optional: if defined, the format in which to store per-document forward-index information for this field.   scorable bool If True, the length of (number of terms in) the field in each document is stored in the index. Slightly misnamed, since field lengths are not required for all scoring. However, field lengths are required to get proper results from BM25F.   stored bool If True, the value of this field is stored in the index.   unique bool If True, the value of this field may be used to replace documents with the same value when the user calls document_update() on an IndexWriter.    å¤§å¤šæ•°ç±»å‹çš„æ„é€ å™¨éƒ½æœ‰ä¸€äº›å‚æ•°è®©ä½ èƒ½å¤Ÿè‡ªå®šä¹‰è¡¨ä¸­çš„å†…å®¹ã€‚æ¯”å¦‚ï¼š
 FieldType.stored TEXT()æ„é€ å™¨å°±æœ‰analyzerå…³é”®å­—å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°çš„å€¼ä¼šä¼ ç»™formå¯¹è±¡ã€‚  Formats formatå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå­—æ®µæ‰€è®°å½•çš„æ¯ä¸€ä¸ªtermçš„ä¿¡æ¯ï¼Œä»¥åŠè¿™äº›ä¿¡æ¯æ˜¯å¦‚ä½•å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ã€‚
æ¯”å¦‚ï¼ŒExistenceå­˜å‚¨postingï¼š    Doc      10    20    30    è€Œï¼ŒPositionså­˜å‚¨postingï¼š    Doc Positions   &amp;mdash; &amp;mdash;   10 [1,5,23]   20 [45]   30 [7,12]    ç´¢å¼•ä»£ç å°†å­—æ®µçš„unicodeå­—ç¬¦ä¸²å‘ç»™å­—æ®µçš„Formatå¯¹è±¡ã€‚Formatå¯¹è±¡è°ƒç”¨å®ƒçš„è§£é‡Šå™¨ï¼ˆanalyzerï¼‰å°†å­—ç¬¦ä¸²åˆ‡åˆ†æˆä¸€äº›æ ‡è®°ï¼Œå†ä¸ºæ¯ä¸€ä¸ªæ ‡è®°ç¼–ç ã€‚
Wshooshä¼šå¿½ç•¥ä¸‹è¡¨ä¸­çš„é¢„è®¾formatï¼š    ç±»å æè¿°     Stored A â€œnullâ€ format for fields that are stored but not indexed.   Existence Records only whether a term is in a document or not, i.e. it does not store term frequency. Useful for identifier fields (e.g. path or id) and â€œtagâ€-type fields, where the frequency is expected to always be 0 or 1.   Frequency Stores the number of times each term appears in each document.   Positions Stores the number of times each term appears in each document, and at what positions.    æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¸å¸¸ç”¨çš„formatï¼Œå®ƒä»¬ä¸»è¦æ˜¯æ–¹ä¾¿ä¸€äº›å¼ºè€…çš„ä½¿ç”¨ï¼š    ç±»å æè¿°     DocBoosts Like Existence, but also stores per-document boosts   Characters Like Positions, but also stores the start and end character indices of each term   PositionBoosts Like Positions, but also stores per-position boosts   CharacterBoosts Like Positions, but also stores the start and end character indices of each term and per-position boosts    Vectors ä¸»è¦çš„indexæ˜¯ä¸€ä¸ªåå‘ç´¢å¼•ã€‚å®ƒå°†termæ˜ å°„åˆ°å…¶æ‰€åœ¨çš„æ–‡æ¡£ã€‚å®ƒæœ‰æ—¶ä¹Ÿæœ‰åŠ©äºå‚¨å­˜å‰å‘ç´¢å¼•ï¼ˆäº¦ç§°term vectorï¼‰ï¼Œå³æŠŠæ–‡æ¡£æ˜ å°„åˆ°æ–‡æ¡£ä¸­çš„termä¸Šã€‚
æ¯”å¦‚ï¼Œä½ å¯ä»¥æƒ³è±¡ä¸€ä¸ªå­—æ®µçš„åå‘ç´¢å¼•ï¼š    Term Postings     apple [(doc=1, freq=2), (doc=2, freq=5), (doc=3, freq=1)]   bear [(doc=2, freq=7)]    ç›¸åº”çš„å‰å‘ç´¢å¼•ï¼Œæˆ–è€…è¯´term vectorï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š    Doc Postings     1 [(text=apple, freq=2)]   2 [(text=apple, freq=5), (text=&amp;lsquo;bear&amp;rsquo;, freq=7)]   3 [(text=apple, freq=1)]    å¦‚æœä½ ä¸ºä¸€ä¸ªFormatå¯¹è±¡è®¾ç½®äº†FieldType.vectorï¼Œé‚£ä¹ˆç´¢å¼•ä»£ç å°±ä¼šä½¿ç”¨è¿™ä¸ªFormatå¯¹è±¡æ¥å­˜å‚¨æ¯ä¸€ä¸ªæ–‡æ¡£ä¸­çš„é‚£äº›termã€‚ç›®å‰ï¼ŒWhooshé»˜è®¤ä¸ä½¿ç”¨ä»»ä½•term vectorï¼Œä½†æ˜¯å¯¹äºæƒ³è¦å®ç°è‡ªå·±çš„å­—æ®µç±»å‹çš„å¤§ç¥ä»¬è€Œè¨€ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯å¯ç”¨çš„ã€‚
How to index documents Creating an Index object ä½¿ç”¨index.create_inåœ¨æŒ‡å®šç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªindexï¼š
1 2 3 4 5 6 7  import os, os.path from whoosh import index if not os.path.exists(&amp;#34;indexdir&amp;#34;): os.mkdir(&amp;#34;indexdir&amp;#34;) ix = index.create_in(&amp;#34;indexdir&amp;#34;, schema)   ä½¿ç”¨index.open_diræ‰“å¼€æŒ‡å®šæ–‡ä»¶å¤¹å­˜åœ¨çš„indexï¼š
1 2 3  import whoosh.index as index ix = index.open_dir(&amp;#34;indexdir&amp;#34;)   è¿™å„¿è¿˜æœ‰äº›å¿«æ·å‡½æ•°(convenience functions)ï¼š
1 2 3 4 5 6 7 8  from whoosh.filedb.filestore import FileStorage storage = FileStorage(&amp;#34;indexdir&amp;#34;) # Create an index ix = storage.create_index(schema) # Open an existing index storage.open_index()   ä½ åˆ›å»ºindexæ‰€ç”¨çš„schameæ˜¯å’Œindexæ·±åº¦æ†ç»‘ä¸”ä¸€èµ·å­˜å‚¨çš„ã€‚
ä½ å¯ä»¥åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºå¤šä¸ªindexï¼Œä½†æ˜¯éœ€è¦ä½¿ç”¨indexnameå…³é”®å­—æŒ‡å®šï¼š
1 2 3 4 5 6 7  # Using the convenience functions ix = index.create_in(&amp;#34;indexdir&amp;#34;, schema=schema, indexname=&amp;#34;usages&amp;#34;) ix = index.open_dir(&amp;#34;indexdir&amp;#34;, indexname=&amp;#34;usages&amp;#34;) # Using the Storage object ix = storage.create_index(schema, indexname=&amp;#34;usages&amp;#34;) ix = storage.open_index(indexname=&amp;#34;usages&amp;#34;)   Clearing the index è°ƒç”¨index.create_inå°†ä¼šæ¸…é™¤ç›®å½•ä¸­å·²å­˜åœ¨çš„indexä¸­çš„å†…å®¹ã€‚
ä½¿ç”¨index.exists_inå¯ä»¥åˆ¤æ–­ç›®å½•ä¸­çš„æ˜¯å¦åŒ…å«æœ‰æ•ˆindexï¼š
1 2  exists = index.exists_in(&amp;#34;indexdir&amp;#34;) usages_exists = index.exists_in(&amp;#34;indexdir&amp;#34;, indexname=&amp;#34;usages&amp;#34;)   ï¼ˆæ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ é™¤indexçš„ç›¸å…³æ–‡ä»¶ã€‚å¦‚æœç›®å½•ä¸­ä»…æœ‰ä¸€ä¸ªindexï¼Œä½ å¯ä»¥ä½¿ç”¨shutil.rmtreeç§»é™¤æ–‡ä»¶å¤¹å¹¶é‡æ–°åˆ›å»ºå®ƒã€‚ï¼‰
Indexing documents ä¸€æ—¦åˆ›å»ºå¥½Indexå¯¹è±¡ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨IndexWriterå‘indexä¸­æ·»åŠ æ–‡æ¡£äº†ã€‚è·å–IndexWriterå¯¹è±¡çš„æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯è°ƒç”¨index.writer()ï¼š
1 2  ix = index.open_dir(&amp;#34;index&amp;#34;) writer = ix.writer()   åˆ›å»ºäº†writerçš„æ—¶å€™ä¼šé”å®šindexã€‚å› æ­¤ï¼ŒåŒä¸€æ—¶é—´ï¼Œä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–è¿›ç¨‹ï¼‰åªèƒ½å­˜åœ¨ä¸€ä¸ªwriterï¼š
Note
ä½ éœ€è¦æœ‰æ„è¯†åˆ°ï¼Œå› ä¸ºæ‰“å¼€ä¸€ä¸ªwriterçš„æ—¶å€™ä¼šæŠŠindexé”å®šï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹ï¼ˆå¤šè¿›ç¨‹ï¼‰çš„ç¼–ç¨‹ç¯å¢ƒä¸­ï¼Œæ‰“å¼€writeræ—¶å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆwhoosh.store.LockErrorï¼Œå¦‚æœå·²ç»æœ‰ä¸€ä¸ªwriterè¢«æ‰“å¼€äº†ï¼‰ã€‚WhooshåŒ…å«äº†ä¸€ç»„å®ç°æ ·ä¾‹ï¼ˆwhoosh.writing.AsyncWriterå’Œwhoosh.writing.BufferedWriterï¼‰ï¼Œå®ƒä»¬å¯ä»¥ç»•å¼€å†™å…¥é”ã€‚  Note
å³ä¾¿writerå·²æ‰“å¼€ä¸”å¤„äºcommitä¸­ï¼Œindexä»ç„¶æ˜¯å¯ä»¥è¢«è¯»å–çš„ã€‚å·²å­˜åœ¨çš„readerä¸å—å½±å“ï¼Œæ–°çš„readerä¹Ÿèƒ½æ­£å¸¸åœ°æ‰“å¼€æœ€æ–°çš„indexã€‚ä½†æ˜¯ï¼Œcommitå®Œæˆä¹‹åï¼Œå·²å­˜åœ¨çš„readeråªèƒ½è·å–å…ˆå‰çš„indexï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä¸ä¼šè‡ªåŠ¨æ›´æ–°æœ€æ–°çš„æäº¤å†…å®¹ï¼‰ã€‚  IndexWriterçš„add_document(**kwargs)æ–¹æ³•ä»¥å‚æ•°çš„å½¢å¼å°†å­—æ®µåæ˜ å°„åˆ°å€¼ï¼š
1 2 3 4 5 6 7 8  writer = ix.writer() writer.add_document(title=u&amp;#34;My document&amp;#34;, content=u&amp;#34;This is my document!&amp;#34;, path=u&amp;#34;/a&amp;#34;, tags=u&amp;#34;first short&amp;#34;, icon=u&amp;#34;/icons/star.png&amp;#34;) writer.add_document(title=u&amp;#34;Second try&amp;#34;, content=u&amp;#34;This is the second example.&amp;#34;, path=u&amp;#34;/b&amp;#34;, tags=u&amp;#34;second short&amp;#34;, icon=u&amp;#34;/icons/sheep.png&amp;#34;) writer.add_document(title=u&amp;#34;Third time&amp;#39;s the charm&amp;#34;, content=u&amp;#34;Examples are many.&amp;#34;, path=u&amp;#34;/c&amp;#34;, tags=u&amp;#34;short&amp;#34;, icon=u&amp;#34;/icons/book.png&amp;#34;) writer.commit()   å»ºç«‹ç´¢å¼•çš„å­—æ®µå¿…é¡»èµ‹äºˆunicodeç¼–ç çš„å€¼ï¼›å­˜å‚¨ä½†ä¸ç´¢å¼•çš„å­—æ®µå¯ä»¥ä½¿ç”¨ä»»æ„ç¼–ç ã€‚
Whooshå…è®¸ä½¿ç”¨åŒæ ·çš„å€¼æ·»åŠ æ–‡æ¡£ï¼Œè¿™å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ï¼Œä¹Ÿæœ‰å¯èƒ½ä»¤äººåŒçƒ¦ï¼š
1 2  writer.add_document(path=u&amp;#34;/a&amp;#34;, title=u&amp;#34;A&amp;#34;, content=u&amp;#34;Hello there&amp;#34;) writer.add_document(path=u&amp;#34;/a&amp;#34;, title=u&amp;#34;A&amp;#34;, content=u&amp;#34;Deja vu!&amp;#34;)   è¿™ä¸ªä¾‹å­æ·»åŠ äº†å…·æœ‰ç›¸åŒpathå’Œtitleçš„ä¸¤ä¸ªæ–‡æ¡£ã€‚
ä¸‹æ–‡çš„â€œupdating documentsâ€ä¼šæœ‰å…³äºupdate_documentæ–¹æ³•çš„ä»‹ç»ï¼Œå®ƒä½¿ç”¨â€œuniqueâ€å‚æ•°æ¥æ›¿æ¢æ—§æ–‡æ¡£ï¼Œè€Œä¸æ˜¯æ–°å¢æ–‡æ¡£ã€‚
Indexing and storing different values for the same field å¦‚æœä½ æœ‰ä¸€ä¸ªå­—æ®µæ—¢èƒ½ç´¢å¼•ä¹Ÿèƒ½å­˜å‚¨ï¼Œé‚£ä¹ˆï¼Œå¿…è¦æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç´¢å¼•ä¸€ä¸ªunuicodeç¼–ç çš„å€¼å¹¶å­˜å‚¨ä¸€ä¸ªä¸åŒçš„å€¼ï¼ˆé€šå¸¸è¿™æ˜¯ä¸å¿…è¦çš„ï¼Œä½†æœ‰æ—¶è¿™çœŸçš„å¾ˆæœ‰ç”¨ ä¼¼æ›¾ç›¸è¯†çš„è¯ ï¼‰ã€‚ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å…³é”®å­—å‚æ•°_stored_&amp;lt;fieldname&amp;gt;å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ä¸€èˆ¬çš„å‚æ•°å€¼ä¼šè¢«åˆ†æå¹¶å»ºç«‹ç´¢å¼•ï¼Œè€Œå¸¦æœ‰â€œstoredâ€çš„å‚æ•°çš„å€¼ä¼šè¢«å±•ç¤ºåœ¨æ£€ç´¢ç»“æœä¸­ï¼š
1  writer.add_document(title=u&amp;#34;Title to be indexed&amp;#34;, _stored_title=u&amp;#34;Stored title&amp;#34;)   Finishing adding documents IndexWriterå°±åƒæ•°æ®åº“äº‹åŠ¡ä¸€æ ·ã€‚ä½ è¿›è¡Œä¸€è¿ä¸²çš„æ“ä½œï¼Œç„¶åä¸€æ¬¡æ€§æäº¤å®ƒä»¬ã€‚
è°ƒç”¨commit()ä¿å­˜æ·»åŠ åˆ°indexä¸­çš„æ–‡æ¡£ï¼š
1  writer.commit()   ä¸€æ—¦ä½ çš„æ–‡æ¡£åœ¨indexä¸­ï¼Œä½ å°±å¯ä»¥æ£€ç´¢å®ƒä»¬äº†ã€‚
å¦‚æœæƒ³è¦å…³é—­writerè€Œä¸æäº¤ï¼Œä½¿ç”¨cancel()ä»£æ›¿commit()ï¼š
1  writer.cancel()   å§‹ç»ˆè¦è®°ä½ï¼Œå¦‚æœä½ è¦æ‰“å¼€ä¸€ä¸ªwriterï¼ˆæˆ–è€…å·²ç»æ‰“å¼€è¿‡writerå¹¶ä¸”å°šæœªå…³é—­ï¼‰ï¼Œé‚£ä¹ˆå°±åº”å½“ä¸ä¼šæœ‰å…¶å®ƒçº¿ç¨‹æˆ–è€…è¿›ç¨‹ä¼šè·å–ç›¸åŒindexçš„writeræˆ–ä¿®æ”¹è¯¥indexã€‚ä¸€ä¸ªwriterå¯èƒ½ä¼šå ç”¨å¤šä¸ªæ‰“å¼€çš„æ–‡ä»¶ï¼Œæ‰€ä»¥ä½ ä¹Ÿåº”è¯¥è®°ä½åœ¨ä¸éœ€è¦writerçš„æ—¶å€™è¦è°ƒç”¨commit()æˆ–è€…cancel()ã€‚
Merging segments Whooshçš„filedbç´¢å¼•å®é™…ä¸Šæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œç”¨äºä¸€ä¸ªæˆ–å¤šä¸ªç§°ä¸ºæ®µçš„å­ç´¢å¼•ã€‚å½“æ‚¨å°†æ–‡æ¡£æ·»åŠ åˆ°ç´¢å¼•ä¸­æ—¶ï¼Œå¹¶ä¸æ˜¯å°†æ–°æ–‡æ¡£æ•´åˆè¿›ç°æœ‰æ–‡æ¡£(è¿™æ“ä½œçš„ä»£ä»·å¯èƒ½éå¸¸æ˜‚è´µï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°åœ¨ç£ç›˜ä¸Šä½¿ç”¨æ‰€æœ‰å·²ç´¢å¼•çš„term)ï¼Œè€Œæ˜¯åœ¨ç°æœ‰æ®µçš„åé¢åˆ›å»ºä¸€ä¸ªæ–°æ®µã€‚ç„¶åï¼Œå½“ä½ æ£€ç´¢ç´¢å¼•æ—¶ï¼ŒWhooshå°†åˆ†åˆ«æœç´¢ä¸¤ä¸ªæ®µå¹¶åˆå¹¶ç»“æœï¼Œä½¿è¿™äº›æ®µçœ‹èµ·æ¥æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„ç´¢å¼•ã€‚(è¿™ä¸ªå·§å¦™çš„è®¾è®¡æ˜¯æŠ„è¢­Luceneçš„ã€‚)
æ‰€ä»¥ï¼Œç›¸äº¤äºæ¯æ¬¡æ·»åŠ æ–‡æ¡£éƒ½é‡å†™æ•´ä¸ªindexï¼Œæ‹¥æœ‰å‡ ä¸ªæœç´¢æ®µå°†ä¼šä½¿æœç´¢æ›´åŠ é«˜æ•ˆã€‚ä½†æ˜¯ï¼Œåœ¨æ£€ç´¢æŸäº›å†…å®¹æ—¶ï¼Œå¤šæ®µåŒæ—¶æ£€ç´¢å¯èƒ½ä¼šå˜æ…¢ï¼Œå¹¶ä¸”æ®µè¶Šå¤šæ£€ç´¢è¶Šæ…¢ã€‚å› æ­¤ï¼Œwhooshé‡‡ç”¨äº†ä¸€ç§ç®—æ³•ï¼Œåœ¨ä½ è°ƒç”¨commit()çš„æ—¶å€™ï¼Œç®—æ³•ä¼šæ£€æŸ¥è¾ƒå°çš„æ®µï¼Œå°†æäº¤çš„å†…å®¹åˆå¹¶åˆ°å°çš„æ®µä¸­ï¼Œä½¿å¾—æ®µçš„ä¸ªæ•°å°‘äº›ã€æ®µçš„å¤§å°å¤§äº›ã€‚
æäº¤æ—¶ï¼Œä½¿ç”¨merge=Falseé¿å…whooshè‡ªåŠ¨æ•´åˆæ®µï¼š
1  writer.commit(merge=False)   è€Œï¼Œè¦åˆå¹¶æ‰€æœ‰æ®µï¼Œå°†indexä¼˜åŒ–ä¸ºå•ä¸€çš„æ®µï¼Œè¯·ä½¿ç”¨optimize=Trueï¼š
1  writer.commit(optimize=True)   ç”±äºä¼˜åŒ–ä¼šé‡å†™indexä¸­çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å¤§å‹indexä¸­ä¼šå¾ˆæ…¢ã€‚é€šå¸¸ï¼Œæœ€å¥½è¿˜æ˜¯ä¾é whooshçš„ç®—æ³•ï¼Œè€Œä¸æ˜¯ä¸€ç›´ä½¿ç”¨ä¼˜åŒ–åŠŸèƒ½ã€‚
ï¼ˆIndexå¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªoptmize()æ–¹æ³•å¯ä»¥ç”¨æ¥ä¼˜åŒ–indexï¼ˆåˆå¹¶ä¸ºå•ä¸€æ®µï¼‰ã€‚å®ƒä»…ä»…åˆ›å»ºä¸€ä¸ªwriterå¹¶è°ƒç”¨commit(optimize=True)ã€‚ï¼‰
å¦‚æœæƒ³è¦æ›´å¥½åœ°æ§åˆ¶åˆå¹¶æ®µï¼Œä½ å¯ä»¥åˆ¶å®šè‡ªå·±çš„åˆå¹¶ç­–ç•¥ï¼Œå¹¶ä¸”åœ¨commit()ä¸­æŒ‡å®šå®ƒã€‚å‚è§whoosh.writingæ¨¡å—ä¸­NO_MERGEã€MERGE_SMALLä»¥åŠOPTIMIZEçš„å®ç°ã€‚
Deleting documents ä½ å¯ä»¥ä½¿ç”¨IndexWriterå¯¹è±¡æä¾›çš„å¦‚ä¸‹æ–¹æ³•åˆ é™¤æ–‡æ¡£ï¼Œç„¶åè°ƒç”¨commit()æäº¤ä¿®æ”¹ã€‚
 delete_document(docnum)
é€šè¿‡å†…éƒ¨çš„æ–‡æ¡£ç¼–å·åˆ é™¤æ–‡æ¡£ï¼Œä½çº§æ–¹æ³•ã€‚ is_deleted(docnum)
å¦‚æœæŒ‡å®šç¼–å·çš„æ–‡æ¡£å·²ç»è¢«åˆ é™¤ï¼Œè¿”å›Trueï¼Œä½çº§æ–¹æ³•ï¼ŸåŸºç¡€æ–¹æ³•ï¼ŸåŸºå±‚æ–¹æ³•ï¼Ÿlow-levelã€‚ delete_by_term(fieldname, termtext)
åˆ é™¤æŒ‡å®šå­—æ®µåä¸­åŒ…å«æŒ‡å®šå†…å®¹çš„æ–‡æ¡£ã€‚é€šå¸¸ç”¨äºIDæˆ–KEYWORDå­—æ®µã€‚ delete_by_query(query)
åˆ é™¤æ‰€æœ‰ä¸queryåŒ¹é…çš„æ–‡æ¡£  1 2 3 4  # Delete document by its path -- this field must be indexed ix.delete_by_term(&amp;#39;path&amp;#39;, u&amp;#39;/a/b/c&amp;#39;) # Save the deletion to disk ix.commit()   åœ¨filedbåå°ï¼Œâ€œåˆ é™¤â€æ–‡æ¡£ä»…ä»…æ˜¯æŠŠæ–‡æ¡£çš„ç¼–å·æ·»åŠ åˆ°å·²åˆ æ–‡æ¡£åˆ—è¡¨ä¸­ï¼Œè¿™ä¸ªåˆ—è¡¨ä»ç„¶å­˜å‚¨åœ¨indexä¸­ã€‚å½“æ£€ç´¢indexæ—¶ï¼ŒwhooshçŸ¥é“æ£€ç´¢ç»“æœä¸­ä¸éœ€è¦è¿”å›å·²ç»åˆ é™¤çš„æ–‡æ¡£ã€‚ç„¶è€Œï¼Œæ–‡æ¡£çš„å†…å®¹ä¾æ—§å‚¨å­˜åœ¨indexä¸­ï¼ˆï¼Œåªæ˜¯å…³äºæ–‡æ¡£çš„ä¸€äº›ç»Ÿè®¡ä¿¡æ¯ä¸å†æ›´æ–°ï¼‰ï¼Œç›´åˆ°åˆå¹¶åŒ…å«å·²åˆ æ–‡æ¡£çš„æ®µã€‚ï¼ˆå› ä¸ºï¼Œç«‹å³ä»indexä¸­åˆ é™¤æ–‡æ¡£ä¼šæ¶‰åŠåˆ°é‡å†™ç£ç›˜ä¸Šçš„æ•´ä¸ªindexï¼Œè¿™ä¼šéå¸¸ä½æ•ˆã€‚ï¼‰
Updating documents å¦‚æœä½ æƒ³æ›¿æ¢æ–‡æ¡£ï¼Œå¯ä»¥åˆ é™¤æ—§æ–‡æ¡£ï¼Œå†æ·»åŠ æ–°çš„æ–‡æ¡£ã€‚æˆ–è€…ï¼Œä½¿ç”¨IndexWriter.update_documentè¿›è¡Œè¿™ä¸€æ­¥æ“ä½œã€‚
ä½¿ç”¨update_documentï¼Œä½ å¿…é¡»åœ¨schemaä¸­æ ‡è®°è‡³å°‘ä¸€ä¸ªå­—æ®µä¸ºâ€œuniqueâ€ã€‚whooshä¼šä½¿ç”¨â€œuniqueâ€å­—æ®µçš„å†…å®¹å»å¯»æ‰¾éœ€è¦åˆ é™¤çš„æ–‡æ¡£ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  from whoosh.fields import Schema, ID, TEXT schema = Schema(path = ID(unique=True), content=TEXT) ix = index.create_in(&amp;#34;index&amp;#34;) writer = ix.writer() writer.add_document(path=u&amp;#34;/a&amp;#34;, content=u&amp;#34;The first document&amp;#34;) writer.add_document(path=u&amp;#34;/b&amp;#34;, content=u&amp;#34;The second document&amp;#34;) writer.commit() writer = ix.writer() # Because &amp;#34;path&amp;#34; is marked as unique, calling update_document with path=&amp;#34;/a&amp;#34; # will delete any existing documents where the &amp;#34;path&amp;#34; field contains &amp;#34;/a&amp;#34;. writer.update_document(path=u&amp;#34;/a&amp;#34;, content=&amp;#34;Replacement for the first document&amp;#34;) writer.commit()   â€œuniqueâ€å­—æ®µå¿…é¡»æ˜¯è¢«ç´¢å¼•çš„ã€‚
å¦‚æœéœ€è¦æ›´æ–°çš„æ–‡æ¡£ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆupdate_documentçš„ä½œç”¨å°†å’Œadd_documentç›¸ä¼¼ã€‚
â€œuniqueâ€å’Œundate_documentä»…ä»…æ˜¯åˆ é™¤å’Œæ·»åŠ çš„ä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚whooshæœ¬èº«æ²¡æœ‰uniqueæ ‡å¿—ç¬¦çš„æ¦‚å¿µï¼Œå½“ä½ ä½¿ç”¨add_documentæ—¶å¹¶ä¸èƒ½ä¿è¯å”¯ä¸€æ€§ã€‚
Incremental indexing ç´¢å¼•ä¸€ä¸ªæ–‡æ¡£é›†åˆçš„ç¼–ç¨‹æ–¹å¼é€šå¸¸æœ‰ä¸¤ç§ï¼š
ä¸€ç§æ˜¯ä»å¤´ç´¢å¼•æ‰€æœ‰æ–‡æ¡£ï¼›å¦ä¸€ç§æ˜¯åªæ›´æ–°æ”¹å˜çš„æ–‡æ¡£ (leaving aside web applications where you need to add/update documents according to user actions)ã€‚
ç¬¬ä¸€ç§æ–¹å¼å¾ˆç®€å•ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  import os.path from whoosh import index from whoosh.fields import Schema, ID, TEXT def clean_index(dirname): # Always create the index from scratch ix = index.create_in(dirname, schema=get_schema()) writer = ix.writer() # Assume we have a function that gathers the filenames of the # documents to be indexed for path in my_docs(): add_doc(writer, path) writer.commit() def get_schema() return Schema(path=ID(unique=True, stored=True), content=TEXT) def add_doc(writer, path): fileobj = open(path, &amp;#34;rb&amp;#34;) content = fileobj.read() fileobj.close() writer.add_document(path=path, content=content)   å¯¹äºå°‘é‡çš„æ–‡æ¡£ï¼Œè¿™ç§æ–¹å¼æ˜¯è¶³å¤Ÿè¿…é€Ÿçš„ã€‚ä½†æ˜¯ï¼Œé¢å¯¹å¤§é‡æ–‡æ¡£æ—¶ï¼Œä½ å°±ä¸æƒ³ä½¿ç”¨è¿™ç§æ–¹å¼äº†ã€‚
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è®°å½•æ¯ä¸ªæ–‡æ¡£çš„æœ€è¿‘ä¿®æ”¹æ—¶é—´ï¼Œä»¥ä¾¿åœ¨å®ƒæ›´æ”¹æ—¶å¯ä»¥æ£€æŸ¥åˆ°å®ƒã€‚ç®€å•èµ·è§ï¼Œå¦‚ä¸‹çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨mtimeï¼š
1 2 3 4 5 6 7 8 9  def get_schema() return Schema(path=ID(unique=True, stored=True), time=STORED, content=TEXT) def add_doc(writer, path): fileobj = open(path, &amp;#34;rb&amp;#34;) content = fileobj.read() fileobj.close() modtime = os.path.getmtime(path) writer.add_document(path=path, content=content, time=modtime)   ç°åœ¨ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¹‹å‰çš„è„šæœ¬ï¼Œä½¿å…¶æ—¢å¯ä»¥é€‰æ‹©ä»å¤´å»ºç«‹ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥å¢é‡å»ºç«‹ç´¢å¼•ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  def index_my_docs(dirname, clean=False): if clean: clean_index(dirname) else: incremental_index(dirname) def incremental_index(dirname) ix = index.open_dir(dirname) # The set of all paths in the index indexed_paths = set() # The set of all paths we need to re-index to_index = set() with ix.searcher() as searcher: writer = ix.writer() # Loop over the stored fields in the index for fields in searcher.all_stored_fields(): indexed_path = fields[&amp;#39;path&amp;#39;] indexed_paths.add(indexed_path) if not os.path.exists(indexed_path): # This file was deleted since it was indexed writer.delete_by_term(&amp;#39;path&amp;#39;, indexed_path) else: # Check if this file was changed since it # was indexed indexed_time = fields[&amp;#39;time&amp;#39;] mtime = os.path.getmtime(indexed_path) if mtime &amp;gt; indexed_time: # The file has changed, delete it and add it to the list of # files to reindex writer.delete_by_term(&amp;#39;path&amp;#39;, indexed_path) to_index.add(indexed_path) # Loop over the files in the filesystem # Assume we have a function that gathers the filenames of the # documents to be indexed for path in my_docs(): if path in to_index or path not in indexed_paths: # This is either a file that&amp;#39;s changed, or a new file # that wasn&amp;#39;t indexed before. So index it! add_doc(writer, path) writer.commit()   incremental_indexæ–¹æ³•ä¸­ï¼š
 éå†æœ€è¿‘ç´¢å¼•çš„æ–‡æ¡£è·¯å¾„ï¼š  å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ é™¤indexä¸­çš„ç›¸å…³æ–‡æ¡£å½¢å¼ã€‚ å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œä½†æ˜¯ä¿®æ”¹è¿‡äº†ï¼Œåˆ™æŠŠå®ƒæ·»åŠ åˆ°é‡å†™åˆ—è¡¨ä¸­ã€‚ å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œæ— è®ºæœ‰æ²¡æœ‰ä¿®æ”¹ï¼ŒæŠŠå®ƒæ·»åŠ åˆ°æ‰€æœ‰çš„ç´¢å¼•è·¯å¾„ä¸­ã€‚   éå†ç£ç›˜ä¸Šçš„æ‰€æœ‰æ–‡ä»¶è·¯å¾„ï¼š  å¦‚æœæ–‡ä»¶è·¯å¾„ä¸åœ¨ç´¢å¼•ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯æ–°æ–‡ä»¶ï¼Œéœ€è¦æ·»åŠ åˆ°indexä¸­ã€‚ If a path is not in the set of all indexed paths, the file is new and we need to index it. å¦‚æœæ–‡ä»¶è·¯å¾„åœ¨é‡å†™åˆ—è¡¨ä¸­ï¼Œå°±éœ€è¦ç´¢å¼•å®ƒã€‚ If a path is in the set of paths to re-index, we need to index it. æˆ–è€…ï¼Œè·³è¿‡è¿™ä¸€æ­¥ã€‚ Otherwise, we can skip indexing the file.    Clearing the index æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨ä¸ç ´åå·²ç»å­˜åœ¨çš„readerçš„å‰æä¸‹ï¼Œé‡å¤´å»ºç«‹indexï¼š
1 2 3 4 5 6 7 8 9  from whoosh import writing with myindex.writer() as mywriter: # You can optionally add documents to the writer here # e.g. mywriter.add_document(...) # Using mergetype=CLEAR clears all existing segments so the index will # only have any documents you&amp;#39;ve added to this writer mywriter.mergetype = writing.CLEAR   æˆ–è€…ï¼Œä¸ä½¿ç”¨writerä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œç›´æ¥è°ƒç”¨commit()ï¼Œåƒè¿™æ ·ï¼š
1 2 3  mywriter = myindex.writer() # ... mywriter.commit(mergetype=writing.CLEAR)   Note
å¦‚æœä½ ä¸éœ€è¦æ‹…å¿ƒå·²ç»å­˜åœ¨çš„readerï¼Œæ›´é«˜æ•ˆçš„æ–¹å¼æ˜¯ç›´æ¥åˆ é™¤indexç›®å½•ä¸­çš„å†…å®¹ï¼Œç„¶åé‡å¯ã€‚  How to search è‹¥ä½ å·²ç»å»ºç«‹äº†ç´¢å¼•ï¼Œå¹¶ä¸”æ·»åŠ äº†æ–‡æ¡£ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ£€ç´¢è¿™äº›æ–‡æ¡£äº†ã€‚
The Searcher object é€šè¿‡è°ƒç”¨Indexå¯¹è±¡çš„searcher()è·å¾—whoosh.searching.Searcherå¯¹è±¡ï¼š
1  searcher = myindex.searcher()   </content>
    </entry>
    
     <entry>
        <title>[Tips]é¢œè‰²mark</title>
        <url>https://litmingc.github.io/post/tips/tips%E9%A2%9C%E8%89%B2mark/</url>
        <categories>
          
        </categories>
        <tags>
          
        </tags>
        <content type="html"> ä¹Ÿä¸çŸ¥é“å“ªå„¿æ¥çš„é¢œè‰²åãƒ¾(ã€‚ï¿£â–¡ï¿£)ï¾‚ã‚œã‚œã‚œ
  ç„é’ #3d3b50   é›ªé’ #b0a4e2   é¸¦é’ #434a52   é¸­åµé’ #dfeee7   ç‰™è‰² #efdeb0     æ£çº¢ #883040   ç« ä¸¹ #ee652e   æ­£ç° #94a1a9   ä¸­æ£•ç° #a9987e   çº¸æ£• #bba590   ç»‡é”¦ç° #758a8f   ç´«è—¤ç° #847f95   ç´«æ°´æ™¶ #c2a6cc  </content>
    </entry>
    
     <entry>
        <title>[Tips]ç®—æ³•å°æŠ„</title>
        <url>https://litmingc.github.io/post/tips/tips%E7%AE%97%E6%B3%95%E5%B0%8F%E6%8A%84/</url>
        <categories>
          
        </categories>
        <tags>
          
        </tags>
        <content type="html"> æ¬§å‡ é‡Œå¾—ç®—æ³•è¯æ˜ï¼ˆæœ€å¤§å…¬çº¦æ•°ï¼‰1  \(a\) æ•´é™¤ \(b\) è¡¨ç¤º\(b\%a\)ä¸º\(0\)ï¼› \(a\) é™¤ä»¥ \(b\) è¡¨ç¤º \(b/a\)ï¼›æˆ‘æ€»æŠŠé™¤å’Œé™¤ä»¥ææ··ã€‚ \(gcd(a,b)\)è¡¨ç¤º\(a\)ï¼Œ\(b\)çš„æœ€å¤§å…¬çº¦æ•°ã€‚  è¯æ˜ï¼š
è®¾\(a\)ï¼Œ\(b\) (\(a&amp;gt;b\))çš„æœ€å¤§å…¬çº¦æ•°ä¸º\(c\)ã€‚
\(\because\)å­˜åœ¨\(q,r,k_1,k_2\) ï¼Œä½¿å¾—\(\left\{ \begin{aligned}a=&amp;amp;b*q&#43;r \\ a=&amp;amp;c*k_1 \\ b=&amp;amp;c*k_2 \end{aligned}\right.\) ï¼Œ
\(\therefore r=a-bq=ck\_1-ck\_2q=c(k\_1-k\_2q)\),
åˆ\(\because b=ck_2\)
\(\therefore\)è‹¥\(k\_2\)ä¸\((k\_1-k\_2*q)\)äº’è´¨ï¼Œåˆ™\(r\)å’Œ\(b\)çš„æœ€å¤§å…¬çº¦æ•°ä¹Ÿæ˜¯\(c\)ã€‚
ä¸‹é¢è¯æ˜ï¼Œ\(k_2\)ä¸\((k_1-k_2*q)\)äº’è´¨ï¼š
å‡è®¾\(k_2\)ä¸\((k_1-k_2*q)\)ä¸äº’è´¨ï¼Œå³æœ‰å¤§äº1çš„å…¬çº¦æ•°\(m\)ï¼Œ
åˆ™å­˜åœ¨\(x\)ã€\(y\)ï¼Œä½¿å¾—\(\left\{\begin{aligned}k_2=&amp;amp;xm \\ (k_1-k_2*q)=&amp;amp;ym\end{aligned}\right.\)ï¼Œ
ä»£å…¥\(a\)ã€\(b\)ï¼Œå¾—\(\left\{\begin{aligned} a=&amp;amp;b*q&#43;r=xmc*q&#43;ymc=mc(x*q&#43;y)\\ b=&amp;amp;xmc \end{aligned}\right.\)ï¼Œ \(a\)ã€\(b\)æœ€å¤§å…¬çº¦æ•°ä¸º\(mc\),çŸ›ç›¾ã€‚
æ‰€ä»¥ï¼Œ\(k_2\)ä¸\((k_1-k_2*q)\)äº’è´¨ï¼Œ\(c\)ä¸º\(b\)ã€\(r\)çš„æœ€å¤§å…¬çº¦æ•°ã€‚ å³ï¼Œ\(gcd(a,b)=gcd(b,r)=gcd(b,a\%b)=c\)
ä»ä¸Šè¿°è¯æ˜ä¸­ä¸éš¾å‘ç°aã€bã€rï¼ˆ\(a\%b\)ï¼‰æœ‰å…±åŒçš„æœ€å¤§å…¬çº¦æ•°ï¼Œæ‰€ä»¥ä¸æ–­å–å…¶ä¸­æœ€å°çš„ä¸¤ä¸ªæ•°ç›¸é™¤å¾—åˆ°æ›´å°çš„ä¸€ç»„æ•°ï¼Œç›´åˆ°è¿™ç»„æ•°ä¸­ä¸€ä¸ªæ•°æœ¬èº«å°±æ˜¯æœ€å¤§å…¬çº¦æ•°ï¼Œç®—æ³•ç»“æŸã€‚
 https://blog.csdn.net/weixin_43406046/article/details/84197255?depth_1-utm_source=distribute.pc_relevant.none-task&amp;amp;utm_source=distribute.pc_relevant.none-task â€œæ¬§å‡ é‡Œå¾·ç®—æ³• CSDNâ€â†©ï¸
   </content>
    </entry>
    
     <entry>
        <title>[rpi]æ ‘è“æ´¾ä½¿ç”¨v2ray</title>
        <url>https://litmingc.github.io/post/linux/%E6%A0%91%E8%8E%93%E6%B4%BE%E4%BD%BF%E7%94%A8v2ray/</url>
        <categories>
          <category>å­¦ä¹ ç¬”è®°</category><category>Linux</category>
        </categories>
        <tags>
          <tag>RaspberryPi</tag><tag>v2ray</tag>
        </tags>
        <content type="html"> æ‘˜å½•è‡ªé“¾æ¥
å®‰è£…v2ray   GitHubä¸‹è½½ç›¸åº”ç‰ˆæœ¬ã€https://github.com/v2ray/v2ray-core/releasesã€‘
æ ‘è“æ´¾4ä¸‹è½½linux-arm.zipï¼Œæ ‘è“æ´¾çš„å®˜æ–¹ç³»ç»Ÿç›®å‰(2020.03.12)è¿˜æ˜¯32ä½ã€‚
  ä¸‹è½½å®‰è£…è„šæœ¬
1  wget https://install.direct/go.sh     æ‰§è¡Œå®‰è£…è„šæœ¬
1  sudo bash go.sh --local ./v2ray-linux-arm.zip     é…ç½®v2ray
ç¼–è¾‘/etc/v2ray/config.jsonæ–‡ä»¶è¿›è¡Œé…ç½®
  v2rayçš„ä½¿ç”¨
serviceå‘½ä»¤
1 2 3 4 5  service v2ray start //å¯åŠ¨v2ray service v2ray status //æŸ¥çœ‹v2rayçŠ¶æ€ service v2ray stop //åœæ­¢v2ray     ä½¿ç”¨ä»£ç†   å®‰è£…proxychains
1  sudo apt install proxychains     é…ç½®proxychains
1  sudo vim /etc/proxychains.conf   åœ¨proxychains.confæ–‡ä»¶æœ«å°¾ä¿®æ”¹ä½ çš„socks5æœåŠ¡åœ°å€ï¼Œå¯ä»¥æŠŠsock4åˆ é™¤
[ProxyList]socks5 127.0.0.1 1080æ­¤å¤„çš„é…ç½®ä¸v2rayä¸­çš„é…ç½®å¯¹åº”ï¼Œå³portå­—æ®µï¼š
&amp;quot;inbounds&amp;quot;: [{&amp;quot;tag&amp;quot;: &amp;quot;proxy&amp;quot;,&amp;quot;port&amp;quot;: 1080,&amp;quot;listen&amp;quot;: &amp;quot;0.0.0.0&amp;quot;,&amp;quot;protocol&amp;quot;: &amp;quot;socks&amp;quot;,# ...},]  ä½¿ç”¨
åœ¨å‘½ä»¤å‰åŠ ä¸Šproxychains( æ­¤æ–¹æ³•åªèƒ½ä»£ç†TCPé“¾æ¥ï¼Œæˆ‘åªè¦TCPå°±å¤Ÿäº† )
1  proxychains curl https://www.google.com     </content>
    </entry>
    
     <entry>
        <title>[linux]ç›®å½•çš„å«ä¹‰ä¸ç›¸å…³æ“ä½œ</title>
        <url>https://litmingc.github.io/post/linux/%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E7%BB%84%E7%BB%87/</url>
        <categories>
          <category>å­¦ä¹ ç¬”è®°</category><category>Linux</category>
        </categories>
        <tags>
          <tag>ç›®å½•</tag><tag>æ–‡ä»¶ç±»å‹</tag>
        </tags>
        <content type="html"> ç›®å½•çš„ä¸€èˆ¬å«ä¹‰ æ‘˜å½•è‡ªã€é“¾æ¥ã€‘
   ä¸€çº§ç›®å½• å«ä¹‰     /bin/ ç³»ç»Ÿå‘½ä»¤ï¼Œæ™®é€šç”¨æˆ·ã€rootéƒ½å¯ä»¥æ‰§è¡Œã€‚   /boot/ ç³»ç»Ÿå¯åŠ¨ç›®å½•ï¼Œå¦‚ï¼šå†…æ ¸æ–‡ä»¶ã€å¼•å¯¼ç¨‹åºç­‰ã€‚   /dev/ è®¾å¤‡æ–‡ä»¶   /etc/ é…ç½®æ–‡ä»¶ã€‚é»˜è®¤å®‰è£…æ–¹å¼ä¸‹çš„æœåŠ¡é…ç½®æ–‡ä»¶ï¼Œå¦‚ï¼šç”¨æˆ·ä¿¡æ¯ã€å¯åŠ¨è„šæœ¬ã€å¸¸ç”¨æœåŠ¡çš„é…ç½®æ–‡ä»¶ç­‰ã€‚   /home/ å­˜æ”¾æ™®é€šç”¨æˆ·çš„ä¸»ç›®å½•   /lib/ ç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°åº“   lost&#43;found ç³»ç»Ÿæ„å¤–å´©æºƒæˆ–æ„å¤–å…³æœºæ—¶çš„æ¢å¤ç›®å½•ï¼Œä¸åŒåˆ†åŒºå¯èƒ½éƒ½æœ‰æ­¤ç›®å½•   /media/ æŒ‚è½½ç›®å½•ï¼Œå»ºè®®å…‰ç›˜ç­‰åª’ä½“è®¾å¤‡   /mnt/ æŒ‚è½½ç›®å½•ï¼ŒæŒ‚è½½é¢å¤–è®¾å¤‡   /misc/ æŒ‚è½½ç›®å½•ï¼Œå»ºè®®æŒ‚è½½NFSæœåŠ¡çš„å…±äº«ç›®å½•ã€‚ï¼ˆæœ‰çš„ç³»ç»Ÿæ— æ­¤ç›®å½•ï¼ŒæŒ‚è½½ç›®å½•çš„ç±»åˆ«ä¸æ˜¯å¿…é¡»çš„ï¼‰   /opt/ ç¬¬ä¸‰æ–¹è½¯ä»¶å®‰è£…ç›®å½•ã€‚   /proc/ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚ä¿å­˜ç³»ç»Ÿå†…æ ¸è¿›ç¨‹ã€å¤–éƒ¨è®¾å¤‡ã€ç½‘ç»œçŠ¶æ€ç­‰ã€‚&amp;lt;br &amp;gt;æ•°æ®åœ¨å†…å­˜ä¸­ã€‚å› æ­¤ï¼Œåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­å†™å…¥æ•°æ®ä¼šä½¿å¾—å¯ç”¨å†…å­˜è¶Šæ¥è¶Šå°ï¼Œå…¶å®ƒå­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ–‡ä»¶å¤¹åŒç†ã€‚   /root/ rootçš„ä¸»ç›®å½•   /run/ ç³»ç»Ÿå¯åŠ¨åçš„ä¸€äº›è¿è¡Œæ•°æ®ï¼Œä¸´æ—¶çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ•°æ®ä¸åœ¨ç¡¬ç›˜ä¸­ã€‚   /sbin/ ä¸ç³»ç»Ÿç¯å¢ƒè®¾ç½®ç›¸å…³çš„å‘½ä»¤ï¼Œåªæœ‰rootå¯ä»¥ä½¿ç”¨è¿™äº›å‘½ä»¤è¿›è¡Œç¯å¢ƒè®¾ç½®ï¼Œæ™®é€šç”¨æˆ·å¯ä»¥æŸ¥çœ‹éƒ¨åˆ†å‘½ä»¤   /usr/ Unix Software Resourceï¼Œç³»ç»Ÿè½¯ä»¶èµ„æºã€‚   /srv/ éƒ¨åˆ†ç³»ç»ŸæœåŠ¡å¯åŠ¨åçš„æ•°æ®ç›®å½•   /sys/ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå¤šä¸ºå†…æ ¸ç›¸å…³ã€‚   /tmp/ ä¸´æ—¶ç›®å½•ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®å’Œå†™å…¥ã€‚   /var/ å‚¨å­˜åŠ¨æ€æ•°æ®ï¼Œå¦‚ï¼šç¼“å­˜ã€æ—¥å¿—ç­‰ã€‚    /usr/ç›®å½•  /usr/bin: ä¸ç³»ç»Ÿå¯åŠ¨æ— å…³çš„ç³»ç»Ÿå‘½ä»¤ã€‚æ™®é€šç”¨æˆ·å’Œrootç”¨æˆ·å¯æ‰§è¡Œã€‚ /usr/sbin: å­˜æ”¾æ ¹æ–‡ä»¶ç³»ç»Ÿä¸å¿…è¦çš„ç³»ç»Ÿç®¡ç†å‘½ä»¤ï¼Œå¦‚å¤šæ•°æœåŠ¡ç¨‹åºã€‚åªæœ‰rootç”¨æˆ·å¯ä»¥ä½¿ç”¨ã€‚ /usr/lib: åº”ç”¨ç¨‹åºè°ƒç”¨çš„ç¨‹åºåº“ã€‚ /usr/local: æ‰‹å·¥å®‰è£…çš„è½¯ä»¶ä¿å­˜ä½ç½®ã€‚ä¸€èˆ¬å»ºè®®æºç åŒ…è½¯ä»¶å®‰è£…åœ¨è¿™ä¸ªä½ç½®ã€‚ /usr/share: åº”ç”¨ç¨‹åºçš„èµ„æºæ–‡ä»¶ä¿å­˜ä½ç½®ï¼Œå¦‚å¸®åŠ©æ–‡æ¡£ã€è¯´æ˜æ–‡æ¡£å’Œå­—ä½“ç›®å½•. /usr/src: æºç åŒ…ä¿å­˜ä½ç½®ï¼Œæ‰‹å·¥ä¸‹è½½çš„æºç åŒ…å’Œå†…æ ¸æºç åŒ…éƒ½å¯ä»¥ä¿å­˜åˆ°è¿™é‡Œã€‚ /usr/include: C/C&#43;&#43;ç­‰ç¼–ç¨‹è¯­è¨€çš„æ”¾ç½®ç›®å½•ã€‚  /var/ç›®å½•  /var/lib: ç¨‹åºè¿è¡Œä¸­éœ€è¦è°ƒç”¨æˆ–æ”¹å˜çš„æ•°æ®ä¿å­˜ä½ç½®ã€‚å¦‚,MySQLçš„æ•°æ®åº“ä¿å­˜åœ¨/var/lib/mysql/ç›®å½•ä¸­ã€‚ /var/log: ç™»é™†æ–‡ä»¶æ”¾ç½®çš„ç›®å½•ï¼Œå…¶ä¸­æ‰€åŒ…å«æ¯”è¾ƒé‡è¦çš„æ–‡ä»¶å¦‚/var/log/messages, /var/log/wtmpã€‚ /var/run/: ä¸€äº›æœåŠ¡å’Œç¨‹åºè¿è¡Œåï¼Œå…¶PIDä¿å­˜ä½ç½®ã€‚ /var/www/: ç³»ç»Ÿçš„åŒ…å·¥å…·ï¼ˆyumï¼Œaptï¼‰å®‰è£…çš„Apacheç­‰ç¨‹åºçš„ç½‘é¡µä¸»ç›®å½•ã€‚ /var/tmp: ä¸€äº›åº”ç”¨ç¨‹åºåœ¨å®‰è£…æˆ–æ‰§è¡Œæ—¶ï¼Œéœ€è¦åœ¨é‡å¯åä½¿ç”¨çš„æŸäº›æ–‡ä»¶ï¼Œæ­¤ç›®å½•èƒ½å°†è¯¥ç±»æ–‡ä»¶æš‚æ—¶å­˜æ”¾èµ·æ¥ï¼Œå®Œæˆåå†è¡Œåˆ é™¤ã€‚  éƒ¨åˆ†è½¯ä»¶çš„ç›®å½•è¯´æ˜ python æ‘˜å½•è‡ªã€é“¾æ¥ã€‘ï¼Œå¦‚ä¸‹ï¼š
 pythonçš„å¯æ‰§è¡Œæ–‡ä»¶çš„ç›®å½•ä¸€èˆ¬åœ¨ /usr/binä¸‹ï¼Œé€šè¿‡apt-getå®‰è£…çš„åº”ç”¨ä¸€èˆ¬ä¼šåœ¨è¿™ä¸ªç›®å½•
è‡ªè¡Œå®‰è£…çš„ä¸€èˆ¬åœ¨/usr/local/binä¸‹
python3.5çš„è‡ªå¸¦åº“ç›®å½•åœ¨
/usr/lib/python3/dist-packages
/usr/lib/python3.5/
python2.7çš„è‡ªå¸¦åº“ç›®å½•åœ¨
/usr/lib/python2.6/dist-packages
/usr/lib/python2.7/
é€šè¿‡pipå®‰è£…çš„æ¨¡å—ç›®å½•åœ¨
~/.local/lib/python3.5/site-packages
~/.local/lib/python2.7/site-packages
æˆ–è€…
/usr/local/lib/python2.7/dist-packages
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œsodawatererã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚ åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/sodawaterer/article/details/72795468
 æ–‡ä»¶ç±»å‹ æ–‡ä»¶ç±»å‹çš„ç¬¦å·æ ‡è¯†ï¼ˆls -lå‘½ä»¤ä¸‹ï¼‰
 - æ™®é€šæ–‡ä»¶ d ç›®å½• b å—è®¾å¤‡æ–‡ä»¶ï¼šä¿å­˜å¤§å—æ•°æ®çš„è®¾å¤‡ï¼Œæ¯”å¦‚ç¡¬ç›˜ã€‚ s å¥—æ¥å­—æ–‡ä»¶ï¼šç½‘ç»œæ•°æ®è¿æ¥è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å¥—æ¥å­—è¿›è¡Œæ•°æ®é€šä¿¡ã€‚ p ç®¡é“æ–‡ä»¶ï¼šç”¨äºè§£å†³å¤šä¸ªç¨‹åºåŒæ—¶å­˜å–åŒä¸€ä¸ªæ–‡ä»¶æ‰€é€ æˆçš„é”™è¯¯ã€‚ l é“¾æ¥æ–‡ä»¶ï¼šå¿«æ·æ–¹å¼ c å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼šé”®ç›˜ã€é¼ æ ‡ç­‰ã€‚  </content>
    </entry>
    
     <entry>
        <title>[Tips]Raspberrypiç›¸å…³</title>
        <url>https://litmingc.github.io/post/tips/raspberrypi%E7%9B%B8%E5%85%B3/</url>
        <categories>
          <category>å­¦ä¹ ç¬”è®°</category><category>Linux</category>
        </categories>
        <tags>
          <tag>æŒ‚è½½ç¡¬ç›˜</tag><tag>berryconda</tag><tag>RaspberryPi</tag>
        </tags>
        <content type="html"> å¸¸ç”¨åˆå§‹åŒ–é…ç½® æ–°çƒ§å¥½ç³»ç»Ÿä¹‹åï¼Œæˆ‘å¸¸åšçš„é…ç½®ã€‚åˆ—å‡ºæ¥åšä¸ªå¤‡å¿˜ã€‚
 ä¿®æ”¹ä¸»æœºå 1  sudo vim /etc/hostname    ä¿®æ”¹å¯†ç  ä¿®æ”¹hosts ä¸»è¦æ˜¯æ·»åŠ 127.0.0.1å¯¹å‰é¢ä¿®æ”¹çš„ä¸»æœºåçš„æ˜ å°„ 1  sudo vim /etc/hosts    v2rayé…ç½® aria2é…ç½®* sambaé…ç½® dockeré…ç½®* æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜  æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜ NTFS  å®‰è£…ntfs-3g 1  sudo apt-get install ntfs-3g    æŸ¥çœ‹è®¾å¤‡ 1  fdisk -l    å‡†å¤‡æŒ‚è½½ç›®å½• 1  sudo mkdir /mnt/dir    æš‚æ—¶æŒ‚è½½ç¡¬ç›˜ 1  ntfs-3g /dev/sda1 /mnt/dir    å¼€æœºè‡ªåŠ¨æŒ‚è½½
ä¿®æ”¹æ–‡ä»¶ /etc/fstab
æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 1  /dev/sda1 /mnt/dir ntfs utf8,uid=1000,gid=1000,umask=022 0 0     berryconda  ç¯å¢ƒï¼šraspbian armv7l    é—®é¢˜ï¼šç½‘ç»œä¸ä½³ï¼Œä½¿ç”¨conda insatllæ— æ³•ä¸‹è½½openssl
è§£å†³ï¼š
 ä½¿ç”¨wgetä¸‹è½½ç›®æ ‡ conda insatll --use-local opensslæœ¬åœ°æ–‡ä»¶å®‰è£…    é—®é¢˜ï¼šconda insatll --use-local opensslæœ¬åœ°æ–‡ä»¶å®‰è£…å‡ºé”™
é”™è¯¯ä¿¡æ¯ï¼šCondaError: EOFError(&#39;Compressed file ended before the end-of-stream marker was reached&#39;,)
å¯èƒ½çš„åŸå› ï¼šberryconda/pkgs/å­˜åœ¨æœªæ­£ç¡®ä¸‹è½½çš„æ–‡ä»¶ï¼Œå®‰è£…æ—¶å¯èƒ½å¹¶æ²¡æœ‰ç”¨æŒ‡å®šæœ¬åœ°æ–‡ä»¶ï¼Œè€Œæ˜¯ç”¨äº†ç¼“å­˜çš„æ–‡ä»¶ï¼Ÿ
è§£å†³ï¼š åˆ é™¤berryconda/pkgs/ç›®å½•ä¸‹çš„ç›¸å…³æ–‡ä»¶ï¼Œå†æ¬¡å®‰è£…
  ä¿®æ”¹ä¸»æœºååï¼Œsudoæœ‰å¼‚å¸¸æç¤º  ç¯å¢ƒï¼šLinux raspberrypi 4.19.88-OPENFANS&#43;20191229-v8 aarch64   é—®é¢˜ï¼šåœ¨cockpitä¸­ä¿®æ”¹ä¸»æœºåï¼ŒsudoåŠŸèƒ½æ­£å¸¸ï¼Œä½†æœ‰æç¤ºä¿¡æ¯
ä¿¡æ¯ï¼šsudo: unable to resolve host raspberrypi: Name or service not known
è§£å†³ï¼š
ä¿®æ”¹/etc/hostsæ–‡ä»¶ï¼Œå°†127.0.0.1æ˜ å°„åˆ°å½“å‰ä¸»æœºåã€‚ä¸»æœºåæ‰€åœ¨æ–‡ä»¶ä¸º/etc/hostnameã€‚  å®‰è£…Aria2  ç¯å¢ƒï¼šLinux raspberrypi 4.19.88-OPENFANS&#43;20191229-v8 aarch64   ä¸‹è½½å¯¹åº”çš„buildåŒ…
ã€ä¸‹è½½åœ°å€ã€‘ armä¼¼ä¹æ²¡æœ‰ï¼Œå¯ä»¥ä½¿ç”¨apt-get install aria2å®‰è£…ï¼Œä½†ç‰ˆæœ¬å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ã€‚  sambaå®‰è£… 1  sudo apt-get install samba samba-common-bin   é…ç½®æ–‡ä»¶
[public]comment = Public Storagepath = /home/piread only = no#ä»»ä½•äººéƒ½å…·æœ‰äº†è®¿é—®ä¿®æ”¹çš„æƒé™#å› ä¸ºæ˜¯å…¬å…±æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥ç»™äº†æ‰€æœ‰ç”¨æˆ·å…¨éƒ¨æƒé™ï¼Œå¯ä»¥è‡ªå®šä¹‰create mask = 0777#æ–°åˆ›å»ºæ–‡ä»¶çš„é»˜è®¤å±æ€§directory mask = 0777#æ–°åˆ›å»ºæ–‡ä»¶å¤¹çš„é»˜è®¤å±æ€§guest ok = yes#é»˜è®¤çš„è®¿é—®ç”¨æˆ·åä¸ºguestbrowseable = yesæ›´å¤šé…ç½®é¡¹1
 https://blog.csdn.net/qq_39626154/article/details/85335103&amp;#160;&amp;#x21a9;&amp;#xfe0e;
   </content>
    </entry>
    
     <entry>
        <title>[linux]å¸¸è§å‘½ä»¤</title>
        <url>https://litmingc.github.io/post/linux/%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4/</url>
        <categories>
          <category>å­¦ä¹ ç¬”è®°</category><category>Linux</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> linuxä½¿ç”¨è¿‡ç¨‹ä¸­è‡ªå·±ä¼šç”¨åˆ°çš„ä¸€äº›â€œå°â€å‘½ä»¤
  uname
æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä»¥åŠç³»ç»Ÿç‰ˆæœ¬
å‚æ•°ï¼š
 -aæˆ–&amp;ndash;all æ˜¾ç¤ºå…¨éƒ¨çš„ä¿¡æ¯ã€‚ -mæˆ–&amp;ndash;machine æ˜¾ç¤ºç”µè„‘ç±»å‹ã€‚ -næˆ–-nodename æ˜¾ç¤ºåœ¨ç½‘ç»œä¸Šçš„ä¸»æœºåç§°ã€‚ -ræˆ–&amp;ndash;release æ˜¾ç¤ºæ“ä½œç³»ç»Ÿçš„å‘è¡Œç¼–å·ã€‚ -sæˆ–&amp;ndash;sysname æ˜¾ç¤ºæ“ä½œç³»ç»Ÿåç§°ã€‚ -v æ˜¾ç¤ºæ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚    getconf LONG_BIT
çœ‹çœ‹ç³»ç»Ÿæ˜¯32ä½è¿˜æ˜¯64ä½
  uptime
æŸ¥çœ‹è´Ÿè½½ä¿¡æ¯
  free
æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­å†…å­˜ä½¿ç”¨é‡ä¿¡æ¯
  </content>
    </entry>
    
     <entry>
        <title>[Tips]Hugoç›¸å…³</title>
        <url>https://litmingc.github.io/post/tips/hugo%E7%9B%B8%E5%85%B3/</url>
        <categories>
          <category>Hugo</category>
        </categories>
        <tags>
          <tag>MathJax</tag>
        </tags>
        <content type="html"> ç¯å¢ƒï¼š
 hugo_extended_0.55.6_Windows-64bit    è¡¨è¾¾æ•°å­¦å…¬å¼
  hugoä¸»é¢˜ï¼šNext
  æ–¹æ¡ˆä¸€ï¼š å…ˆä¸Šå‚è€ƒï¼š
MathJax Support
åœ¨Hugoä¸­ä½¿ç”¨MathJax
ä¿®æ”¹å…¬å¼æ˜¾ç¤ºçš„å¤§å°ï¼š
æ–¹æ³•ä¸€ï¼šä¿®æ”¹ä¸Šè¿°å‚è€ƒä¸­çš„styleã€‚
æ–¹æ³•äºŒï¼šä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š
1 2 3 4 5  &amp;lt;script type=&amp;#34;text/x-mathjax-config&amp;#34;&amp;gt; MathJax.Hub.Config({ &amp;#34;HTML-CSS&amp;#34;: { scale: 175} }); &amp;lt;/script&amp;gt;   ä½†æ˜¯ï¼ŒMathJaxåœ¨æ¸²æŸ“çš„æ—¶å€™ï¼Œé€Ÿåº¦æœ‰äº›æ…¢ã€‚æ€»è¦ç­‰å¾ˆä¹…ã€‚ åˆå› ä¸ºå¬è¯´KaTeXæŒºå¿«çš„ï¼ˆç”¨äº†ä¸€ä¸‹ï¼Œè¿˜çœŸçš„ï¼‰ã€‚
å‚è€ƒä¸Šè¿°æ”¹æ³•ï¼ŒKaTeXçš„é…ç½®å¦‚ä¸‹ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  &amp;lt;link rel=&amp;#34;stylesheet&amp;#34; href=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css&amp;#34; integrity=&amp;#34;sha384-9tPv11A&#43;glH/on/wEu99NVwDPwkMQESOocs/ZGXPoIiLE8MU/qkqUcZ3zzL&#43;6DuH&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt; &amp;lt;script src=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.js&amp;#34; integrity=&amp;#34;sha384-U8Vrjwb8fuHMt6ewaCy8uqeUXv4oitYACKdB0VziCerzt011iQ/0TqlSlv8MReCm&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/contrib/auto-render.min.js&amp;#34; integrity=&amp;#34;sha384-aGfk5kvhIq5x1x5YdvCp4upKZYnA8ckafviDpmWEKp4afOZEqOli7gqSnh8I6enH&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; renderMathInElement(document.body, { delimiters: [ {left: &amp;#34;$$&amp;#34;, right: &amp;#34;$$&amp;#34;, display: true}, {left: &amp;#34;$&amp;#34;, right: &amp;#34;$&amp;#34;, display: false}, ], ignoredTags: [&amp;#39;script&amp;#39;, &amp;#39;noscript&amp;#39;, &amp;#39;style&amp;#39;, &amp;#39;textarea&amp;#39;, &amp;#39;pre&amp;#39;], } ); var all=document.getElementsByClassName(&amp;#39;katex&amp;#39;),i; for(i = 0; i &amp;lt; all.length; i &#43;= 1) { var tmp=all[i].parentNode; for(;tmp.nodeName==&amp;#39;SPAN&amp;#39;;tmp=tmp.parentNode); if(tmp.nodeName == &amp;#39;CODE&amp;#39;) tmp.className &#43;= &amp;#39; hasKatex&amp;#39;; } &amp;lt;/script&amp;gt; &amp;lt;style&amp;gt; code.hasKatex { font: inherit; font-size: 110%; background: inherit; border: inherit; color: #515151; } &amp;lt;/style&amp;gt;   å¦‚åŒå‚è€ƒæ•™ç¨‹12æ‰€è¯´çš„ä¸€æ ·ï¼Œå…¬å¼ä¸­ä½¿ç”¨_ç­‰ç¬¦å·ä¼šå’ŒMarkdownå†²çªé€ æˆæ¸²æŸ“å¤±è´¥ï¼Œä¸Šè¿°è§£å†³æ–¹æ³•æ˜¯åœ¨å…¬å¼å¤–åŠ ä¸€å¯¹``è§£å†³ï¼ŒåŒæ—¶è°ƒæ•´å…¬å¼çˆ¶å±‚codeæ ‡ç­¾çš„æ ·å¼ï¼ˆå› ä¸ºåŸå…ˆçš„codeçš„æ ·å¼èƒŒæ™¯æ˜¯ç°çš„ï¼‰ã€‚
  æ–¹æ¡ˆäºŒ
ä¸Šä¸€ç§æ–¹æ¡ˆéœ€è¦``æŠŠæ•°å­¦å…¬å¼æ‹¬èµ·æ¥ï¼Œå› è€Œåœ¨ä½¿ç”¨vscodeç­‰ç¼–è¾‘æ–‡æ¡£æ—¶éå¸¸ä¸ä¾¿äºé¢„è§ˆã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨æ–¹æ¡ˆä¸€çš„å‡ å¤©åï¼Œæˆ‘åˆæ‰¾åˆ°äº†æ–¹æ¡ˆäºŒã€‚
å…ˆä¸Šå‚è€ƒ3
é¦–å…ˆï¼Œå’Œæ–¹æ¡ˆä¸€ä¸€æ ·å¼•å…¥KaTeXçš„ä»£ç å—ã€‚å› ä¸ºä¸å¥—ç”¨codeå—ï¼Œä¹Ÿä¸éœ€è¦è°ƒæ•´codeå—çš„æ ·å¼äº†ï¼Œæ‰€ä»¥ç›´æ¥ç”¨å®˜æ–¹é»˜è®¤çš„ç¤ºä¾‹å°±è¡Œäº†ï¼š
1 2 3 4 5 6 7 8 9 10  &amp;lt;link rel=&amp;#34;stylesheet&amp;#34; href=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css&amp;#34; integrity=&amp;#34;sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/&#43;DiW/UqRcLbRjq&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt; &amp;lt;script defer src=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js&amp;#34; integrity=&amp;#34;sha384-y23I5Q6l&#43;B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd&#43;qj&#43;o24G5ZU2zJz&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script defer src=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js&amp;#34; integrity=&amp;#34;sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; document.addEventListener(&amp;#34;DOMContentLoaded&amp;#34;, function() { renderMathInElement(document.body, { // ...options...  }); }); &amp;lt;/script&amp;gt;   ç„¶åï¼Œå®‰è£…pandocã€‚
æœ€åï¼Œåœ¨MarkDownæ–‡ä»¶çš„front-matteréƒ¨åˆ†åŠ ä¸Šmarkup: &amp;quot;pandoc&amp;quot;å³å¯ã€‚
&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;æ‰‹å·¥åˆ†å‰²çº¿&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;&amp;laquo;
è¿™é‡Œè¿˜æœ‰ä¸€äº›é—®é¢˜ã€‚å…¶ä¸­ï¼Œæ— æ³•åƒæ–¹æ¡ˆä¸€é‚£åƒé…ç½®delimiters: é€‰é¡¹ã€‚ä¸€æ—¦é…ç½®äº†å°±æ— æ³•æ¸²æŸ“ï¼Œæˆ‘çŒœæ˜¯ä¸æ˜¯pandocå’Œè¿™ä¸ªå†²çªï¼Ÿ è€Œä¸”ï¼Œfront-matteréƒ¨åˆ†åŠ ä¸Šmarkup: &amp;quot;pandoc&amp;quot;åä¸èƒ½æ¸²æŸ“&amp;lt;details&amp;gt;æ ‡ç­¾äº†ï¼Œå¯èƒ½éœ€è¦pandocé¢å¤–çš„è®¾ç½®å§ã€‚
äºæ˜¯ï¼Œä½¿ç”¨æ–¹æ¡ˆäºŒå°±æ— æ³•ç”¨ä¸€äº›htmlæ ‡ç­¾äº†ï¼Œä½¿ç”¨æ–¹æ¡ˆä¸€åˆä¸ä¾¿äºç¼–è¾‘å™¨é¢„è§ˆã€‚ä½†æ˜¯ä¸ç”¨çº ç»“
å› ä¸ºå°å­©å­æ‰åšé€‰æ‹©ï¼Œè€Œæˆ‘å¯ä»¥å…¨éƒ½è¦ï¼š
æˆ‘ç”¨äº†å¦‚ä¸‹çš„å‚»ç“œæ–¹æ³•ï¼Œé€šè¿‡æ¡ä»¶åˆ¤æ–­ï¼Œç»™ä¸åŒé¡µé¢æ·»åŠ ä¸åŒçš„ä»£ç ã€‚
å†…å¿ƒOSï¼šä»€ä¹ˆå¦–é­”é¬¼æ€ªçš„æ–¹æ³•å•Šï¼ãƒŸ(ï¾‰ã‚œĞ´ã‚œ)ï¾‰æ‰“ä½ å“¦
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42  {{- if (and .IsPage (eq .Params.markup &amp;#34;pandoc&amp;#34; ) ) -}} &amp;lt;!-- æ–¹æ¡ˆäºŒ --&amp;gt; &amp;lt;link rel=&amp;#34;stylesheet&amp;#34; href=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css&amp;#34; integrity=&amp;#34;sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/&#43;DiW/UqRcLbRjq&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt; &amp;lt;script defer src=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js&amp;#34; integrity=&amp;#34;sha384-y23I5Q6l&#43;B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd&#43;qj&#43;o24G5ZU2zJz&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script defer src=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js&amp;#34; integrity=&amp;#34;sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; document.addEventListener(&amp;#34;DOMContentLoaded&amp;#34;, function() { renderMathInElement(document.body, { // ...options...  }); }); &amp;lt;/script&amp;gt; {{- else if eq .Site.Params.Math &amp;#34;katex&amp;#34; -}} &amp;lt;!-- æ–¹æ¡ˆå…¶å®ƒ --&amp;gt; &amp;lt;link rel=&amp;#34;stylesheet&amp;#34; href=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css&amp;#34; integrity=&amp;#34;sha384-9tPv11A&#43;glH/on/wEu99NVwDPwkMQESOocs/ZGXPoIiLE8MU/qkqUcZ3zzL&#43;6DuH&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt; &amp;lt;script src=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.js&amp;#34; integrity=&amp;#34;sha384-U8Vrjwb8fuHMt6ewaCy8uqeUXv4oitYACKdB0VziCerzt011iQ/0TqlSlv8MReCm&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script src=&amp;#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/contrib/auto-render.min.js&amp;#34; integrity=&amp;#34;sha384-aGfk5kvhIq5x1x5YdvCp4upKZYnA8ckafviDpmWEKp4afOZEqOli7gqSnh8I6enH&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; renderMathInElement(document.body, { delimiters: [ {left: &amp;#34;$$&amp;#34;, right: &amp;#34;$$&amp;#34;, display: true}, {left: &amp;#34;$&amp;#34;, right: &amp;#34;$&amp;#34;, display: false}, // æ³¨æ„çœ‹è¿™é‡Œï¼Œpandocä¼¼ä¹ä¼šæŠŠ$$ è½¬æˆ\( \)  // Nextä¸»é¢˜ä¸­ï¼Œåšæ–‡åœ¨é¦–é¡µçš„summaryçš„å…¬å¼éƒ½æ˜¯\( \)è¿™æ ·çš„  {left: &amp;#34;\\(&amp;#34;, right: &amp;#34;\\)&amp;#34;, display: false}, ], ignoredTags: [&amp;#39;script&amp;#39;, &amp;#39;noscript&amp;#39;, &amp;#39;style&amp;#39;, &amp;#39;textarea&amp;#39;, &amp;#39;pre&amp;#39;], } ); var all=document.getElementsByClassName(&amp;#39;katex&amp;#39;),i; for(i = 0; i &amp;lt; all.length; i &#43;= 1){ /* if(all[i].parentNode.parentNode.nodeName == &amp;#39;CODE&amp;#39;) */ /* all[i].parentNode.parentNode.className &#43;= &amp;#39; mathcode&amp;#39;; */ var tmp=all[i].parentNode; for(;tmp.nodeName==&amp;#39;SPAN&amp;#39;;tmp=tmp.parentNode); if(tmp.nodeName == &amp;#39;CODE&amp;#39;) tmp.className &#43;= &amp;#39; mathcode&amp;#39;; } &amp;lt;/script&amp;gt; &amp;lt;!-- ä¸‹ç•¥ --&amp;gt; {{- end -}}   è¿™æ ·çš„è¯ï¼Œåœ¨æ–‡æ¡£ä¸­ä¸æŒ‡åä½¿ç”¨pandocåˆ™ä¼šä½¿ç”¨æ–¹æ¡ˆä¸€ï¼ˆéœ€è¦è®¾ç½®.Site.Params.Mathï¼‰ï¼Œç®—æ˜¯ä¸ªæŠ˜ä¸­çš„æ–¹æ³•ã€‚
    ä¿®æ”¹ä»£ç å—çš„æ ·å¼
ä¸»é¢˜ï¼špure
ä¿®æ”¹cssæ–‡ä»¶çš„&amp;lt;pre&amp;gt;æ ‡ç­¾çš„æ ·å¼ï¼Œæ ·å¼å‚è€ƒ
  ä½¿ç”¨tabé”®å¯èƒ½é€ æˆå¥‡æ€ªçš„æ¸²æŸ“ç»“å±€ï¼Œåº”ä½¿ç”¨ç©ºæ ¼ä¸ºå®œ
  google analytic4
1 2 3  {{ if not .Site.IsServer }} {{ template &amp;#34;_internal/google_analytics_async.html&amp;#34; . }} {{ end }}     å¥½æƒ³ç”¨å…¶å®ƒä¸»é¢˜çš„shortcode
shortcode. å¾ˆå¼ºå¤§ã€‚è¿™æ˜¯ä¸ªrefçš„ä¾‹å­.
 [Neat]({{&amp;lt; ref &amp;ldquo;/blog/neat.md&amp;rdquo; &amp;gt;}}) 
1  &amp;lt;a href=&amp;#34;/blog/neat&amp;#34;&amp;gt;Neat&amp;lt;/a&amp;gt;      https://www.gohugo.org/doc/tutorials/mathjax/ &amp;ldquo;MathJax Support&amp;rdquo;&amp;#160;&amp;#x21a9;&amp;#xfe0e;
 https://note.qidong.name/2018/03/hugo-mathjax/&amp;#160;&amp;#x21a9;&amp;#xfe0e;
 https://wrong.wang/flight-rules/20181130-%E4%BD%BF%E7%94%A8pandoc%E5%92%8Ckatex%E4%B8%BAhugo%E6%B7%BB%E5%8A%A0latex%E6%94%AF%E6%8C%81/&amp;#160;&amp;#x21a9;&amp;#xfe0e;
 https://note.qidong.name/2017/07/05/google-analytics-in-hugo/&amp;#160;&amp;#x21a9;&amp;#xfe0e;
   </content>
    </entry>
    
     <entry>
        <title>[linux]è¿›ç¨‹ç®¡ç†</title>
        <url>https://litmingc.github.io/post/linux/%E8%BF%9B%E7%A8%8B%E7%9B%B8%E5%85%B3/</url>
        <categories>
          <category>å­¦ä¹ ç¬”è®°</category><category>Linux</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> ç›¸å…³å­—æ®µçš„å«ä¹‰ è¡¨å¤ªé•¿ï¼Œæˆ‘æŠ˜å äº†     è¡¨å¤´ å«ä¹‰     USER è¿›ç¨‹ç”±å“ªä¸ªç”¨æˆ·äº§ç”Ÿ   PID è¿›ç¨‹id   PPID çˆ¶è¿›ç¨‹id   %CPU æˆ–è€… C å ç”¨cpu   %MEM å ç”¨ç‰©ç†å†…å­˜   VSC å ç”¨è™šæ‹Ÿå†…å­˜çš„å¤§å°ï¼Œå•ä½KB   RSS å ç”¨ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œå•ä½KB   PRI è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚PRI &#43;= nice   NI å³niceï¼Œç”¨æˆ·å¯ä¿®æ”¹ã€‚   WCHAN æ˜¯å¦åœ¨è¿è¡Œï¼Œ-è¡¨ç¤ºåœ¨è¿è¡Œ   TTY tty1 ~ tty7 ä»£è¡¨æœ¬åœ°æ§åˆ¶å°ç»ˆç«¯ï¼Œtty7 æ˜¯å›¾å‹ç»ˆç«¯ã€‚
pts/0 ~ 255 ä»£è¡¨è™šæ‹Ÿç»ˆç«¯ï¼Œä¸€èˆ¬æ˜¯è¿œç¨‹è¿æ¥çš„ç»ˆç«¯ï¼Œç¬¬ä¸€ä¸ªè¿œç¨‹è¿æ¥å ç”¨ pts/0ï¼Œç¬¬äºŒä¸ªè¿œç¨‹è¿æ¥å ç”¨ pts/1ï¼Œä¾æ¬¡å¢—é•¿ã€‚   STAT æˆ–è€… S è¿›ç¨‹çŠ¶æ€ã€‚å¸¸è§çš„çŠ¶æ€æœ‰ä»¥ä¸‹å‡ ç§ï¼š 1. -Dï¼šä¸å¯è¢«å”¤é†’çš„ç¡çœ çŠ¶æ€ï¼Œé€šå¸¸ç”¨äº I/O æƒ…å†µã€‚ 2. -Rï¼šè¯¥è¿›ç¨‹æ­£åœ¨è¿è¡Œã€‚ 3. -Sï¼šè¯¥è¿›ç¨‹å¤„äºç¡çœ çŠ¶æ€ï¼Œå¯è¢«å”¤é†’ã€‚ 4. -Tï¼šåœæ­¢çŠ¶æ€ï¼Œå¯èƒ½æ˜¯åœ¨åå°æš‚åœæˆ–è¿›ç¨‹å¤„äºé™¤é”™çŠ¶æ€ã€‚ 5. -Wï¼šå†…å­˜äº¤äº’çŠ¶æ€ï¼ˆä» 2.6 å†…æ ¸å¼€å§‹æ— æ•ˆï¼‰ã€‚ 6. -Xï¼šæ­»æ‰çš„è¿›ç¨‹ï¼ˆåº”è¯¥ä¸ä¼šå‡ºç°ï¼‰ã€‚ 7. -Zï¼šåƒµå°¸è¿›ç¨‹ã€‚è¿›ç¨‹å·²ç»ä¸­æ­¢ï¼Œä½†æ˜¯éƒ¨åˆ†ç¨‹åºè¿˜åœ¨å†…å­˜å½“ä¸­ã€‚ 8. -&amp;lt;ï¼šé«˜ä¼˜å…ˆçº§ï¼ˆä»¥ä¸‹çŠ¶æ€åœ¨ BSD æ ¼å¼ä¸­å‡ºç°ï¼‰ã€‚ 9. -Nï¼šä½ä¼˜å…ˆçº§ã€‚ 10. -Lï¼šè¢«é”å…¥å†…å­˜ã€‚ 11. -sï¼šåŒ…å«å­è¿›ç¨‹ã€‚ 12. -lï¼šå¤šçº¿ç¨‹ï¼ˆå°å†™ Lï¼‰ã€‚
13. -&#43;ï¼šä½äºåå°ã€‚   TIME å ç”¨cpuçš„æ—¶é—´   COMMAND å‘½ä»¤   FD æ–‡ä»¶æè¿°ç¬¦   TYPE REGï¼šæ–‡ä»¶ï¼›DIRï¼šç›®å½•ï¼›CHRï¼šå­—ç¬¦ï¼›BLKï¼šå—è®¾å¤‡ï¼›UNIXï¼šunixå¥—æ¥å­—ï¼›FIFOï¼šå…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼›IPv4ç­‰ï¼šIPå¥—æ¥å­—   DEVICE æŒ‡å®šç£ç›˜åç§°   NODE ç´¢å¼•èŠ‚ç‚¹ï¼ˆæ–‡ä»¶åœ¨ç£ç›˜ä¸­çš„æ ‡è¯†ï¼‰      è¿›ç¨‹åå°æ‰§è¡Œ   åœ¨å‘½ä»¤åä½¿ç”¨ &amp;amp; ç¬¦å·
åå°è¿è¡Œ
1  find / -name abc.jpg &amp;amp;   å¸¸è§æ­é…ï¼šè¾“å‡ºé‡å®šå‘ï¼Œä½¿ç”¨&amp;gt;ç¬¦å·ï¼Œå¦‚ä¸‹
1 2 3  # å‘½ä»¤ &amp;gt; ç›®æ ‡æ–‡ä»¶ &amp;amp; # å°†å‘½ä»¤åœ¨åå°è¿è¡Œï¼Œå¹¶å°†è¾“å‡ºå¯¼å‡ºåˆ°ç›®æ ‡æ–‡ä»¶ cat a.txt &amp;gt; ç›®æ ‡æ–‡ä»¶ &amp;amp;     nohupå‘½ä»¤
è¿›ç¨‹è„±ç¦»ç»ˆç«¯æ‰§è¡Œï¼šå½“å‰ç»ˆç«¯é€€å‡ºæ—¶ï¼Œè¿›ç¨‹ä¸è¢«æ‰“æ–­
 no hang upï¼Œå³ä¸æŒ‚æ–­ï¼Œä½†ä¸æ˜¯åœ¨åå°è¿è¡Œï¼Œæ­é…&amp;amp;ä½¿ç”¨ã€‚  1  nohup find / -name abc.jpg &amp;amp;     jobså‘½ä»¤
æŸ¥çœ‹å½“å‰ç»ˆç«¯çš„åå°å·¥ä½œ
1  jobs [options]   options:
 -lï¼šåˆ—å‡ºè¿›ç¨‹PIDå· -nï¼šåªæ˜¾ç¤ºçŠ¶æ€æ”¹å˜çš„è¿›ç¨‹ -pï¼šåªæ˜¾ç¤ºPID -rï¼šç­›é€‰runningçŠ¶æ€çš„è¿›ç¨‹ -sï¼šç­›é€‰stoppdeçŠ¶æ€çš„è¿›ç¨‹  è¾“å‡º
å·¥ä½œå· &#43;- status commend
&#43;è¡¨ç¤ºæ–°å¢å·¥ä½œ
  fgå‘½ä»¤
å°†åå°å‘½ä»¤æ¢å¤åˆ°å‰å°
1  fg [[%]å·¥ä½œå·]   å·¥ä½œå·ä¸ºjobsè¾“å‡º[]ä¸­çš„æ•°å­— é»˜è®¤æ¢å¤æœ€æ–°å‘½ä»¤ï¼Œå³å¸¦&#43;çš„å·¥ä½œ
  bgå‘½ä»¤
å°†åå°æš‚åœçš„å·¥ä½œå¯åŠ¨
1  bg [[%]å·¥ä½œå·]     æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯â€”â€”pså‘½ä»¤    å‘½ä»¤é€‰é¡¹ å«ä¹‰     a æ˜¾ç¤ºä¸€ä¸ªç»ˆç«¯çš„æ‰€æœ‰è¿›ç¨‹ï¼Œé™¤ä¼šè¯å¼•çº¿å¤–   u æ˜¾ç¤ºè¿›ç¨‹çš„å½’å±ç”¨æˆ·åŠå†…å­˜çš„ä½¿ç”¨æƒ…å†µ   x æ˜¾ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹   -l é•¿æ ¼å¼æ˜¾ç¤ºæ›´åŠ è¯¦ç»†çš„ä¿¡æ¯   -e æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹        å®æ—¶ç›‘å¬è¿›ç¨‹ä¿¡æ¯â€”â€”topå‘½ä»¤   äº¤äº’æ“ä½œ
 ï¼Ÿæˆ–è€… h ï¼šå¸®åŠ© p ï¼šæŒ‰cpuå ç”¨æ’åº m ï¼šæŒ‰ç…§å†…å­˜å ç”¨æ’åº t ï¼šæŒ‰TIMEæ’åº k ï¼šç»ˆæ­¢ï¼ˆkillï¼‰è¿›ç¨‹ï¼ŒæŒ‡å®šPIDï¼ŒEscé€€å‡º r ï¼šé‡æ–°è®¾ç½®niceå€¼ï¼ŒæŒ‡å®šPIDï¼ŒEscé€€å‡º q ï¼šé€€å‡ºtop    å‘½ä»¤é€‰é¡¹
 -d ç§’æ•°ï¼štopå‘½ä»¤å‡ ç§’æ›´æ–°ä¸€æ¬¡ã€‚é»˜è®¤3ç§’ -bï¼šä½¿ç”¨æ‰¹å¤„ç†æ¨¡å¼ã€‚æ®è¯´ï¼Œç”¨äºå°†ä¿¡æ¯ä¿å­˜è¾“å‡ºåˆ°æ–‡ä»¶ã€‚ -n æ¬¡æ•°ï¼šæŒ‡å®štopå‘½ä»¤çš„æ‰§è¡Œæ¬¡æ•°ã€‚ -p è¿›ç¨‹PIDï¼šæŸ¥çœ‹æŒ‡å®šè¿›ç¨‹ã€‚ -sï¼šå®‰å…¨æ¨¡å¼ã€‚é¿å…åœ¨äº¤äº’è¿‡ç¨‹ä¸­å‡ºé”™ã€‚ -u ç”¨æˆ·åï¼šåªç›‘å¬æŸä¸ªç”¨æˆ·çš„è¿›ç¨‹ã€‚    æ³¨ï¼šcache ã€ bufferçš„åŒºåˆ«éƒ¨åˆ†æ˜¾ç¤ºæ³¨è§£ï¼š
 cacheï¼šè¯»å–ç¡¬ç›˜çš„æ•°æ®ç¼“å­˜ bufferï¼šå†™å…¥ç¡¬ç›˜çš„æ•°æ®ç¼“å­˜  æŸ¥çœ‹è¿›ç¨‹æ ‘â€”â€”pstreeå‘½ä»¤ pstree [option] [PID or username]
option:
 -aï¼šæ˜¾ç¤ºå¯åŠ¨æ¯ä¸ªè¿›ç¨‹å¯¹åº”çš„å®Œæ•´æŒ‡ä»¤ -cï¼šä¸ä½¿ç”¨ç²¾ç®€æ³•æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯ -nï¼šæ ¹æ®PIDæ’åº -pï¼šæ˜¾ç¤ºPID -uï¼šæ˜¾ç¤ºç”¨æˆ·å  æŸ¥çœ‹æ–‡ä»¶è°ƒç”¨â€”â€”lsofå‘½ä»¤ lsof [options] [filename]
optionï¼š
 -c å­—ç¬¦ä¸²ï¼šç­›é€‰ä»¥æ­¤å­—ç¬¦ä¸²å¼€å¤´çš„å‘½ä»¤ &#43;d ç›®å½•ï¼šç­›é€‰ç›®å½• -u ç”¨æˆ·åï¼šç­›é€‰ç”¨æˆ· -p PIDï¼šç­›é€‰PID  è°ƒæ•´è¿›ç¨‹ä¼˜å…ˆçº§ è¿›ç¨‹ä¼˜å…ˆçº§æ¶‰åŠåˆ°çš„å‚æ•°é—®é¢˜ PRI:Priorityï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ NI:nice  PRI(new) = PRI(old) &#43; nice ï¼Œ
å…¶ä¸­ï¼š
 NI $\epsilon$ [-20,19] æ™®é€šç”¨æˆ·åªèƒ½è°ƒæ•´è‡ªå·±çš„è¿›ç¨‹ï¼Œåªèƒ½è°ƒé«˜NIå€¼ï¼Œä¸”è°ƒæ•´èŒƒå›´ä¸º[0,19] ï¼›rootç”¨æˆ·ä¸å—é™    niceå‘½ä»¤
nice [-n NIå€¼] commend
  reniceå‘½ä»¤
renice [NIå€¼] PID ä¸niceä¸åŒï¼Œå¯ä»¥åœ¨å‘½ä»¤è¿è¡Œä¸­ä¿®æ”¹NIå€¼
  ç»ˆæ­¢è¿›ç¨‹   killå‘½ä»¤
1 2  kill [signal] PID kill [-ä¿¡å·ç¼–å·] PID      ä¿¡å·ç¼–å· ä¿¡å·å å«ä¹‰     1 HUP    9 KILL æ€æ­»è¿›ç¨‹   15 TERM æ­£å¸¸ç»“æŸè¿›ç¨‹ï¼Œkillé»˜è®¤ä¿¡å·      killallå‘½ä»¤
1  killall [options] [signal] è¿›ç¨‹å   options:
 -i:äº¤äº’å¼ï¼Œè¯¢é—®æ˜¯å¦æ€æ­»è¿›ç¨‹ -l:å¿½ç•¥è¿›ç¨‹åçš„å¤§å°å†™    pkillå‘½ä»¤
1  pkill [signal] [-t tty] [è¿›ç¨‹å]   é‡è¦åŠŸèƒ½ -tï¼šæŒ‡å®šç»ˆç«¯
1 2 3  # ä¾‹å¦‚ï¼š # å¼ºåˆ¶æ€æ­»ä»pts/1è™šæ‹Ÿç»ˆç«¯ç™»å½•çš„è¿›ç¨‹ pkill -9 -t pts/1     </content>
    </entry>
    
     <entry>
        <title>[Python]PyQt5ç¬”è®°</title>
        <url>https://litmingc.github.io/post/python/%E7%AC%94%E8%AE%B0pyqt5-notebook/</url>
        <categories>
          <category>å­¦ä¹ ç¬”è®°</category><category>python</category>
        </categories>
        <tags>
          <tag>PyQt5</tag>
        </tags>
        <content type="html">   ç¯å¢ƒï¼š
 python 3.8 PyQt5 5.13.0    QLineEdit   æ§åˆ¶è¾“å…¥   æ­£åˆ™è¡¨è¾¾å¼
1 2 3 4 5 6  Validator = QRegExpValidator(self) # æ ¡éªŒå™¨ # ä¸ºæ ¡éªŒå™¨é…ç½®QRegExp(), å‚æ•°r&amp;#34;[0-9]&amp;#34;ä¸ºæ­£åˆ™è¡¨è¾¾å¼  Validator.setRegExp(QRegExp(r&amp;#34;[0-9]&amp;#34;)) c = QLineEdit() c.setValidator(Validator)     æ©ç 
æ©ç å¯¹æ¯”æ­£åˆ™è¡¨è¾¾å¼ï¼šæ©ç ä½¿ç”¨å ä½ç¬¦ï¼›æ­£åˆ™è¡¨è¾¾å¼åˆ™æ²¡æœ‰å ä½ã€‚æ‰€ä»¥ï¼Œåœ¨æ²¡æœ‰è¾“å…¥çš„æƒ…å†µä¸‹ï¼Œæ©ç çš„å…‰æ ‡å¯ä»¥åœ¨å ä¸‹çš„ä½ç½®é—´ç§»åŠ¨ï¼Œè€Œä¸”è¾“å…¥æ–¹å¼ç›¸å½“äºæ›´æ–°ï¼Œè€Œä¸æ˜¯æ’å…¥ã€‚
1 2 3  c = QLineEdit() c.setInputMask(&amp;#39;0&amp;#39;) # è®¾ç½®æ©ç ï¼šä¸€ä½ 0-9 çš„å­—ç¬¦ c.setInputMask(&amp;#39;000&amp;#39;) # è®¾ç½®æ©ç ï¼šä¸‰ä½ 0-9 çš„å­—ç¬¦   æ©ç å ä½ç¬¦è¡¨
å‚è€ƒç½‘ä¸Šæœåˆ°çš„è¡¨æ ¼ï¼Œä½†åœ¨åº”ç”¨æ—¶ï¼ŒåŸè¡¨ä¸­â€œå¿…é¡»è¾“å…¥â€ä»¥åŠâ€œä¸æ˜¯å¿…éœ€çš„â€çš„å·®å¼‚æœªæœ‰ä½“ç°ï¼Œä¸‹è¡¨ä¸ºä¸ªäººè¯•éªŒå¾—å‡ºçš„æ„è§ã€‚
ã€æ³¨ã€‘è¯•éªŒæ—¶ï¼Œæœ‰æ•ˆçš„ä»£ç éƒ¨åˆ†ä»…ä¸ºä¸Šè¿°ä»£ç æ›´æ¢æ©ç è€Œå·²ã€‚
   å ä½å­—ç¬¦ å«ä¹‰     Aï¼Œa åªå…è®¸è¾“å…¥ã€A~Z, a~zã€‘ä»¥åŠæ±‰å­—   Nï¼Œn åªå…è®¸è¾“å…¥ã€A~Z, a~z, 0~9ã€‘ä»¥åŠæ±‰å­—   Xï¼Œx å…è®¸è¾“å…¥å„ç§å­—ç¬¦ï¼Œæ ‡ç‚¹   9ï¼Œ0 åªå…è®¸è¾“å…¥0-9çš„æ•°å­—   Dï¼Œd åªå…è®¸è¾“å…¥1-9çš„æ•°å­—   # åªå…è®¸è¾“å…¥1-9çš„æ•°å­—ã€åŠ å·&#43;ã€å‡å·-   Hï¼Œh åªå…è®¸è¾“å…¥A~Fã€ a~fã€0-9ï¼Œå³åå…­è¿›åˆ¶æ•°å­—   Bï¼Œb åªå…è®¸è¾“å…¥0ã€1ï¼Œå³äºŒè¿›åˆ¶æ•°å­—   &amp;gt; æ­é…ä¸Šè¿°å­—ç¬¦ï¼Œå°†å­—ç¬¦è‡ªåŠ¨å˜å¤§å†™ï¼Œå¯è¾“å…¥æ±‰å­—   &amp;lt; æ­é…ä¸Šè¿°å­—ç¬¦ï¼Œå°†å­—ç¬¦è‡ªåŠ¨å˜å°å†™ï¼Œå¯è¾“å…¥æ±‰å­—   ! æ­é…ä¸Šè¿°å­—ç¬¦ï¼Œä»ï¼çš„ä½ç½®å¼€å§‹ï¼Œå…³é—­ &amp;gt; ã€&amp;lt;çš„å¤§å°å†™è½¬æ¢æ•ˆæœã€‚
ä¾‹å¦‚ï¼š&#39;&amp;lt;aaa!aaa&#39;ï¼Œå‰ä¸‰ä¸ªå­—ç¬¦ä¼šè½¬æ¢ä¸ºå°å†™ï¼Œåä¸‰ä¸ªå­—ç¬¦ä¸ä¼šè¢«è½¬æ¢æˆå°å†™      é¼ æ ‡äº‹ä»¶ åˆ¤æ–­é¼ æ ‡æŒ‰é”® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  import sys from PyQt5 import QtGui from PyQt5.QtCore import QEvent, Qt from PyQt5.QtWidgets import QApplication, QLabel, QWidget class FillArea(QWidget): def __init__(self) -&amp;gt; None: super().__init__() self.wordTip = QLabel(&amp;#34;asdasd&amp;#34;, self) self.setGeometry(300, 300, 350, 100) self.show() def initWin(self): pass def mousePressEvent(self, event: QtGui.QMouseEvent) -&amp;gt; None: # å·¦é”®æŒ‰ä¸‹ if event.buttons() == Qt.LeftButton: self.wordTip.setText (&amp;#34;å·¦&amp;#34;) # å³é”®æŒ‰ä¸‹ elif event.buttons() == Qt.RightButton: self.wordTip.setText (&amp;#34;å³&amp;#34;) # ä¸­é”®æŒ‰ä¸‹ elif event.buttons() == Qt.MidButton: self.wordTip.setText (&amp;#34;ä¸­&amp;#34;) # å·¦å³é”®åŒæ—¶æŒ‰ä¸‹ elif event.buttons() == Qt.LeftButton | Qt.RightButton: self.wordTip.setText (&amp;#34;å·¦å³&amp;#34;) # å·¦ä¸­é”®åŒæ—¶æŒ‰ä¸‹ elif event.buttons() == Qt.LeftButton | Qt.MidButton: self.wordTip.setText (&amp;#34;å·¦ä¸­&amp;#34;) # å³ä¸­é”®åŒæ—¶æŒ‰ä¸‹ elif event.buttons() == Qt.MidButton | Qt.RightButton: self.wordTip.setText (&amp;#34;å³ä¸­&amp;#34;) # å·¦ä¸­å³é”®åŒæ—¶æŒ‰ä¸‹ elif event.buttons() == Qt.LeftButton | Qt.MidButton | Qt.RightButton: self.wordTip.setText (&amp;#34;å·¦ä¸­å³&amp;#34;) self.update() if __name__ == &amp;#34;__main__&amp;#34;: app = QApplication(sys.argv) ex = FillArea() sys.exit(app.exec_())   é¼ æ ‡ä½ç½®ç›‘æ§ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  import sys from PyQt5 import QtGui from PyQt5.QtCore import QEvent, Qt from PyQt5.QtWidgets import QApplication, QLabel, QWidget class FillArea(QWidget): def __init__(self) -&amp;gt; None: super().__init__() self.wordTip = QLabel(&amp;#34;asdasd-----------&amp;#34;, self) self.setGeometry(300, 300, 350, 100) # è·Ÿè¸ªé¼ æ ‡ self.setMouseTracking(True) self.show() def mouseMoveEvent(self, a0: QtGui.QMouseEvent) -&amp;gt; None: # ç›¸å¯¹äºæ•´ä¸ªå±å¹•çš„çš„ä½ç½® s = a0.screenPos() self.wordTip.setText(&amp;#34;X:{},Y:{}&amp;#34;.format(s.x(),s.y())) self.update() if __name__ == &amp;#34;__main__&amp;#34;: app = QApplication(sys.argv) ex = FillArea() sys.exit(app.exec_())   å³ä½¿æ²¡æœ‰å¼€å¯é¼ æ ‡è·Ÿè¸ªï¼ˆsetMouseTrackingï¼‰ï¼Œå½“åœ¨æ§ä»¶å†…æŒ‰ä¸‹é¼ æ ‡é”®ç§»åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨é¼ æ ‡ç§»åŠ¨äº‹ä»¶å‡½æ•°mouseMoveEvent()ã€‚
s = event.windowPos()ï¼šç›¸å¯¹äºQTçª—å£çš„ä½ç½®ã€‚
s = PyQt5.Qt.QCursor.pos()ï¼šå¯ä»¥è·å–å…¨å±€çš„é¼ æ ‡ä½ç½®ï¼Œç›¸å¯¹äºæ•´ä¸ªæ¡Œé¢ã€‚éœ€è¦è€ƒè™‘æ€ä¹ˆè§¦å‘è·å–ã€‚
æ­¤å¤–ï¼ŒQCursorè¿˜å¯ä»¥ç”¨æ¥æ“çºµé¼ æ ‡ã€‚
å…¨å±æ˜¾ç¤º self.showFullScreen()ï¼šè¦†ç›–å…¨å±ï¼ŒåŒ…æ‹¬ä»»åŠ¡æ ã€‚
é€æ˜ self.setWindowOpacity(0.5)ï¼šé€æ˜åº¦
</content>
    </entry>
    
     <entry>
        <title>QLineEdit</title>
        <url>https://litmingc.github.io/post/pyqt5_nb/%E7%AC%94%E8%AE%B0qlineedit/</url>
        <categories>
          <category>å­¦ä¹ ç¬”è®°</category><category>python</category>
        </categories>
        <tags>
          <tag>PyQt5</tag>
        </tags>
        <content type="html">   ç¯å¢ƒï¼š
 python 3.7 PyQt5 5.13.0    QLineEdit   æ§åˆ¶è¾“å…¥   æ­£åˆ™è¡¨è¾¾å¼
1 2 3 4 5 6  Validator = QRegExpValidator(self) # æ ¡éªŒå™¨ # ä¸ºæ ¡éªŒå™¨é…ç½®QRegExp(), å‚æ•°r&amp;#34;[0-9]&amp;#34;ä¸ºæ­£åˆ™è¡¨è¾¾å¼  Validator.setRegExp(QRegExp(r&amp;#34;[0-9]&amp;#34;)) c = QLineEdit() c.setValidator(Validator)     æ©ç 
æ©ç å¯¹æ¯”æ­£åˆ™è¡¨è¾¾å¼ï¼šæ©ç ä½¿ç”¨å ä½ç¬¦ï¼›æ­£åˆ™è¡¨è¾¾å¼åˆ™æ²¡æœ‰å ä½ã€‚æ‰€ä»¥ï¼Œåœ¨æ²¡æœ‰è¾“å…¥çš„æƒ…å†µä¸‹ï¼Œæ©ç çš„å…‰æ ‡å¯ä»¥åœ¨å ä¸‹çš„ä½ç½®é—´ç§»åŠ¨ï¼Œè€Œä¸”è¾“å…¥æ–¹å¼ç›¸å½“äºæ›´æ–°ï¼Œè€Œä¸æ˜¯æ’å…¥ã€‚
1 2 3  c = QLineEdit() c.setInputMask(&amp;#39;0&amp;#39;) # è®¾ç½®æ©ç ï¼šä¸€ä½ 0-9 çš„å­—ç¬¦ c.setInputMask(&amp;#39;000&amp;#39;) # è®¾ç½®æ©ç ï¼šä¸‰ä½ 0-9 çš„å­—ç¬¦   æ©ç å ä½ç¬¦è¡¨
å‚è€ƒç½‘ä¸Šæœåˆ°çš„è¡¨æ ¼ï¼Œä½†åœ¨åº”ç”¨æ—¶ï¼ŒåŸè¡¨ä¸­â€œå¿…é¡»è¾“å…¥â€ä»¥åŠâ€œä¸æ˜¯å¿…éœ€çš„â€çš„å·®å¼‚æœªæœ‰ä½“ç°ï¼Œä¸‹è¡¨ä¸ºä¸ªäººè¯•éªŒå¾—å‡ºçš„æ„è§ã€‚
ã€æ³¨ã€‘è¯•éªŒæ—¶ï¼Œæœ‰æ•ˆçš„ä»£ç éƒ¨åˆ†ä»…ä¸ºä¸Šè¿°ä»£ç æ›´æ¢æ©ç è€Œå·²ã€‚
   å ä½å­—ç¬¦ å«ä¹‰     Aï¼Œa åªå…è®¸è¾“å…¥ã€A~Z, a~zã€‘ä»¥åŠæ±‰å­—   Nï¼Œn åªå…è®¸è¾“å…¥ã€A~Z, a~z, 0~9ã€‘ä»¥åŠæ±‰å­—   Xï¼Œx å…è®¸è¾“å…¥å„ç§å­—ç¬¦ï¼Œæ ‡ç‚¹   9ï¼Œ0 åªå…è®¸è¾“å…¥0-9çš„æ•°å­—   Dï¼Œd åªå…è®¸è¾“å…¥1-9çš„æ•°å­—   # åªå…è®¸è¾“å…¥1-9çš„æ•°å­—ã€åŠ å·&#43;ã€å‡å·-   Hï¼Œh åªå…è®¸è¾“å…¥A~Fã€ a~fã€0-9ï¼Œå³åå…­è¿›åˆ¶æ•°å­—   Bï¼Œb åªå…è®¸è¾“å…¥0ã€1ï¼Œå³äºŒè¿›åˆ¶æ•°å­—   &amp;gt; æ­é…ä¸Šè¿°å­—ç¬¦ï¼Œå°†å­—ç¬¦è‡ªåŠ¨å˜å¤§å†™ï¼Œå¯è¾“å…¥æ±‰å­—   &amp;lt; æ­é…ä¸Šè¿°å­—ç¬¦ï¼Œå°†å­—ç¬¦è‡ªåŠ¨å˜å°å†™ï¼Œå¯è¾“å…¥æ±‰å­—   ! æ­é…ä¸Šè¿°å­—ç¬¦ï¼Œä»ï¼çš„ä½ç½®å¼€å§‹ï¼Œå…³é—­ &amp;gt; ã€&amp;lt;çš„å¤§å°å†™è½¬æ¢æ•ˆæœã€‚
ä¾‹å¦‚ï¼š&#39;&amp;lt;aaa!aaa&#39;ï¼Œå‰ä¸‰ä¸ªå­—ç¬¦ä¼šè½¬æ¢ä¸ºå°å†™ï¼Œåä¸‰ä¸ªå­—ç¬¦ä¸ä¼šè¢«è½¬æ¢æˆå°å†™      </content>
    </entry>
    
</search>